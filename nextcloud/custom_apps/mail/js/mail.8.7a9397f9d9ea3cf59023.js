(window.webpackJsonp=window.webpackJsonp||[]).push([[8,1],{1204:function(t,e,a){"use strict";var n=a(794);a.n(n).a},1205:function(t,e,a){(e=a(341)(!1)).push([t.i,"\n.toggle[data-v-ec03f544] {\n\tposition: fixed;\n\tdisplay: inline-block;\n\tleft: 0;\n\twidth: 44px;\n\theight: 44px;\n\tz-index: 1500;\n\tcursor: pointer;\n\ttransform: rotate(180deg);\n\tbackground-color: var(--color-main-background);\n\topacity: 1;\n}\n",""]),t.exports=e},1209:function(t,e,a){var n={"./af":901,"./af.js":901,"./ar":902,"./ar-dz":903,"./ar-dz.js":903,"./ar-kw":904,"./ar-kw.js":904,"./ar-ly":905,"./ar-ly.js":905,"./ar-ma":906,"./ar-ma.js":906,"./ar-sa":907,"./ar-sa.js":907,"./ar-tn":908,"./ar-tn.js":908,"./ar.js":902,"./az":909,"./az.js":909,"./be":910,"./be.js":910,"./bg":911,"./bg.js":911,"./bm":912,"./bm.js":912,"./bn":913,"./bn.js":913,"./bo":914,"./bo.js":914,"./br":915,"./br.js":915,"./bs":916,"./bs.js":916,"./ca":917,"./ca.js":917,"./cs":918,"./cs.js":918,"./cv":919,"./cv.js":919,"./cy":920,"./cy.js":920,"./da":921,"./da.js":921,"./de":922,"./de-at":923,"./de-at.js":923,"./de-ch":924,"./de-ch.js":924,"./de.js":922,"./dv":925,"./dv.js":925,"./el":926,"./el.js":926,"./en-SG":927,"./en-SG.js":927,"./en-au":928,"./en-au.js":928,"./en-ca":929,"./en-ca.js":929,"./en-gb":930,"./en-gb.js":930,"./en-ie":931,"./en-ie.js":931,"./en-il":932,"./en-il.js":932,"./en-nz":933,"./en-nz.js":933,"./eo":934,"./eo.js":934,"./es":935,"./es-do":936,"./es-do.js":936,"./es-us":937,"./es-us.js":937,"./es.js":935,"./et":938,"./et.js":938,"./eu":939,"./eu.js":939,"./fa":940,"./fa.js":940,"./fi":941,"./fi.js":941,"./fo":942,"./fo.js":942,"./fr":943,"./fr-ca":944,"./fr-ca.js":944,"./fr-ch":945,"./fr-ch.js":945,"./fr.js":943,"./fy":946,"./fy.js":946,"./ga":947,"./ga.js":947,"./gd":948,"./gd.js":948,"./gl":949,"./gl.js":949,"./gom-latn":950,"./gom-latn.js":950,"./gu":951,"./gu.js":951,"./he":952,"./he.js":952,"./hi":953,"./hi.js":953,"./hr":954,"./hr.js":954,"./hu":955,"./hu.js":955,"./hy-am":956,"./hy-am.js":956,"./id":957,"./id.js":957,"./is":958,"./is.js":958,"./it":959,"./it-ch":960,"./it-ch.js":960,"./it.js":959,"./ja":961,"./ja.js":961,"./jv":962,"./jv.js":962,"./ka":963,"./ka.js":963,"./kk":964,"./kk.js":964,"./km":965,"./km.js":965,"./kn":966,"./kn.js":966,"./ko":967,"./ko.js":967,"./ku":968,"./ku.js":968,"./ky":969,"./ky.js":969,"./lb":970,"./lb.js":970,"./lo":971,"./lo.js":971,"./lt":972,"./lt.js":972,"./lv":973,"./lv.js":973,"./me":974,"./me.js":974,"./mi":975,"./mi.js":975,"./mk":976,"./mk.js":976,"./ml":977,"./ml.js":977,"./mn":978,"./mn.js":978,"./mr":979,"./mr.js":979,"./ms":980,"./ms-my":981,"./ms-my.js":981,"./ms.js":980,"./mt":982,"./mt.js":982,"./my":983,"./my.js":983,"./nb":984,"./nb.js":984,"./ne":985,"./ne.js":985,"./nl":986,"./nl-be":987,"./nl-be.js":987,"./nl.js":986,"./nn":988,"./nn.js":988,"./pa-in":989,"./pa-in.js":989,"./pl":990,"./pl.js":990,"./pt":991,"./pt-br":992,"./pt-br.js":992,"./pt.js":991,"./ro":993,"./ro.js":993,"./ru":994,"./ru.js":994,"./sd":995,"./sd.js":995,"./se":996,"./se.js":996,"./si":997,"./si.js":997,"./sk":998,"./sk.js":998,"./sl":999,"./sl.js":999,"./sq":1e3,"./sq.js":1e3,"./sr":1001,"./sr-cyrl":1002,"./sr-cyrl.js":1002,"./sr.js":1001,"./ss":1003,"./ss.js":1003,"./sv":1004,"./sv.js":1004,"./sw":1005,"./sw.js":1005,"./ta":1006,"./ta.js":1006,"./te":1007,"./te.js":1007,"./tet":1008,"./tet.js":1008,"./tg":1009,"./tg.js":1009,"./th":1010,"./th.js":1010,"./tl-ph":1011,"./tl-ph.js":1011,"./tlh":1012,"./tlh.js":1012,"./tr":1013,"./tr.js":1013,"./tzl":1014,"./tzl.js":1014,"./tzm":1015,"./tzm-latn":1016,"./tzm-latn.js":1016,"./tzm.js":1015,"./ug-cn":1017,"./ug-cn.js":1017,"./uk":1018,"./uk.js":1018,"./ur":1019,"./ur.js":1019,"./uz":1020,"./uz-latn":1021,"./uz-latn.js":1021,"./uz.js":1020,"./vi":1022,"./vi.js":1022,"./x-pseudo":1023,"./x-pseudo.js":1023,"./yo":1024,"./yo.js":1024,"./zh-cn":1025,"./zh-cn.js":1025,"./zh-hk":1026,"./zh-hk.js":1026,"./zh-tw":1027,"./zh-tw.js":1027};function r(t){var e=o(t);return a(e)}function o(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}r.keys=function(){return Object.keys(n)},r.resolve=o,t.exports=r,r.id=1209},1219:function(t,e,a){"use strict";var n=a(796);a.n(n).a},1220:function(t,e,a){var n=a(341),r=a(1221),o=a(1222);e=n(!1);var i=r(o);e.push([t.i,".mail-message-account-color[data-v-1159209c]{position:absolute;left:0px;width:2px;height:69px;z-index:1}.app-content-list-item.unseen[data-v-1159209c]{font-weight:bold}.app-content-list-item.draft .app-content-list-item-line-two[data-v-1159209c]{font-style:italic}.icon-reply[data-v-1159209c],.icon-attachment[data-v-1159209c]{display:inline-block;vertical-align:text-top}.icon-reply[data-v-1159209c]{background-image:url("+i+");-ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';opacity:0.5}.icon-attachment[data-v-1159209c]{-ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';opacity:0.25}.app-content-list-item-line-two[data-v-1159209c],.app-content-list-item-menu[data-v-1159209c]{margin-top:-8px}.app-content-list-item-menu[data-v-1159209c]{margin-right:-2px}\n",""]),t.exports=e},1222:function(t,e,a){"use strict";a.r(e),e.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTYiIHdpZHRoPSIxNiI+PHBhdGggZD0iTTE1IDE1cy0uNC03LjgtNy0xMFYxTDEgOGw3IDd2LTRjNS4xIDAgNyA0IDcgNHoiLz48L3N2Zz4="},1223:function(t,e,a){"use strict";var n=a(797);a.n(n).a},1224:function(t,e,a){(e=a(341)(!1)).push([t.i,"\n#load-more-mail-messages[data-v-1f409bfa] {\n\tmargin: 10px auto;\n\tpadding: 10px;\n\tmargin-top: 50px;\n\tmargin-bottom: 200px;\n}\n\n/* TODO: put this in core icons.css as general rule for buttons with icons */\n#load-more-mail-messages.icon-loading-small[data-v-1f409bfa] {\n\tpadding-left: 32px;\n\tbackground-position: 9px center;\n}\n#list-refreshing[data-v-1f409bfa] {\n\toverflow-y: hidden;\n\tmin-height: 0;\n\ttransition-property: all;\n\ttransition-duration: 0.5s;\n\ttransition-timing-function: ease-in-out;\n}\n#list-refreshing.refreshing[data-v-1f409bfa] {\n\tmin-height: 32px;\n}\n.list-enter-active[data-v-1f409bfa],\n.list-leave-active[data-v-1f409bfa] {\n\ttransition: all var(--animation-quick);\n}\n.list-enter[data-v-1f409bfa],\n.list-leave-to[data-v-1f409bfa] {\n\topacity: 0;\n\theight: 0px;\n\ttransform: scaleY(0);\n}\n",""]),t.exports=e},1232:function(t,e,a){"use strict";var n=a(798);a.n(n).a},1233:function(t,e,a){(e=a(341)(!1)).push([t.i,"\n.reservation[data-v-b923b46c] {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n.event[data-v-b923b46c] {\n\tflex-grow: 1;\n}\n.event-name[data-v-b923b46c] {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n",""]),t.exports=e},1234:function(t,e,a){"use strict";var n=a(799);a.n(n).a},1235:function(t,e,a){(e=a(341)(!1)).push([t.i,"\n.reservation[data-v-5dfcd8b6] {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n.departure[data-v-5dfcd8b6],\n.arrival[data-v-5dfcd8b6] {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n.departure[data-v-5dfcd8b6],\n.arrival[data-v-5dfcd8b6],\n.connection[data-v-5dfcd8b6] {\n\tjustify-content: center;\n}\n.iata[data-v-5dfcd8b6] {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n.airport[data-v-5dfcd8b6] {\n\tfont-size: large;\n}\n.departure[data-v-5dfcd8b6] {\n\ttext-align: right;\n}\n.connection[data-v-5dfcd8b6] {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n",""]),t.exports=e},1236:function(t,e,a){"use strict";var n=a(800);a.n(n).a},1237:function(t,e,a){(e=a(341)(!1)).push([t.i,"\n.reservation[data-v-5978d1e8] {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n.departure[data-v-5978d1e8],\n.arrival[data-v-5978d1e8] {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n.departure[data-v-5978d1e8],\n.arrival[data-v-5978d1e8],\n.connection[data-v-5978d1e8] {\n\tjustify-content: center;\n}\n.station[data-v-5978d1e8] {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n.departure[data-v-5978d1e8] {\n\ttext-align: right;\n}\n.connection[data-v-5978d1e8] {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n",""]),t.exports=e},1238:function(t,e,a){"use strict";var n=a(801);a.n(n).a},1239:function(t,e,a){(e=a(341)(!1)).push([t.i,"#mail-content[data-v-5473b814]{margin-left:30px;margin-top:2px}#mail-message-has-blocked-content[data-v-5473b814]{margin-left:8px}#message-container[data-v-5473b814]{position:relative;width:100%;height:0;padding-bottom:56.25%}#message-frame[data-v-5473b814]{position:absolute;top:0;left:0;width:100%;height:100%}\n",""]),t.exports=e},1240:function(t,e,a){"use strict";var n=a(802);a.n(n).a},1241:function(t,e,a){(e=a(341)(!1)).push([t.i,"\n.mail-signature[data-v-375b1446] {\n\tfont-family: monospace;\n\topacity: 0.5;\n\tline-height: initial;\n}\n",""]),t.exports=e},1311:function(t,e,a){"use strict";var n=a(812);a.n(n).a},1312:function(t,e,a){(e=a(341)(!1)).push([t.i,"\n.attachment[data-v-7f3ec3f9] {\n\tposition: relative;\n\tdisplay: inline-block;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: 3px;\n\tmargin: 0 10px 10px 0;\n\tpadding: 5px;\n}\n.attachment[data-v-7f3ec3f9]:hover,\n.attachment span[data-v-7f3ec3f9]:hover {\n\tbackground-color: var(--color-background-dark);\n\tcursor: pointer;\n}\n@media only screen and (max-width: 768px) {\n.attachment[data-v-7f3ec3f9] {\n\t\twidth: calc(100% - 5px);\n}\n}\n@media only screen and (min-width: 769px) and (max-width: 1400px) {\n.attachment[data-v-7f3ec3f9] {\n\t\twidth: calc(50% - 10px);\n}\n}\n@media only screen and (min-width: 1401px) {\n.attachment[data-v-7f3ec3f9] {\n\t\twidth: calc(33% - 12px);\n}\n}\n.mail-attached-image[data-v-7f3ec3f9] {\n\tdisplay: block;\n\tmax-width: 100%;\n\tmax-height: 120px;\n\tcursor: pointer;\n}\n.mail-attached-image[data-v-7f3ec3f9]:hover {\n\topacity: 0.8;\n}\n.attachment-save-to-cloud[data-v-7f3ec3f9],\n.attachment-download[data-v-7f3ec3f9],\n.attachment-import[data-v-7f3ec3f9] {\n\tposition: absolute;\n\theight: 32px;\n\twidth: 32px;\n\tmargin: 0;\n\tbottom: 0;\n\tbackground-color: transparent;\n\tborder-color: transparent;\n}\n.attachment-save-to-cloud[data-v-7f3ec3f9] {\n\tright: 0;\n}\n.attachment-download[data-v-7f3ec3f9] {\n\tright: 32px;\n\topacity: 0.6;\n}\n.attachment-import[data-v-7f3ec3f9] {\n\tright: 64px;\n}\n.attachment-import-popover[data-v-7f3ec3f9] {\n\tright: 32px;\n\ttop: 42px;\n}\n.attachment-import-popover[data-v-7f3ec3f9]::after {\n\tright: 32px;\n}\n.attachment-name[data-v-7f3ec3f9] {\n\tdisplay: inline-block;\n\twidth: calc(100% - 108px);\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tvertical-align: middle;\n}\n\n/* show attachment size less prominent */\n.attachment-size[data-v-7f3ec3f9] {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\n\topacity: 0.5;\n}\n.attachment-icon[data-v-7f3ec3f9] {\n\tvertical-align: middle;\n}\n",""]),t.exports=e},1313:function(t,e,a){"use strict";var n=a(813);a.n(n).a},1314:function(t,e,a){(e=a(341)(!1)).push([t.i,"\n.mail-message-attachments {\n\tmargin-bottom: 20px;\n}\n\n/* show icon + text for Download all button\n\t\tas well as when there is only one attachment */\n.attachments-save-to-cloud {\n\tbackground-position: 9px center;\n\tpadding-left: 32px;\n}\n",""]),t.exports=e},1315:function(t,e,a){"use strict";var n=a(814);a.n(n).a},1316:function(t,e,a){(e=a(341)(!1)).push([t.i,"#mail-message{flex-grow:1}.mail-message-body{margin-bottom:100px}#mail-message-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:30px 0;box-sizing:content-box !important;height:44px;width:100%}#mail-message-header-fields{width:0;padding-left:38px;flex:1 1 auto}#mail-message-header-fields h2,#mail-message-header-fields p{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-bottom:7px;margin-bottom:0}#mail-message-header-fields .transparency{opacity:0.6}#mail-message-header-fields .transparency a{font-weight:bold}#mail-content,.mail-message-attachments{margin:10px 38px 50px 38px}.mail-message-attachments{margin-top:10px}#mail-content iframe{width:100%}#show-images-text{display:none}#mail-content a,.mail-signature a{color:#07d;border-bottom:1px dotted #07d;text-decoration:none;word-wrap:break-word}#mail-message-actions{display:flex;flex-direction:row;justify-content:flex-end;margin-left:10px;margin-right:22px;height:44px}.icon-reply-white,.icon-reply-all-white{height:44px;min-width:44px;margin:0;padding:9px 18px 10px 32px}@media only screen and (max-width: 600px){.action-label{display:none}}@media only screen and (min-width: 600px){.icon-reply-white,.icon-reply-all-white{background-position:12px center}}#mail-message-actions-menu{margin-left:4px}@media print{#mail-message-header-fields{position:relative}#header,#app-navigation,#reply-composer,#forward-button,#mail-message-has-blocked-content,.app-content-list,.message-composer,.mail-message-attachments{display:none !important}#app-content{margin-left:0 !important}.mail-message-body{margin-bottom:0 !important}}\n",""]),t.exports=e},1340:function(t,e,a){"use strict";var n=a(815);a.n(n).a},1341:function(t,e,a){(e=a(341)(!1)).push([t.i,"\nbutton[data-v-84fc7730] {\n\t/* TODO: remove for Nextcloud 15+ */\n\t/* https://github.com/nextcloud/server/pull/12138 */\n\tdisplay: inline-block;\n}\n.new-message-attachments li[data-v-84fc7730] {\n\tpadding: 10px;\n}\n.new-message-attachments-action[data-v-84fc7730] {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tpadding: 22px;\n\topacity: 0.5;\n}\n\n/* attachment filenames */\n.new-message-attachment-name[data-v-84fc7730] {\n\tdisplay: inline-block;\n}\n\n/* Colour the filename with a different color during attachment upload */\n.new-message-attachment-name.upload-ongoing[data-v-84fc7730] {\n\tcolor: #0082c9;\n}\n\n/* Colour the filename in red if the attachment upload failed */\n.new-message-attachment-name.upload-warning[data-v-84fc7730] {\n\tcolor: #d2322d;\n}\n\n/* Red ProgressBar for failed attachment uploads */\n.new-message-attachment-name.upload-warning .ui-progressbar-value[data-v-84fc7730] {\n\tborder: 1px solid #e9322d;\n\tbackground: #e9322d;\n}\n.attachments-upload-progress[data-v-84fc7730] {\n\tdisplay: flex;\n}\n.attachments-upload-progress > div[data-v-84fc7730] {\n\tpadding-left: 3px;\n}\n",""]),t.exports=e},1342:function(t,e,a){"use strict";var n=a(816);a.n(n).a},1343:function(t,e,a){(e=a(341)(!1)).push([t.i,".message-composer[data-v-5d616abc]{margin:0;z-index:100}.composer-actions[data-v-5d616abc]{display:flex;flex-direction:row;align-items:flex-end;justify-content:space-between;position:sticky;bottom:0;padding:12px;background:linear-gradient(transparent, var(--color-main-background-translucent) 50%)}.composer-actions-right[data-v-5d616abc]{display:flex;align-items:center}.composer-fields[data-v-5d616abc]{display:flex;align-items:center;border-top:1px solid var(--color-border)}.composer-fields.mail-account[data-v-5d616abc]{border-top:none}.composer-fields.mail-account>.multiselect[data-v-5d616abc]{max-width:none;min-height:auto}.composer-fields .multiselect[data-v-5d616abc],.composer-fields input[data-v-5d616abc],.composer-fields TextEditor[data-v-5d616abc]{flex-grow:1;max-width:none;border:none;border-radius:0}.composer-fields .multiselect[data-v-5d616abc]{margin-right:12px}.subject[data-v-5d616abc]{font-size:20px;font-weight:bold;margin:0;padding:24px 12px}.noreply-box[data-v-5d616abc]{padding:5px 12px;border-radius:0}.message-body[data-v-5d616abc]{min-height:300px;width:100%;margin:0;padding:12px;padding-top:0;border:none !important;outline:none !important;box-shadow:none !important}#draft-status[data-v-5d616abc]{padding:5px;opacity:0.5;font-size:small}.from-label[data-v-5d616abc],.to-label[data-v-5d616abc],.copy-toggle[data-v-5d616abc],.cc-label[data-v-5d616abc],.bcc-label[data-v-5d616abc]{padding:12px;cursor:text;color:var(--color-text-maxcontrast);width:100px;text-align:right;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.bcc-label[data-v-5d616abc]{top:initial;bottom:0}.copy-toggle[data-v-5d616abc]{cursor:pointer;width:initial}.copy-toggle[data-v-5d616abc]:hover,.copy-toggle[data-v-5d616abc]:focus{color:var(--color-main-text)}.reply[data-v-5d616abc]{min-height:100px}.send[data-v-5d616abc]{padding:12px 18px 13px 36px;background-position:12px center;margin-left:4px}\n",""]),t.exports=e},1344:function(t,e,a){"use strict";var n=a(817);a.n(n).a},1345:function(t,e,a){(e=a(341)(!1)).push([t.i,"\n.multiselect .multiselect__tags {\n\tborder: none !important;\n}\n",""]),t.exports=e},1346:function(t,e,a){"use strict";var n=a(818);a.n(n).a},1347:function(t,e,a){(e=a(341)(!1)).push([t.i,"\n.app-content-details[data-v-ef526768] {\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n}\n.icon[data-v-ef526768] {\n\theight: 64px;\n\twidth: 64px;\n\tmargin: 0 auto 15px;\n\tbackground-size: 64px;\n\topacity: 0.4;\n}\nh2[data-v-ef526768],\np[data-v-ef526768] {\n\ttext-align: center;\n}\n",""]),t.exports=e},1348:function(t,e,a){"use strict";var n=a(819);a.n(n).a},1349:function(t,e,a){(e=a(341)(!1)).push([t.i,"[data-v-1fd66e6e] #app-content #app-content-wrapper .app-content-details{margin:0 auto;max-width:900px}\n",""]),t.exports=e},1358:function(e,a,n){"use strict";n.r(a);var r=n(666),o=n.n(r),i=n(749),s=n.n(i),c=n(900),l=n.n(c),d={name:"AppDetailsToggle",mixins:[l.a]},u=(n(1204),n(35)),p=Object(u.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isMobile?a("div",{staticClass:"toggle icon-confirm",attrs:{tabindex:"0"},on:{click:function(e){return t.$emit("close")}}}):t._e()}),[],!1,null,"ec03f544",null).exports,m=n(1206),h=n.n(m),f=n(1207),v=n.n(f),g=n(1208),b=n(0),y={name:"EmptyFolder"},_=Object(u.a)(y,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"emptycontent"}},[e("div",{staticClass:"icon-mail"}),this._v(" "),e("h2",[this._v(this._s(this.t("mail","No messages in this folder")))])])}),[],!1,null,null,null).exports,x=n(678),j=n.n(x),w=n(610),A=n.n(w),C=n(658),I=n.n(C),k={name:"Moment",props:{timestamp:{type:Number,required:!0},format:{type:String,default:"LLL"}},computed:{title:function(){return I.a.unix(this.timestamp).format(this.format)},formatted:function(){return I.a.unix(this.timestamp).fromNow()}}},T=Object(u.a)(k,(function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"live-relative-timestamp",attrs:{"data-timestamp":1e3*this.timestamp,title:this.title}},[this._v(this._s(this.formatted))])}),[],!1,null,null,null).exports,S=n(1211),$=n.n(S),D=n(1218),M=n.n(D),E=n(4),O=n.n(E),N=n(1),F=M()((function(t){if(null===t)return Promise.resolve(void 0);var e=Object(N.generateUrl)("/apps/mail/api/avatars/url/{email}",{email:t});return O.a.get(e).then((function(t){return t.data})).then((function(e){return e.isExternal?Object(N.generateUrl)("/apps/mail/api/avatars/image/{email}",{email:t}):e.url})).catch((function(t){if(404!==t.response.status)return Promise.reject(t)}))})),P={name:"Avatar",components:{BaseAvatar:$.a},props:{displayName:{type:String,required:!0},email:{type:String,required:!0}},data:function(){return{loading:!0,avatarUrl:void 0}},computed:{hasAvatar:function(){return void 0!==this.avatarUrl}},mounted:function(){var t=this;F(this.email).then((function(e){t.avatarUrl=e,t.loading=!1}))}},R=Object(u.a)(P,(function(){var t=this.$createElement,e=this._self._c||t;return this.loading||!this.hasAvatar?e("BaseAvatar",{attrs:{"display-name":this.displayName,size:40}}):e("BaseAvatar",{attrs:{"display-name":this.displayName,url:this.avatarUrl,size:40}})}),[],!1,null,null,null).exports,U=n(668),L={name:"Envelope",components:{Actions:j.a,ActionButton:A.a,Avatar:R,Moment:T},props:{data:{type:Object,required:!0},folder:{type:Object,required:!0}},computed:{accountColor:function(){return Object(U.a)(this.$store.getters.getAccount(this.data.accountId).emailAddress)},draft:function(){return this.data.flags.draft},link:function(){return this.draft?{name:"message",params:{accountId:this.$route.params.accountId,folderId:this.$route.params.folderId,messageUid:"new",draftUid:this.data.uid},exact:!0}:{name:"message",params:{accountId:this.$route.params.accountId,folderId:this.$route.params.folderId,messageUid:this.data.uid},exact:!0}},addresses:function(){if("sent"===this.folder.specialRole){var e=[this.data.to,this.data.cc].flat().map((function(t){return t.label?t.label:t.email}));return e.length>0?e.join(", "):t("mail","Blind copy recipients only")}return 0===this.data.from.length?"?":this.data.from[0].label||this.data.from[0].email},avatarEmail:function(){if("sent"===this.folder.specialRole){var t=[this.data.to,this.data.cc].flat().map((function(t){return t.email}));return t.length>0?t[0]:void 0}return this.data.from.length>0?this.data.from[0].email:void 0}},methods:{onToggleFlagged:function(){this.$store.dispatch("toggleEnvelopeFlagged",this.data)},onToggleSeen:function(){this.$store.dispatch("toggleEnvelopeSeen",this.data)},onDelete:function(t){t.preventDefault(),this.$emit("delete",this.data),this.$store.dispatch("deleteMessage",this.data)}}},B=(n(1219),Object(u.a)(L,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{staticClass:"app-content-list-item",class:{unseen:t.data.flags.unseen,draft:t.draft},attrs:{to:t.link}},[t.folder.isUnified?a("div",{staticClass:"mail-message-account-color",style:{"background-color":t.accountColor}}):t._e(),t._v(" "),a("div",{staticClass:"app-content-list-item-star icon-starred",attrs:{"data-starred":t.data.flags.flagged?"true":"false"},on:{click:function(e){return e.preventDefault(),t.onToggleFlagged(e)}}}),t._v(" "),a("div",{staticClass:"app-content-list-item-icon"},[a("Avatar",{attrs:{"display-name":t.addresses,email:t.avatarEmail}})],1),t._v(" "),a("div",{staticClass:"app-content-list-item-line-one",attrs:{title:t.addresses}},[t._v("\n\t\t"+t._s(t.addresses)+"\n\t")]),t._v(" "),a("div",{staticClass:"app-content-list-item-line-two",attrs:{title:t.data.subject}},[t.data.flags.answered?a("span",{staticClass:"icon-reply"}):t._e(),t._v(" "),t.data.flags.hasAttachments?a("span",{staticClass:"icon-public icon-attachment"}):t._e(),t._v(" "),t.draft?a("span",{staticClass:"draft"},[a("em",[t._v(t._s(t.t("mail","Draft: ")))])]):t._e(),t._v("\n\t\t"+t._s(t.data.subject)+"\n\t")]),t._v(" "),a("div",{staticClass:"app-content-list-item-details date"},[a("Moment",{attrs:{timestamp:t.data.dateInt}})],1),t._v(" "),a("Actions",{staticClass:"app-content-list-item-menu",attrs:{"menu-align":"right"}},[a("ActionButton",{attrs:{icon:"icon-mail"},on:{click:function(e){return e.preventDefault(),t.onToggleSeen(e)}}},[t._v(t._s(t.data.flags.unseen?t.t("mail","Mark read"):t.t("mail","Mark unread")))]),t._v(" "),a("ActionButton",{attrs:{icon:"icon-delete"},on:{click:function(e){return e.preventDefault(),t.onDelete(e)}}},[t._v(t._s(t.t("mail","Delete")))])],1)],1)}),[],!1,null,"1159209c",null).exports),q=n(18);b.default.use(g.a,{throttle:600});var z={name:"EnvelopeList",components:{AppContentList:h.a,Envelope:B,EmptyFolder:_},directives:{infiniteScroll:v.a},props:{account:{type:Object,required:!0},folder:{type:Object,required:!0},envelopes:{type:Array,required:!0},searchQuery:{type:String,required:!1,default:void 0},show:{type:Boolean,default:!0}},data:function(){return{loadingMore:!1,refreshing:!1,shortkeys:{del:["del"],flag:["s"],next:["arrowright"],prev:["arrowleft"],refresh:["r"],unseen:["u"]}}},computed:{isSearch:function(){return void 0!==this.searchQuery}},methods:{loadMore:function(){var t=this;this.loadingMore=!0,this.$store.dispatch("fetchNextEnvelopePage",{accountId:this.$route.params.accountId,folderId:this.$route.params.folderId,query:this.searchQuery}).catch((function(t){return q.a.error("could not fetch next envelope page",{error:t})})).then((function(){t.loadingMore=!1}))},sync:function(){var t=this;this.refreshing=!0,this.$store.dispatch("syncEnvelopes",{accountId:this.$route.params.accountId,folderId:this.$route.params.folderId}).catch((function(t){return q.a.error("could not sync envelopes",{error:t})})).then((function(){t.refreshing=!1}))},onEnvelopeDeleted:function(t){var e,a=this.envelopes,n=this.envelopes.indexOf(t);-1!==n?t.uid===this.$route.params.messageUid?(e=0===n?a[n+1]:a[n-1])?this.$router.push({name:"message",params:{accountId:this.$route.params.accountId,folderId:this.$route.params.folderId,messageUid:e.uid}}):q.a.debug("no next/previous envelope, not navigating"):q.a.debug("other message open, not jumping to the next/previous message"):q.a.debug("envelope to delete does not exist in envelope list")},onScroll:function(t,e){if(0===e.scrollTop&&!this.refreshing)return this.sync()},handleShortcut:function(t){var e=this.envelopes,a=this.$route.params.messageUid;if(a){var n=e.filter((function(t){return t.uid==a}));if(0!==n.length){var r=n[0],o=e.indexOf(r);switch(t.srcKey){case"next":case"prev":var i;if(!(i="next"===t.srcKey?e[o+1]:e[o-1]))return void q.a.debug("ignoring shortcut: head or tail of envelope list reached",{envelopes:e,idx:o,srcKey:t.srcKey});this.$router.push({name:"message",params:{accountId:this.$route.params.accountId,folderId:this.$route.params.folderId,messageUid:i.uid}});break;case"del":q.a.debug("deleting",{env:r}),this.$store.dispatch("deleteMessage",r).catch((function(t){return q.a.error("could not delete envelope",{env:r,error:t})}));break;case"flag":q.a.debug("flagging envelope via shortkey",{env:r}),this.$store.dispatch("toggleEnvelopeFlagged",r).catch((function(t){return q.a.error("could not flag envelope via shortkey",{env:r,error:t})}));break;case"refresh":q.a.debug("syncing envelopes via shortkey"),this.refreshing||this.sync();break;case"unseen":q.a.debug("marking message as seen/unseen via shortkey",{env:r}),this.$store.dispatch("toggleEnvelopeSeen",r).catch((function(t){return q.a.error("could not mark envelope as seen/unseen via shortkey",{env:r,error:t})}));break;default:q.a.warn("shortcut "+t.srcKey+" is unknown. ignoring.")}}else q.a.debug("ignoring shortcut: currently displayed messages is not in current envelope list")}else q.a.debug("ignoring shortcut: no envelope selected")}}},V=(n(1223),Object(u.a)(z,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("AppContentList",{attrs:{"show-details":!t.show}},[a("transition-group",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"},{name:"scroll",rawName:"v-scroll",value:t.onScroll,expression:"onScroll"},{name:"shortkey",rawName:"v-shortkey.once",value:t.shortkeys,expression:"shortkeys",modifiers:{once:!0}}],attrs:{name:"list","infinite-scroll-disabled":"loading","infinite-scroll-distance":"30"},nativeOn:{shortkey:function(e){return t.handleShortcut(e)}}},[a("div",{key:"loading",staticClass:"icon-loading-small",class:{refreshing:t.refreshing},attrs:{id:"list-refreshing"}}),t._v(" "),0===t.envelopes.length?a("EmptyFolder",{key:"empty"}):t._l(t.envelopes,(function(e){return a("Envelope",{key:e.uid,attrs:{data:e,folder:t.folder},on:{delete:t.onEnvelopeDeleted}})})),t._v(" "),a("div",{key:"loadingMore",class:{"icon-loading-small":t.loadingMore},attrs:{id:"load-more-mail-messages"}})],2)],1)}),[],!1,null,"1f409bfa",null).exports),W={name:"Loading",props:{hint:{type:String,default:function(){}}}},H=Object(u.a)(W,(function(){var t=this.$createElement,e=this._self._c||t;return this.hint?e("div",{staticClass:"emptycontent"},[e("a",{staticClass:"icon-loading"}),this._v(" "),e("h2",[this._v(this._s(this.hint))])]):e("div",{staticClass:"container icon-loading"})}),[],!1,null,"8aa72af6",null).exports,G=n(659),Q=n.n(G),K={name:"Address",props:{email:{type:String,required:!0},label:{type:String,required:!0}},computed:{newMessageRoute:function(){return{name:"message",params:{accountId:this.$route.params.accountId,folderId:this.$route.params.folderId,messageUid:"new"},query:{to:this.email}}}}},Y={name:"AddressList",components:{Address:Object(u.a)(K,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.email!==t.label?a("router-link",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:t.email,expression:"email",modifiers:{bottom:!0}}],attrs:{to:t.newMessageRoute,exact:""}},[t._v(t._s(t.label))]):a("router-link",{attrs:{to:t.newMessageRoute,exact:""}},[t._v(t._s(t.label))])}),[],!1,null,null,null).exports},props:{entries:{type:Array,required:!0}}},Z=Object(u.a)(Y,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t._l(t.entries,(function(e,n){return[a("Address",{key:e.email,attrs:{email:e.email,label:e.label}}),n+1<t.entries.length?a("span",{key:e.email},[t._v(", ")]):t._e()]}))],2)}),[],!1,null,null,null).exports,J=n(1225),X=n.n(J),tt=Object.seal({None:0,To:1,Cc:2}),et=function(t,e){var a=tt.None,n=function(t){return t.email===e.email},r=X()(n),o=t.to.find(n);void 0!==o?a=tt.To:void 0!==(o=t.cc.find(n))?a=tt.Cc:o=e;var i=[],s=[];return a===tt.To?(i=(i=t.to.filter(r)).concat(t.from.filter(r)),s=t.cc):a===tt.Cc?(i=t.to.concat(t.from.filter(r)),s=t.cc.filter(r)):(i=(i=t.to).concat(t.from.filter(r)),s=t.cc),0==i.length&&(i=t.from),{to:i,from:o?[o]:[],cc:s}},at=["antw","atb","aw","bls","odp","r","re","ref","res","rif","sv","vá","vs","ynt","απ","σχετ","השב","回复","回覆"],nt=function(t){return at.some((function(e){return t.toLowerCase().startsWith("".concat(e,":"))}))?t:"RE: ".concat(t)},rt=["doorst","enc","fs","fw","fwd","i","i̇lt","pd","rv","továbbítás","tr","trs","vb","vl","vs","wg","yml","ΠΡΘ","הועבר","إعادة توجيه","رد","轉寄","转发"],ot=n(1227),it=n.n(ot),st=function(t){return t.reduce((function(t,e){var a="";return e.class?a+="  at "+e.class+"::"+e.function:a+="  at "+e.function,e.file&&(a+="\n     "+e.file+", line "+e.line),t+a+"\n"}),"")},ct=function(t){console.error(t);var e=t.message||"An unkown error occurred.";e.endsWith(".")||(e+=".");var a=(new it.a).addEmptyStepsToReproduce().addExpectedActualBehaviour().addLogs("Error",function(t){var e="";return t.type&&(e+=t.type+": "),e+=t.message,e+="\n",t.trace&&(e+=st(t.trace)),t.stack&&(e+=t.stack),e}(t)).render();return"https://github.com/nextcloud/mail/issues/new?title="+encodeURIComponent(e)+"&body="+encodeURIComponent(a)},lt={name:"Error",props:{error:{type:String,required:!0},message:{type:String,required:!0},data:{type:Object,default:function(){}}},computed:{reportUrl:function(){return ct(this.data)}}},dt=Object(u.a)(lt,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"emptycontent"},[a("h2",[t._v(t._s(t.error))]),t._v(" "),a("p",[t._v(t._s(t.message))]),t._v(" "),t.data&&t.data.debug?a("p",[a("a",{staticClass:"button",attrs:{href:t.reportUrl,target:"_blank",rel:"noopener"}},[t._v(t._s(t.t("mail","Report this bug")))])]):t._e()])}),[],!1,null,null,null).exports,ut=n(23),pt=[":-(",":-/",":-\\",":-|",":'-(",":'-/",":'-\\",":'-|"],mt=function(){return pt[Math.floor(Math.random()*pt.length)]},ht=function(){var t=[Object(ut.translate)("mail","Could not load your message"),Object(ut.translate)("mail","Could not load the desired message"),Object(ut.translate)("mail","Could not load the message")];return t[Math.floor(Math.random()*t.length)]+" "+mt()},ft=n(1228),vt=n.n(ft),gt=n(1231),bt=n(679),yt=n.n(bt),_t=n(79),xt=new gt.Client({baseUrl:Object(N.generateRemoteUrl)("dav/calendars"),xmlNamespaces:{"DAV:":"d","urn:ietf:params:xml:ns:caldav":"c","http://apple.com/ns/ical/":"aapl","http://owncloud.org/ns":"oc","http://calendarserver.org/ns/":"cs"}}),jt=["{DAV:}displayname","{urn:ietf:params:xml:ns:caldav}calendar-description","{urn:ietf:params:xml:ns:caldav}calendar-timezone","{http://apple.com/ns/ical/}calendar-order","{http://apple.com/ns/ical/}calendar-color","{urn:ietf:params:xml:ns:caldav}supported-calendar-component-set","{http://owncloud.org/ns}calendar-enabled","{DAV:}acl","{DAV:}owner","{http://owncloud.org/ns}invite"],wt=function(){var t=Object(N.generateRemoteUrl)("dav/calendars")+"/"+Object(_t.getCurrentUser)().uid+"/";return xt.propFind(t,jt,1,{requesttoken:Object(_t.getRequestToken)()}).then((function(t){var e=[];return t.body.forEach((function(t){if(!(t.propStat.length<1)&&200===function(t){return parseInt(t.split(" ")[1])}(t.propStat[0].status)){var a=function(t){!function(t){var e=!1,a=t["{DAV:}acl"];if(a)for(var n=0;n<a.length;n++){var r=a[n].getElementsByTagNameNS("DAV:","href");if(0!==r.length)r=r[0].textContent,a[n].getElementsByTagNameNS("DAV:","write").length>0&&(e=!0)}t.canWrite=e}(t);for(var e={displayname:t["{DAV:}displayname"],color:t["{http://apple.com/ns/ical/}calendar-color"],order:t["{http://apple.com/ns/ical/}calendar-order"],components:{vevent:!1},writable:t.canWrite},a=t["{urn:ietf:params:xml:ns:caldav}supported-calendar-component-set"]||[],n=0;n<a.length;n++){var r=a[n].attributes.getNamedItem("name").textContent.toLowerCase();Object.hasOwnProperty.call(e.components,r)&&(e.components[r]=!0)}return e}(t.propStat[0].properties);a&&a.components.vevent&&!0===a.writable&&(a.url=t.href,e.push(a))}})),e}))},At=function(){for(var t="",e=0;e<7;e++)t+=Math.random().toString(36).substring(7);return t},Ct=function(t){return function(e){q.a.debug("importing events into calendar",{url:t,data:e});var a=[],n=function(t){var e=[],a={},n=yt.a.parse(t),r=new yt.a.Component(n);r.getAllSubcomponents("vtimezone").forEach((function(t){return e.push(t)}));var o=["vevent","vjournal","vtodo"];o.forEach((function(t){var e=r.getAllSubcomponents(t);a[t]={},e.forEach((function(e){var n=e.getFirstPropertyValue("uid");a[t][n]=a[t][n]||[],a[t][n].push(e)}))}));var i=[];return o.forEach((function(t){for(var n in i[t]=[],a[t]){var r=a[t][n],o=(c=void 0,(c=new yt.a.Component(["vcalendar",[],[]])).updatePropertyWithValue("prodid","-//"+OC.theme.name+" Mail"),c);for(var s in e.forEach(o.addSubcomponent.bind(o)),r)o.addSubcomponent(r[s]);i[t].push(o.toString())}var c})),{name:r.getFirstPropertyValue("x-wr-calname"),color:r.getFirstPropertyValue("x-apple-calendar-color"),split:i}}(e);return["vevent","vjournal","vtodo"].forEach((function(e){for(var r in n.split[e]){var o=n.split[e][r];q.a.info("importing event component",{component:o}),a.push(Promise.resolve(O.a.put(t+At()+".ics",o,{headers:{"Content-Type":"text/calendar; charset=utf-8"}})))}})),Promise.all(a)}},It=n(619),kt=n.n(It),Tt={name:"CalendarImport",components:{Actions:j.a,ActionButton:A.a},props:{calendars:{type:Array,required:!0},handler:{type:Function,required:!0}},computed:{cals:function(){var t=this;return this.calendars.map((function(e){return t.$set(e,"loading",!1),e}))}},methods:{onImport:function(t){t.loading=!0,this.handler(t).catch(console.error.bind(this)).then((function(){t.loading=!1}))}}},St=Object(u.a)(Tt,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.calendars.length?a("Actions",{attrs:{"default-icon":"icon-add"}},t._l(t.cals,(function(e,n){return a("ActionButton",{key:n,attrs:{icon:e.loading?"icon-loading-small":"icon-add"},on:{click:function(a){return t.onImport(e)}}},[t._v(t._s(t.t("mail","Import into {calendar}",{calendar:e.displayname})))])})),1):t._e()}),[],!1,null,"35c9ae69",null).exports,$t={name:"EventReservation",components:{CalendarImport:St},props:{data:{type:Object,required:!0},calendars:{type:Array,required:!0},messageId:{type:String,required:!0}},computed:{eventName:function(){return this.data.reservationFor.name},time:function(){if("startDate"in this.data.reservationFor)return I()(this.data.reservationFor.startDate).format("LT")},date:function(){if("startDate"in this.data.reservationFor)return I()(this.data.reservationFor.startDate).format("L")},location:function(){if("location"in this.data.reservationFor&&"name"in this.data.reservationFor.location)return this.data.reservationFor.location.name},canImport:function(){return"startDate"in this.data.reservationFor}},methods:{getEndDateTime:function(t){return"endDate"in this.data.reservationFor?I()(this.data.reservationFor.endDate).format():I()("2019-10-22T12:00:00Z").add(2,"hours").format()},handleImport:function(e){var a=new yt.a.Component("VEVENT");a.updatePropertyWithValue("SUMMARY",this.eventName);var n=I()(this.data.reservationFor.startDate).format();a.updatePropertyWithValue("DTSTART",yt.a.Time.fromDateTimeString(n)),a.updatePropertyWithValue("DTEND",yt.a.Time.fromDateTimeString(this.getEndDateTime(this.data.reservationFor))),"location"in this.data.reservationFor&&(a.updatePropertyWithValue("LOCATION",this.data.reservationFor.location.name),"geo"in this.data.reservationFor.location&&a.updatePropertyWithValue("GEO","".concat(this.data.reservationFor.location.geo.latitude,";").concat(this.data.reservationFor.location.geo.longitude))),a.updatePropertyWithValue("PRODID","Nextcloud Mail"),a.updatePropertyWithValue("UID",kt()(this.messageId+this.eventName));var r=new yt.a.Component("VCALENDAR");return r.addSubcomponent(a),q.a.debug("generated calendar event from event reservation data",{ical:r.toString()}),Ct(e.url)(r.toString()).then((function(){q.a.debug("event successfully imported"),OCP.Toast.success(t("mail","Event imported into {calendar}",{calendar:e.displayname}))})).catch((function(e){q.a.error("Could not import event",{error:e}),OCP.Toast.error(t("mail","Could not create event"))}))}}},Dt=(n(1232),Object(u.a)($t,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reservation"},[a("div",{staticClass:"event"},[a("div",{staticClass:"event-name"},[t._v(t._s(t.eventName))]),t._v(" "),t.location?a("div",{staticClass:"venue"},[t._v(t._s(t.location))]):t._e(),t._v(" "),t.date?a("div",[t._v(t._s(t.date))]):t._e(),t._v(" "),t.time?a("div",[t._v(t._s(t.time))]):t._e()]),t._v(" "),t.canImport?a("CalendarImport",{attrs:{calendars:t.calendars,handler:t.handleImport}}):t._e()],1)}),[],!1,null,"b923b46c",null).exports),Mt=n(1352),Et=n(1078),Ot={name:"FlightReservation",components:{AirplaneIcon:Mt.a,ArrowIcon:Et.a,CalendarImport:St},props:{data:{type:Object,required:!0},calendars:{type:Array,required:!0},messageId:{type:String,required:!0}},computed:{departureTime:function(){if("departureTime"in this.data.reservationFor)return I()(this.data.reservationFor.departureTime["@value"]).format("LT")},departureDate:function(){if("departureTime"in this.data.reservationFor)return I()(this.data.reservationFor.departureTime["@value"]).format("L")},arrivalTime:function(){if("arrivalTime"in this.data.reservationFor)return I()(this.data.reservationFor.arrivalTime["@value"]).format("LT")},arrivalDate:function(){if("arrivalTime"in this.data.reservationFor)return I()(this.data.reservationFor.arrivalTime["@value"]).format("L")},flightNumber:function(){return this.data.reservationFor.airline.iataCode+this.data.reservationFor.flightNumber},reservation:function(){if("reservationNumber"in this.data)return this.data.reservationNumber},canImport:function(){return"departureTime"in this.data.reservationFor&&"arrivalTime"in this.data.reservationFor}},methods:{handleImport:function(e){var a=new yt.a.Component("VEVENT");a.updatePropertyWithValue("SUMMARY",t("mail","Flight {flightNr} from {depAirport} to {arrAirport}",{flightNr:this.flightNumber,depAirport:this.data.reservationFor.departureAirport.iataCode,arrAirport:this.data.reservationFor.arrivalAirport.iataCode}));var n=I()(this.data.reservationFor.departureTime["@value"]).format();a.updatePropertyWithValue("DTSTART",yt.a.Time.fromDateTimeString(n));var r=I()(this.data.reservationFor.arrivalTime["@value"]).format();a.updatePropertyWithValue("DTEND",yt.a.Time.fromDateTimeString(r)),a.updatePropertyWithValue("PRODID","Nextcloud Mail"),a.updatePropertyWithValue("UID",kt()(this.messageId+this.flightNumber));var o=new yt.a.Component("VCALENDAR");return o.addSubcomponent(a),q.a.debug("generated calendar event from flight reservation data",{ical:o.toString()}),Ct(e.url)(o.toString()).then((function(){q.a.debug("event successfully imported"),OCP.Toast.success(t("mail","Event imported into {calendar}",{calendar:e.displayname}))})).catch((function(e){q.a.error("Could not import event",{error:e}),OCP.Toast.error(t("mail","Could not create event"))}))}}},Nt=(n(1234),Object(u.a)(Ot,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reservation"},[a("div",{staticClass:"departure"},[a("div",{staticClass:"iata"},[t._v(t._s(t.data.reservationFor.departureAirport.iataCode))]),t._v(" "),a("div",{staticClass:"airport"},[t._v(t._s(t.data.reservationFor.departureAirport.name))]),t._v(" "),t.departureDate?a("div",[t._v(t._s(t.departureDate))]):t._e(),t._v(" "),t.departureTime?a("div",[t._v(t._s(t.departureTime))]):t._e()]),t._v(" "),a("div",{staticClass:"connection"},[a("div",[a("AirplaneIcon",{attrs:{title:t.t("mail","Airplane")}})],1),t._v(" "),a("div",[t._v(t._s(t.flightNumber))]),t._v(" "),t.reservation?a("div",[t._v(t._s(t.t("mail","Reservation {id}",{id:t.reservation})))]):a("div",[a("ArrowIcon",{attrs:{decorative:""}})],1)]),t._v(" "),a("div",{staticClass:"arrival"},[a("div",{staticClass:"iata"},[t._v(t._s(t.data.reservationFor.arrivalAirport.iataCode))]),t._v(" "),a("div",{staticClass:"airport"},[t._v(t._s(t.data.reservationFor.arrivalAirport.name))]),t._v(" "),t.arrivalDate?a("div",[t._v(t._s(t.arrivalDate))]):t._e(),t._v(" "),t.arrivalTime?a("div",[t._v(t._s(t.arrivalTime))]):t._e()]),t._v(" "),a("CalendarImport",{attrs:{calendars:t.calendars,handler:t.handleImport}})],1)}),[],!1,null,"5dfcd8b6",null).exports),Ft=n(1353),Pt={name:"TrainReservation",components:{ArrowIcon:Et.a,CalendarImport:St,TrainIcon:Ft.a},props:{data:{type:Object,required:!0},calendars:{type:Array,required:!0},messageId:{type:String,required:!0}},computed:{departureTime:function(){if("departureTime"in this.data.reservationFor)return I()(this.data.reservationFor.departureTime).format("LT")},departureDate:function(){return"departureTime"in this.data.reservationFor?I()(this.data.reservationFor.departureTime).format("L"):"departureDay"in this.data.reservationFor?I()(this.data.reservationFor.departureDay).format("L"):void 0},arrivalTime:function(){if("arrivalTime"in this.data.reservationFor)return I()(this.data.reservationFor.arrivalTime).format("LT")},arrivalDate:function(){if("arrivalTime"in this.data.reservationFor)return I()(this.data.reservationFor.arrivalTime).format("L")},trainNumber:function(){return this.data.reservationFor.trainNumber},canImport:function(){return"departureTime"in this.data.reservationFor&&"arrivalTime"in this.data.reservationFor||"departureDay"in this.data.reservationFor}},methods:{handleImport:function(e){var a=new yt.a.Component("VEVENT");if("trainNumber"in this.data.reservationFor?a.updatePropertyWithValue("SUMMARY",t("mail","{trainNr} from {depStation} to {arrStation}",{trainNr:this.data.reservationFor.trainNumber,depStation:this.data.reservationFor.departureStation.name,arrStation:this.data.reservationFor.arrivalStation.name})):a.updatePropertyWithValue("SUMMARY",t("mail","Train from {depStation} to {arrStation}",{depStation:this.data.reservationFor.departureStation.name,arrStation:this.data.reservationFor.arrivalStation.name})),"departureTime"in this.data.reservationFor&&"arrivalTime"in this.data.reservationFor){var n=I()(this.data.reservationFor.departureTime).format();a.updatePropertyWithValue("DTSTART",yt.a.Time.fromDateTimeString(n));var r=I()(this.data.reservationFor.arrivalTime).format();a.updatePropertyWithValue("DTEND",yt.a.Time.fromDateTimeString(r))}else if("departureDay"in this.data.reservationFor){var o=I()(this.data.reservationFor.departureDay).format();a.updatePropertyWithValue("DTSTART",yt.a.Time.fromDateTimeString(o))}a.updatePropertyWithValue("PRODID","Nextcloud Mail"),a.updatePropertyWithValue("UID",kt()(this.messageId+this.departureTime));var i=new yt.a.Component("VCALENDAR");return i.addSubcomponent(a),q.a.debug("generated calendar event from train reservation data",{ical:i.toString()}),Ct(e.url)(i.toString()).then((function(){q.a.debug("event successfully imported"),OCP.Toast.success(t("mail","Event imported into {calendar}",{calendar:e.displayname}))})).catch((function(e){q.a.error("Could not import event",{error:e}),OCP.Toast.error(t("mail","Could not create event"))}))}}},Rt=(n(1236),Object(u.a)(Pt,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reservation"},[a("div",{staticClass:"departure"},[a("div",{staticClass:"station"},[t._v(t._s(t.data.reservationFor.departureStation.name))]),t._v(" "),t.departureDate?a("div",[t._v(t._s(t.departureDate))]):t._e(),t._v(" "),t.departureTime?a("div",[t._v(t._s(t.departureTime))]):t._e()]),t._v(" "),a("div",{staticClass:"connection"},[a("div",[a("TrainIcon",{attrs:{title:t.t("mail","Train")}})],1),t._v(" "),a("div",[t._v(t._s(t.trainNumber))]),t._v(" "),a("div",[a("ArrowIcon",{attrs:{decorative:""}})],1)]),t._v(" "),a("div",{staticClass:"arrival"},[a("div",{staticClass:"station"},[t._v(t._s(t.data.reservationFor.arrivalStation.name))]),t._v(" "),t.arrivalDate?a("div",[t._v(t._s(t.arrivalDate))]):t._e(),t._v(" "),t.arrivalTime?a("div",[t._v(t._s(t.arrivalTime))]):t._e()]),t._v(" "),t.canImport?a("CalendarImport",{attrs:{calendars:t.calendars,handler:t.handleImport}}):t._e()],1)}),[],!1,null,"5978d1e8",null).exports),Ut=vt()(wt),Lt={name:"Itinerary",components:{EventReservation:Dt,FlightReservation:Nt,TrainReservation:Rt},props:{entries:{type:Array,required:!0},messageId:{type:String,required:!0}},data:function(){return{calendars:[]}},mounted:function(){var t=this;Ut().then((function(e){return t.calendars=e})).catch((function(t){return q.a.error("Could not load calendars",{error:t})}))}},Bt=Object(u.a)(Lt,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._l(t.entries,(function(e,n){return["EventReservation"===e["@type"]?a("EventReservation",{key:n,attrs:{data:e,calendars:t.calendars,"message-id":t.messageId}}):"FlightReservation"===e["@type"]?a("FlightReservation",{key:n,attrs:{data:e,calendars:t.calendars,"message-id":t.messageId}}):"TrainReservation"===e["@type"]?a("TrainReservation",{key:n,attrs:{data:e,calendars:t.calendars,"message-id":t.messageId}}):a("span",{key:n},[t._v(t._s(t.t("mail","Itinerary for {type} is not supported yet",{type:e["@type"]})))])]}))],2)}),[],!1,null,null,null).exports,qt=new(n(1354).a),zt={name:"MessageHTMLBody",props:{url:{type:String,required:!0}},data:function(){return{loading:!0,hasBlockedContent:!1}},beforeMount:function(){qt.on("beforeprint",this.onBeforePrint),qt.on("afterprint",this.onAfterPrint)},beforeDestroy:function(){qt.off("beforeprint",this.onBeforePrint),qt.off("afterprint",this.onAfterPrint)},methods:{getIframeDoc:function(){var t=this.$refs.iframe;return t.contentDocument||t.contentWindow.document},onMessageFrameLoad:function(){var t=this.getIframeDoc();t.querySelectorAll("body")[0];this.hasBlockedContent=t.querySelectorAll("[data-original-src]").length>0||t.querySelectorAll("[data-original-style]").length>0,this.loading=!1},onAfterPrint:function(){this.$refs.iframe.style.setProperty("height","")},onBeforePrint:function(){this.$refs.iframe.style.setProperty("height","".concat(this.getIframeDoc().body.scrollHeight,"px"),"important")},onShowBlockedContent:function(){var t=this.getIframeDoc();q.a.debug("showing external images"),t.querySelectorAll("[data-original-src]").forEach((function(t){t.style.display=null,t.setAttribute("src",t.getAttribute("data-original-src"))})),t.querySelectorAll("[data-original-style]").forEach((function(t){return t.setAttribute("style",t.getAttribute("data-original-style"))})),this.hasBlockedContent=!1}}},Vt=(n(1238),Object(u.a)(zt,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"mail-content"}},[t.hasBlockedContent?a("div",{attrs:{id:"mail-message-has-blocked-content"}},[t._v("\n\t\t"+t._s(t.t("mail","The images have been blocked to protect your privacy."))+"\n\t\t"),a("button",{on:{click:t.onShowBlockedContent}},[t._v("\n\t\t\t"+t._s(t.t("mail","Show images from this\tsender"))+"\n\t\t")])]):t._e(),t._v(" "),t.loading?a("div",{staticClass:"icon-loading"}):t._e(),t._v(" "),a("div",{class:{hidden:t.loading},attrs:{id:"message-container"}},[a("iframe",{ref:"iframe",attrs:{id:"message-frame",src:t.url,seamless:""},on:{load:t.onMessageFrameLoad}})])])}),[],!1,null,"5473b814",null).exports),Wt={name:"MessagePlainTextBody",props:{body:{type:String,required:!0},signature:{type:String,default:function(){}}},computed:{htmlBody:function(){return this.nl2br(this.body)},htmlSignature:function(){return this.nl2br(this.signature)}},methods:{nl2br:function(t){return t.replace(/(\r\n|\n\r|\n|\r)/g,"<br />")}}},Ht=(n(1240),Object(u.a)(Wt,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{attrs:{id:"mail-content"},domProps:{innerHTML:this._s(this.htmlBody)}}),this._v(" "),this.signature?e("div",{staticClass:"mail-signature",domProps:{innerHTML:this._s(this.htmlSignature)}}):this._e()])}),[],!1,null,"375b1446",null).exports),Gt=n(803),Qt=n(362);
/*
 * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>
 *
 * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
function Kt(t,e,a,n,r){var o=Object(N.generateUrl)("apps/mail/api/accounts/{accountId}/folders/{folderId}/messages/{messageId}/attachment/{attachmentId}",{accountId:t,folderId:e,messageId:a,attachmentId:n});return O.a.post(o,{targetPath:r})}var Yt=n(1279),Zt=n(1309),Jt=n(1310),Xt={name:"MessageAttachment",components:{PopoverMenu:n.n(Jt).a},mixins:[Zt.mixin],props:{id:{type:String,required:!0},fileName:{type:String,required:!1},url:{type:String,required:!0},size:{type:Number,required:!0},mime:{type:String,required:!0},mimeUrl:{type:String,required:!0},isImage:{type:Boolean,default:!1},isCalendarEvent:{type:Boolean,default:!1}},data:function(){return{savingToCloud:!1,loadingCalendars:!1,calendars:[],showCalendarPopover:!1}},computed:{name:function(){return"message/rfc822"===this.mime?t("mail","Embedded message"):this.fileName},label:function(){return"message/rfc822"===this.mime?t("mail","Embedded message")+" ("+Object(Yt.formatFileSize)(this.size)+")":this.fileName+" ("+Object(Yt.formatFileSize)(this.size)+")"},calendarMenuEntries:function(){var t=this;return this.calendars.map((function(e){return{icon:"icon-add",text:e.displayname,action:t.importCalendar(e.url)}}))}},methods:{humanReadable:function(t){return Object(Yt.formatFileSize)(t)},saveToCloud:function(){var e=this,a=Object(Qt.a)(this.$route.params.messageUid),n=a.accountId,r=a.folderId,o=a.id;return Object(Gt.getFilePickerBuilder)(t("mail","Choose a folder to store the attachment in")).setMultiSelect(!1).addMimeTypeFilter("httpd/unix-directory").setModal(!0).setType(1).build().pick().then((function(t){return e.savingToCloud=!0,t})).then(function(t,e,a,n){return function(r){return Kt(t,e,a,n,r)}}(n,r,o,this.id)).then((function(){return q.a.info("saved")})).catch((function(t){return q.a.error("not saved",{error:t})})).then((function(){return e.savingToCloud=!1}))},download:function(){window.open(this.url),window.focus()},loadCalendars:function(){var t=this;this.loadingCalendars=!0,wt().then((function(e){t.calendars=e,t.showCalendarPopover=!0,t.loadingCalendars=!1}))},closeCalendarPopover:function(){this.showCalendarPopover=!1},importCalendar:function(t){var e=this;return function(){(function(t){return O.a.get(t).then((function(t){return t.data}))})(e.url).then(Ct(t)).then((function(){return q.a.info("calendar imported")})).catch((function(t){return q.a.error("import error",{error:t})})).then((function(){return e.showCalendarPopover=!1}))}}}},te=(n(1311),{name:"MessageAttachments",components:{MessageAttachment:Object(u.a)(Xt,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"attachment",on:{click:t.download}},[t.isImage?a("img",{staticClass:"mail-attached-image",attrs:{src:t.url}}):t._e(),t._v(" "),a("img",{staticClass:"attachment-icon",attrs:{src:t.mimeUrl}}),t._v(" "),a("span",{staticClass:"attachment-name",attrs:{title:t.label}},[t._v(t._s(t.name)+"\n\t\t"),a("span",{staticClass:"attachment-size"},[t._v("("+t._s(t.humanReadable(t.size))+")")])]),t._v(" "),t.isCalendarEvent?a("button",{staticClass:"button attachment-import calendar",class:{"icon-add":!t.loadingCalendars,"icon-loading-small":t.loadingCalendars},attrs:{disabled:t.loadingCalendars,title:t.t("mail","Import into calendar")},on:{click:function(e){return e.stopPropagation(),t.loadCalendars(e)}}}):t._e(),t._v(" "),a("button",{staticClass:"button icon-download attachment-download",attrs:{title:t.t("mail","Download attachment")}}),t._v(" "),a("button",{staticClass:"attachment-save-to-cloud",class:{"icon-folder":!t.savingToCloud,"icon-loading-small":t.savingToCloud},attrs:{disabled:t.savingToCloud,title:t.t("mail","Save to Files")},on:{click:function(e){return e.stopPropagation(),t.saveToCloud(e)}}}),t._v(" "),a("div",{directives:[{name:"on-click-outside",rawName:"v-on-click-outside",value:t.closeCalendarPopover,expression:"closeCalendarPopover"}],staticClass:"popovermenu bubble attachment-import-popover hidden",class:{open:t.showCalendarPopover}},[a("PopoverMenu",{attrs:{menu:t.calendarMenuEntries}})],1)])}),[],!1,null,"7f3ec3f9",null).exports},props:{attachments:{type:Array,required:!0}},data:function(){return{savingToCloud:!1}},computed:{moreThanOne:function(){return this.attachments.length>1}},methods:{saveAll:function(){var e=this,a=Object(Gt.getFilePickerBuilder)(t("mail","Choose a folder to store the attachments in")).setMultiSelect(!1).addMimeTypeFilter("httpd/unix-directory").setModal(!0).setType(1).build(),n=Object(Qt.a)(this.$route.params.messageUid),r=n.accountId,o=n.folderId,i=n.id;return a.pick().then((function(t){return e.savingToCloud=!0,t})).then(function(t,e,a){return function(n){return function(t,e,a,n){return Kt(t,e,a,0,n)}(t,e,a,n)}}(r,o,i)).then((function(){return q.a.info("saved")})).catch((function(t){return q.a.error("not saved",{error:t})})).then((function(){return e.savingToCloud=!1}))}}}),ee=(n(1313),Object(u.a)(te,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mail-message-attachments"},[a("div",{staticClass:"attachments"},t._l(t.attachments,(function(t){return a("MessageAttachment",{key:t.id,attrs:{id:t.id,"file-name":t.fileName,size:t.size,url:t.downloadUrl,"is-image":t.isImage,"is-calendar-event":t.isCalendarEvent,mime:t.mime,"mime-url":t.mimeUrl}})})),1),t._v(" "),t.moreThanOne?a("p",[a("button",{staticClass:"attachments-save-to-cloud",class:{"icon-folder":!t.savingToCloud,"icon-loading-small":t.savingToCloud},attrs:{disabled:t.savingToCloud},on:{click:t.saveAll}},[t._v("\n\t\t\t"+t._s(t.t("mail","Save all to Files"))+"\n\t\t")])]):t._e()])}),[],!1,null,null,null).exports),ae={name:"Message",components:{ActionButton:A.a,Actions:j.a,AddressList:Z,AppContentDetails:Q.a,Error:dt,Itinerary:Bt,Loading:H,MessageAttachments:ee,MessageHTMLBody:Vt,MessagePlainTextBody:Ht},data:function(){return{loading:!0,message:void 0,errorMessage:"",error:void 0,replyRecipient:{},replySubject:"",envelope:""}},computed:{htmlUrl:function(){return Object(N.generateUrl)("/apps/mail/api/accounts/{accountId}/folders/{folderId}/messages/{id}/html",{accountId:this.message.accountId,folderId:this.message.folderId,id:this.message.id})},replyTo:function(){return{accountId:this.message.accountId,folderId:this.message.folderId,messageId:this.message.id}},hasMultipleRecipients:function(){return this.replyRecipient.to.concat(this.replyRecipient.cc).length>1}},watch:{$route:function(t,e){this.fetchMessage()}},created:function(){this.fetchMessage()},methods:{fetchMessage:function(){var e=this;this.loading=!0,this.message=void 0,this.errorMessage="",this.error=void 0,this.replyRecipient={},this.replySubject="";var a=this.$route.params.messageUid;this.$store.dispatch("fetchMessage",a).then((function(t){if(t.uid===e.$route.params.messageUid){if(e.message=t,void 0===e.message)return q.a.info("message could not be found",{messageUid:a}),e.errorMessage=ht(),void(e.loading=!1);var n=e.$store.getters.getAccount(t.accountId);if(e.replyRecipient=et(t,{label:n.name,email:n.emailAddress}),e.replySubject=nt(t.subject),e.loading=!1,e.envelope=e.$store.getters.getEnvelope(t.accountId,t.folderId,t.id),e.envelope.flags.unseen)return e.$store.dispatch("toggleEnvelopeSeen",e.envelope)}else q.a.debug("User navigated away, loaded message won't be shown nor flagged as seen")})).catch((function(n){q.a.error("could not load message ",{messageUid:a,error:n}),n.isError&&(e.errorMessage=t("mail","Could not load your message"),e.error=n,e.loading=!1)}))},replyMessage:function(){this.$router.push({name:"message",params:{accountId:this.$route.params.accountId,folderId:this.$route.params.folderId,messageUid:"reply"},query:{uid:this.message.uid}})},replyAll:function(){this.$router.push({name:"message",params:{accountId:this.$route.params.accountId,folderId:this.$route.params.folderId,messageUid:"replyAll"},query:{uid:this.message.uid}})},forwardMessage:function(){this.$router.push({name:"message",params:{accountId:this.$route.params.accountId,folderId:this.$route.params.folderId,messageUid:"new"},query:{uid:this.message.uid}})},onToggleSeen:function(){this.$store.dispatch("toggleEnvelopeSeen",this.envelope)},onDelete:function(t){t.preventDefault();var e,a=this.$store.getters.getEnvelopes(this.$route.params.accountId,this.$route.params.folderId),n=a.indexOf(this.envelope);-1!==n?(e=0===n?a[n+1]:a[n-1],this.$emit("delete",this.envelope),this.$store.dispatch("deleteMessage",this.envelope),e?this.$router.push({name:"message",params:{accountId:this.$route.params.accountId,folderId:this.$route.params.folderId,messageUid:e.uid}}):q.a.debug("no next/previous envelope, not navigating")):q.a.debug("envelope to delete does not exist in envelope list")}}},ne=(n(1315),Object(u.a)(ae,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("AppContentDetails",{attrs:{id:"mail-message"}},[t.loading?a("Loading"):t.message?[a("div",{attrs:{id:"mail-message-header"}},[a("div",{attrs:{id:"mail-message-header-fields"}},[a("h2",{attrs:{title:t.message.subject}},[t._v(t._s(t.message.subject))]),t._v(" "),a("p",{staticClass:"transparency"},[a("AddressList",{attrs:{entries:t.message.from}}),t._v("\n\t\t\t\t\tto\n\t\t\t\t\t"),t._v(" "),a("AddressList",{attrs:{entries:t.message.to}}),t._v(" "),t.message.cc.length?[t._v("\n\t\t\t\t\t\t(cc\n\t\t\t\t\t\t"),t._v(" "),a("AddressList",{attrs:{entries:t.message.cc}}),t._v(")\n\t\t\t\t\t")]:t._e()],2)]),t._v(" "),a("div",{attrs:{id:"mail-message-actions"}},[a("div",{class:t.hasMultipleRecipients?"icon-reply-all-white button primary":"icon-reply-white button primary",on:{click:function(e){t.hasMultipleRecipients?t.replyAll():t.replyMessage()}}},[a("span",{staticClass:"action-label"},[t._v(t._s(t.t("mail","Reply")))])]),t._v(" "),a("Actions",{staticClass:"app-content-list-item-menu",attrs:{id:"mail-message-actions-menu","menu-align":"right"}},[t.hasMultipleRecipients?a("ActionButton",{attrs:{icon:"icon-reply"},on:{click:t.replyMessage}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Reply to sender only"))+"\n\t\t\t\t\t")]):t._e(),t._v(" "),a("ActionButton",{attrs:{icon:"icon-forward"},on:{click:t.forwardMessage}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Forward"))+"\n\t\t\t\t\t")]),t._v(" "),a("ActionButton",{attrs:{icon:"icon-mail"},on:{click:t.onToggleSeen}},[t._v("\n\t\t\t\t\t\t"+t._s(t.envelope.flags.unseen?t.t("mail","Mark read"):t.t("mail","Mark unread"))+"\n\t\t\t\t\t")]),t._v(" "),a("ActionButton",{attrs:{icon:"icon-delete"},on:{click:t.onDelete}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Delete"))+"\n\t\t\t\t\t")])],1)],1)]),t._v(" "),a("div",{staticClass:"mail-message-body"},[t.message.itineraries.length>0?a("div",{staticClass:"message-itinerary"},[a("Itinerary",{attrs:{entries:t.message.itineraries,"message-id":t.message.messageId}})],1):t._e(),t._v(" "),t.message.hasHtmlBody?a("MessageHTMLBody",{attrs:{url:t.htmlUrl}}):a("MessagePlainTextBody",{attrs:{body:t.message.body,signature:t.message.signature}}),t._v(" "),a("MessageAttachments",{attrs:{attachments:t.message.attachments}}),t._v(" "),a("div",{attrs:{id:"reply-composer"}})],1)]:a("Error",{attrs:{error:t.error&&t.error.message?t.error.message:t.t("mail","Not found"),message:t.errorMessage,data:t.error}})],2)}),[],!1,null,null,null).exports),re=n(1317),oe=n.n(re),ie=n(1320),se=n.n(ie),ce=n(1322),le=n.n(ce),de=n(1325),ue=n.n(de),pe=n(1326),me=n.n(pe),he=n(1327),fe=n.n(he),ve=n(1338),ge=n.n(ve),be=n(1339),ye=n.n(be),_e={name:"ComposerAttachments",props:{value:{type:Array,required:!0},bus:{type:Object,required:!0}},data:function(){return{uploading:!1,uploads:{}}},computed:{uploadProgress:function(){var t=0,e=0;for(var a in this.uploads)t+=this.uploads[a].uploaded,e+=this.uploads[a].total;return(t/e*100).toFixed(1)}},created:function(){this.bus.$on("onAddLocalAttachment",this.onAddLocalAttachment),this.bus.$on("onAddCloudAttachment",this.onAddCloudAttachment)},methods:{onAddLocalAttachment:function(){this.$refs.localAttachments.click()},fileNameToAttachment:function(t,e){return{fileName:t,displayName:ye()("/")(t),id:e,isLocal:void 0!==e}},emitNewAttachment:function(t){this.$emit("input",this.value.concat([t]))},onLocalAttachmentSelected:function(t){var e=this;this.uploading=!0,b.default.set(this,"uploads",{});var a=ge()((function(t){return b.default.set(e.uploads,t.name,{total:t.size,uploaded:0}),function(t,e){var a=Object(N.generateUrl)("/apps/mail/api/attachments"),n=new FormData,r={onUploadProgress:function(t){return e(t,t.loaded,t.total)}};return n.append("attachment",t),O.a.post(a,n,r).then((function(t){return t.data})).then((function(e){var a=e.id;return{file:t,id:a}}))}(t,(a=t.name,function(t,n){e.uploads[a].uploaded=n})).then((function(t){var a=t.file,n=t.id;return q.a.info("uploaded"),e.emitNewAttachment(e.fileNameToAttachment(a.name,n))}));var a}))(t.target.files),n=Promise.all(a).catch((function(t){return q.a.error("could not upload all attachments",{error:t})})).then((function(){return e.uploading=!1}));return this.$emit("upload",n),n},onAddCloudAttachment:function(){var t=this;return Object(Gt.getFilePickerBuilder)(Object(ut.translate)("mail","Choose a file to add as attachment")).build().pick(Object(ut.translate)("mail","Choose a file to add as attachment")).then((function(e){return t.emitNewAttachment(t.fileNameToAttachment(e))})).catch((function(t){return q.a.error("could not choose a file as attachment",{error:t})}))},onDelete:function(t){this.$emit("input",this.value.filter((function(e){return e!==t})))}}},xe=(n(1340),Object(u.a)(_e,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new-message-attachments"},[a("ul",[t._l(t.value,(function(e){return a("li",{key:e.id},[a("div",{staticClass:"new-message-attachment-name"},[t._v("\n\t\t\t\t"+t._s(e.displayName)+"\n\t\t\t")]),t._v(" "),a("div",{staticClass:"new-message-attachments-action svg icon-delete",on:{click:function(a){return t.onDelete(e)}}})])})),t._v(" "),t.uploading?a("li",{staticClass:"attachments-upload-progress"},[a("div",{class:{"icon-loading-small":t.uploading}}),t._v(" "),a("div",[t._v(t._s(t.uploading?t.t("mail","Uploading {percent}% …",{percent:t.uploadProgress}):""))])]):t._e()],2),t._v(" "),a("input",{ref:"localAttachments",staticStyle:{display:"none"},attrs:{type:"file",multiple:""},on:{change:t.onLocalAttachmentSelected}})])}),[],!1,null,"84fc7730",null).exports),je=n(786),we=n(823),Ae=ue()((function(t){var e=Object(N.generateUrl)("/apps/mail/api/autoComplete?term={term}",{term:t});return O.a.get(e).then((function(t){return t.data}))}),500);b.default.use(le.a);var Ce=Object.seal({EDITING:0,UPLOADING:1,SENDING:2,ERROR:3,FINISHED:4}),Ie={name:"Composer",components:{Actions:j.a,ActionButton:A.a,ActionCheckbox:me.a,ComposerAttachments:xe,Loading:H,Multiselect:fe.a,TextEditor:we.a},props:{fromAccount:{type:Number,default:function(){}},to:{type:Array,default:function(){return[]}},cc:{type:Array,default:function(){return[]}},bcc:{type:Array,default:function(){return[]}},subject:{type:String,default:""},body:{type:String,default:""},draft:{type:Function,required:!0},send:{type:Function,required:!0},isPlainText:{type:Boolean,default:!0}},data:function(){return{showCC:this.cc.length>0,selectedAlias:-1,autocompleteRecipients:this.to.concat(this.cc).concat(this.bcc),newRecipients:[],subjectVal:this.subject,bodyVal:this.isPlainText?Object(je.b)(this.body):this.body,attachments:[],noReply:this.to.some((function(t){return t.email.startsWith("noreply@")||t.email.startsWith("no-reply@")})),submitButtonTitle:Object(ut.translate)("mail","Send"),draftsPromise:Promise.resolve(),attachmentsPromise:Promise.resolve(),savingDraft:void 0,saveDraftDebounced:oe()(700)(this.saveDraft),state:Ce.EDITING,errorText:void 0,STATES:Ce,selectTo:this.to,selectCc:this.cc,selectBcc:this.bcc,editorPlainText:this.isPlainText,bus:new b.default}},computed:{aliases:function(){return this.$store.getters.accounts.filter((function(t){return!t.isUnified}))},selectableRecipients:function(){return this.newRecipients.concat(this.autocompleteRecipients)},isReply:function(){return this.to.length>0},noSubject:function(){return""===this.subjectVal&&""!==this.bodyVal},canSend:function(){return this.selectTo.length>0||this.selectCc.length>0||this.selectBcc.length>0}},watch:{selectedAlias:function(t){t&&(this.editorPlainText="plaintext"===t.editorMode)}},beforeMount:function(){var t=this;this.fromAccount?this.selectedAlias=this.aliases.find((function(e){return e.id===t.fromAccount})):this.selectedAlias=this.aliases[0],this.bodyVal=this.bodyWithSignature(this.selectedAlias,this.bodyVal)},mounted:function(){this.$refs.toLabel.$el.focus()},methods:{recipientToRfc822:function(t){return t.email===t.label?t.email:""===t.label?t.email:0===t.email.search(/^[a-zA-Z]+:/)?t.email:'"'.concat(t.label,'" <').concat(t.email,">")},getMessageData:function(){var t=this;return function(e){return{account:t.selectedAlias.id,to:t.selectTo.map(t.recipientToRfc822).join(", "),cc:t.selectCc.map(t.recipientToRfc822).join(", "),bcc:t.selectBcc.map(t.recipientToRfc822).join(", "),draftUID:e,subject:t.subjectVal,body:t.editorPlainText?Object(je.a)(t.bodyVal):t.bodyVal,attachments:t.attachments,folderId:t.replyTo?t.replyTo.folderId:void 0,messageId:t.replyTo?t.replyTo.messageId:void 0,isHtml:!t.editorPlainText}}},saveDraft:function(t){var e=this;this.savingDraft=!0,this.draftsPromise=this.draftsPromise.then((function(a){return e.draft(t(a))})).catch(q.a.error.bind(q.a)).then((function(t){return e.savingDraft=!1,t}))},onInputChanged:function(){this.saveDraftDebounced(this.getMessageData())},onAddLocalAttachment:function(){this.bus.$emit("onAddLocalAttachment")},onAddCloudAttachment:function(){this.bus.$emit("onAddCloudAttachment")},onAutocomplete:function(t){var e=this;void 0!==t&&""!==t&&Ae(t).then((function(t){e.autocompleteRecipients=se()("email")(e.autocompleteRecipients.concat(t))}))},onAttachmentsUploading:function(t){this.attachmentsPromise=this.attachmentsPromise.then((function(){return t})).catch((function(t){return q.a.error("could not upload attachments",{error:t})})).then((function(){return q.a.debug("attachments uploaded")}))},onBodyKeyPress:function(t){if(13===t.keyCode&&t.ctrlKey)return this.onSend()},onNewToAddr:function(t){this.onNewAddr(t,this.selectTo)},onNewCcAddr:function(t){this.onNewAddr(t,this.selectCc)},onNewBccAddr:function(t){this.onNewAddr(t,this.selectBcc)},onNewAddr:function(t,e){var a={label:t,email:t};this.newRecipients.push(a),e.push(a)},onSend:function(){var t=this;return this.state=Ce.UPLOADING,this.attachmentsPromise.then((function(){return t.state=Ce.SENDING})).then((function(){return t.draftsPromise})).then(this.getMessageData()).then((function(e){return t.send(e)})).then((function(){return q.a.info("message sent")})).then((function(){return t.state=Ce.FINISHED})).catch((function(e){q.a.error("could not send message",{error:e}),e&&e.toString&&(t.errorText=e.toString()),t.state=Ce.ERROR}))},reset:function(){this.selectTo=[],this.selectCc=[],this.selectBcc=[],this.subjectVal="",this.bodyVal="",this.attachments=[],this.errorText=void 0,this.state=Ce.EDITING},formatAliases:function(t){return t.name?"".concat(t.name," <").concat(t.emailAddress,">"):t.emailAddress},bodyWithSignature:function(t,e){return t&&t.signature?"".concat(e," <br>--<br> ").concat(Object(je.b)(t.signature)):e}}},ke=(n(1342),n(1344),Object(u.a)(Ie,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.state===t.STATES.EDITING?a("div",{staticClass:"message-composer"},[a("div",{staticClass:"composer-fields mail-account"},[a("label",{staticClass:"from-label",attrs:{for:"from"}},[t._v("\n\t\t\t"+t._s(t.t("mail","From"))+"\n\t\t")]),t._v(" "),a("Multiselect",{attrs:{id:"from",options:t.aliases,label:"name","track-by":"id",searchable:!1,"hide-selected":!0,"custom-label":t.formatAliases,placeholder:t.t("mail","Select account"),"clear-on-select":!1},on:{keyup:t.onInputChanged},model:{value:t.selectedAlias,callback:function(e){t.selectedAlias=e},expression:"selectedAlias"}})],1),t._v(" "),a("div",{staticClass:"composer-fields"},[a("label",{staticClass:"to-label",attrs:{for:"to"}},[t._v("\n\t\t\t"+t._s(t.t("mail","To"))+"\n\t\t")]),t._v(" "),a("Multiselect",{ref:"toLabel",attrs:{id:"to",options:t.selectableRecipients,taggable:!0,label:"label","track-by":"email",multiple:!0,placeholder:t.t("mail","Contact or email address …"),"clear-on-select":!1,"show-no-options":!1,"preserve-search":!0},on:{keyup:t.onInputChanged,tag:t.onNewToAddr,"search-change":t.onAutocomplete},model:{value:t.selectTo,callback:function(e){t.selectTo=e},expression:"selectTo"}}),t._v(" "),t.showCC?t._e():a("a",{staticClass:"copy-toggle",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showCC=!0}}},[t._v("\n\t\t\t"+t._s(t.t("mail","+ CC/BCC"))+"\n\t\t")])],1),t._v(" "),t.showCC?a("div",{staticClass:"composer-fields"},[a("label",{staticClass:"cc-label",attrs:{for:"cc"}},[t._v("\n\t\t\t"+t._s(t.t("mail","CC"))+"\n\t\t")]),t._v(" "),a("Multiselect",{attrs:{id:"cc",options:t.selectableRecipients,taggable:!0,label:"label","track-by":"email",multiple:!0,placeholder:t.t("mail",""),"clear-on-select":!1,"show-no-options":!1,"preserve-search":!0},on:{keyup:t.onInputChanged,tag:t.onNewCcAddr,"search-change":t.onAutocomplete},model:{value:t.selectCc,callback:function(e){t.selectCc=e},expression:"selectCc"}},[a("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[t._v(t._s(t.t("mail","No contacts found.")))])])],1):t._e(),t._v(" "),t.showCC?a("div",{staticClass:"composer-fields"},[a("label",{staticClass:"bcc-label",attrs:{for:"bcc"}},[t._v("\n\t\t\t"+t._s(t.t("mail","BCC"))+"\n\t\t")]),t._v(" "),a("Multiselect",{attrs:{id:"bcc",options:t.selectableRecipients,taggable:!0,label:"label","track-by":"email",multiple:!0,placeholder:t.t("mail",""),"show-no-options":!1,"preserve-search":!0},on:{keyup:t.onInputChanged,tag:t.onNewBccAddr,"search-change":t.onAutocomplete},model:{value:t.selectBcc,callback:function(e){t.selectBcc=e},expression:"selectBcc"}},[a("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[t._v(t._s(t.t("mail","No contacts found.")))])])],1):t._e(),t._v(" "),a("div",{staticClass:"composer-fields"},[a("label",{staticClass:"subject-label hidden-visually",attrs:{for:"subject"}},[t._v("\n\t\t\t"+t._s(t.t("mail","Subject"))+"\n\t\t")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.subjectVal,expression:"subjectVal"}],staticClass:"subject",attrs:{id:"subject",type:"text",name:"subject",autocomplete:"off",placeholder:t.t("mail","Subject …")},domProps:{value:t.subjectVal},on:{keyup:t.onInputChanged,input:function(e){e.target.composing||(t.subjectVal=e.target.value)}}})]),t._v(" "),t.noReply?a("div",{staticClass:"warning noreply-box"},[t._v("\n\t\t"+t._s(t.t("mail","This message came from a noreply address so your reply will probably not be read."))+"\n\t")]):t._e(),t._v(" "),a("div",{staticClass:"composer-fields"},[t.editorPlainText?a("TextEditor",{key:"editor-plain",staticClass:"message-body",attrs:{name:"body",placeholder:t.t("mail","Write message …"),focus:t.isReply},on:{input:t.onInputChanged},model:{value:t.bodyVal,callback:function(e){t.bodyVal=e},expression:"bodyVal"}}):a("TextEditor",{key:"editor-rich",staticClass:"message-body",attrs:{html:!0,name:"body",placeholder:t.t("mail","Write message …"),focus:t.isReply},on:{input:t.onInputChanged},model:{value:t.bodyVal,callback:function(e){t.bodyVal=e},expression:"bodyVal"}})],1),t._v(" "),a("div",{staticClass:"composer-actions"},[a("ComposerAttachments",{attrs:{bus:t.bus},on:{upload:t.onAttachmentsUploading},model:{value:t.attachments,callback:function(e){t.attachments=e},expression:"attachments"}}),t._v(" "),a("div",{staticClass:"composer-actions-right"},[a("p",{staticClass:"composer-actions-draft"},[!0===t.savingDraft?a("span",{attrs:{id:"draft-status"}},[t._v(t._s(t.t("mail","Saving draft …")))]):!1===t.savingDraft?a("span",{attrs:{id:"draft-status"}},[t._v(t._s(t.t("mail","Draft saved")))]):t._e()]),t._v(" "),a("Actions",[a("ActionButton",{attrs:{icon:"icon-upload"},on:{click:t.onAddLocalAttachment}},[t._v(t._s(t.t("mail","Upload attachment")))]),t._v(" "),a("ActionButton",{attrs:{icon:"icon-folder"},on:{click:t.onAddCloudAttachment}},[t._v(t._s(t.t("mail","Add attachment from Files")))]),t._v(" "),a("ActionCheckbox",{attrs:{checked:!t.editorPlainText,text:t.t("mail","Enable formatting")},on:{check:function(e){t.editorPlainText=!1},uncheck:function(e){t.editorPlainText=!0}}},[t._v(t._s(t.t("mail","Enable formatting")))])],1),t._v(" "),a("div",[a("input",{staticClass:"submit-message send primary icon-confirm-white",attrs:{type:"submit",disabled:!t.canSend},domProps:{value:t.submitButtonTitle},on:{click:t.onSend}})])],1)],1)]):t.state===t.STATES.UPLOADING?a("Loading",{attrs:{hint:t.t("mail","Uploading attachments …")}}):t.state===t.STATES.SENDING?a("Loading",{attrs:{hint:t.t("mail","Sending …")}}):t.state===t.STATES.ERROR?a("div",{staticClass:"emptycontent"},[a("h2",[t._v(t._s(t.t("mail","Error sending your message")))]),t._v(" "),t.errorText?a("p",[t._v(t._s(t.errorText))]):t._e(),t._v(" "),a("button",{staticClass:"button",on:{click:function(e){t.state=t.STATES.EDITING}}},[t._v(t._s(t.t("mail","Go back")))]),t._v(" "),a("button",{staticClass:"button primary",on:{click:t.onSend}},[t._v(t._s(t.t("mail","Retry")))])]):a("div",{staticClass:"emptycontent"},[t.isReply?a("h2",[t._v(t._s(t.t("mail","Reply sent!")))]):a("h2",[t._v(t._s(t.t("mail","Message sent!")))]),t._v(" "),t.isReply?t._e():a("button",{staticClass:"button primary",on:{click:t.reset}},[t._v("\n\t\t"+t._s(t.t("mail","Write another message"))+"\n\t")])])}),[],!1,null,"5d616abc",null).exports),Te=n(52),Se={name:"NewMessageDetail",components:{AppContentDetails:Q.a,Composer:ke,Error:dt,Loading:H},data:function(){return{loading:!1,draft:void 0,original:void 0,originalBody:void 0,errorMessage:"",error:void 0}},computed:{composerData:function(){if(void 0!==this.draft)return q.a.info("todo: handle draft data",{draft:this.draft}),{to:this.draft.to,cc:this.draft.cc,bcc:this.draft.bcc,subject:this.draft.subject,body:this.draft.body,isPlainText:!this.draft.hasHtmlBody};if(void 0!==this.$route.query.uid){var t=this.original;q.a.debug("forwarding or replying to message",{message:t});var e="",a={};if("reply"===this.$route.params.messageUid)q.a.debug("simple reply"),e=nt(t.subject),a.to=t.from;else if("replyAll"===this.$route.params.messageUid){q.a.debug("replying to all"),q.a.debug("replying to all: original",{original:this.original}),e=nt(t.subject);var n=this.$store.getters.getAccount(t.accountId);a=et(t,{email:n.emailAddress,label:n.name})}else o=t.subject,e=rt.some((function(t){return o.toLowerCase().startsWith("".concat(t,":"))}))?o:"FWD: ".concat(o);return{accountId:t.accountId,to:a.to,cc:a.cc,subject:e,body:this.getForwardReplyBody()}}var r,o;return 0!==this.$route.params.accountId&&"0"!==this.$route.params.accountId&&(r=parseInt(this.$route.params.accountId,10)),{accountId:r,to:this.stringToRecipients(this.$route.query.to),cc:this.stringToRecipients(this.$route.query.cc),subject:this.$route.query.subject||"",body:this.$route.query.body||""}}},watch:{$route:function(t,e){this.draft&&"message"===t.name&&t.params.draftUid===this.draft.uid?q.a.debug("detected navigation to current (new) draft UID, not reloading"):this.fetchMessage()}},created:function(){this.fetchMessage()},methods:{stringToRecipients:function(t){return void 0===t?[]:[{label:t,email:t}]},fetchMessage:function(){return void 0!==this.$route.params.draftUid?this.fetchDraftMessage(this.$route.params.draftUid):void 0!==this.$route.query.uid?this.fetchOriginalMessage(this.$route.query.uid):void 0},fetchDraftMessage:function(e){var a=this;this.loading=!0,this.draft=void 0,this.error=void 0,this.errorMessage="",this.$store.dispatch("fetchMessage",e).then((function(t){if(t.uid===a.$route.params.draftUid){if(a.draft=t,void 0===a.draft)return q.a.info("draft could not be found",{draftUid:e}),a.errorMessage=ht(),void(a.loading=!1);a.loading=!1}else q.a.debug("User navigated away, loaded draft won't be shown")})).catch((function(n){q.a.error("could not load draft "+e,{error:n}),n.isError&&(a.errorMessage=t("mail","Could not load your draft"),a.error=n,a.loading=!1)}))},fetchOriginalMessage:function(e){var a=this;this.loading=!0,this.error=void 0,this.errorMessage="",this.$store.dispatch("fetchMessage",e).then((function(t){if(t.uid===a.$route.query.uid)return q.a.debug("original message fetched",{message:t}),a.original=t,t.hasHtmlBody?(q.a.debug("original message has HTML body"),O.a.get(Object(N.generateUrl)("/apps/mail/api/accounts/{accountId}/folders/{folderId}/messages/{id}/html",{accountId:t.accountId,folderId:t.folderId,id:t.id})).then((function(t){return t.data}))):t.body;q.a.debug("User navigated away, loaded original message won't be used")})).then((function(t){a.originalBody=t,a.loading=!1})).catch((function(n){q.a.error("could not load original message "+e,{error:n}),n.isError&&(a.errorMessage=t("mail","Could not load original message"),a.error=n,a.loading=!1)}))},getForwardReplyBody:function(){return this.original.hasHtmlBody?function(t,e,a){var n="<blockquote>".concat(t,"</blockquote>");if(e){var r=I.a.unix(a).format("LLL");return"".concat("<p></p><p></p>",'"').concat(e.label,'" ').concat(e.email," – ").concat(r,"<br>").concat(n)}return"".concat("<p></p><p></p>").concat(n)}(this.originalBody,this.original.from[0],this.original.dateInt):function(t,e,a){var n="<br>&gt; "+t.replace(/\n/g,"<br>&gt; ");if(e){var r=I.a.unix(a).format("LLL");return"".concat("<p></p><p></p>",'"').concat(e.label,'" ').concat(e.email," – ").concat(r)+n}return"".concat("<p></p><p></p>").concat(n)}(this.originalBody,this.original.from[0],this.original.dateInt)},saveDraft:function(t){var e=this;return void 0===t.draftUID&&this.draft&&(q.a.debug("draft data does not have a draftUID, adding one"),t.draftUID=this.draft.id),Object(Te.d)(t.account,t).then((function(a){var n=a.uid;if(void 0===e.draft)return n;q.a.info("replacing draft "+e.draft.uid+" with "+n);var r={draft:e.draft,uid:n,data:t};return e.$store.dispatch("replaceDraft",r).then((function(){return e.$router.replace({name:"message",params:{accountId:e.$route.params.accountId,folderId:e.$route.params.folderId,messageUid:"new",draftUid:e.draft.uid}})})).then((function(){return n}))}))},sendMessage:function(t){return Object(Te.e)(t.account,t)}}},$e=Object(u.a)(Se,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("AppContentDetails",[t.loading?a("Loading"):t.error?a("Error",{attrs:{error:t.error&&t.error.message?t.error.message:t.t("mail","Not found"),message:t.errorMessage,data:t.error}}):a("Composer",{attrs:{"from-account":t.composerData.accountId,to:t.composerData.to,cc:t.composerData.cc,bcc:t.composerData.bcc,subject:t.composerData.subject,body:t.composerData.body,draft:t.saveDraft,send:t.sendMessage,"is-plain-text":t.composerData.isPlainText}})],1)}),[],!1,null,null,null).exports,De={name:"NoMessageSelected",components:{AppContentDetails:Q.a}},Me=(n(1346),Object(u.a)(De,(function(){var t=this.$createElement,e=this._self._c||t;return e("AppContentDetails",[e("div",{staticClass:"icon icon-mail"}),this._v(" "),e("h2",[this._v(this._s(this.t("mail","No message selected")))]),this._v(" "),e("p")])}),[],!1,null,"ef526768",null).exports),Ee={name:"FolderContent",components:{AppContent:s.a,AppDetailsToggle:p,EnvelopeList:V,Loading:H,Message:ne,NewMessageDetail:$e,NoMessageSelected:Me},mixins:[l.a],props:{account:{type:Object,required:!0},folder:{type:Object,required:!0}},data:function(){return{loading:!0,searchQuery:void 0,alive:!1}},computed:{hasMessages:function(){var t=this;return this.folder.envelopes.map((function(e){return t.$store.state.envelopes[e]}))},showMessage:function(){return this.hasMessages&&"message"===this.$route.name},newMessage:function(){return"new"===this.$route.params.messageUid||"reply"===this.$route.params.messageUid||"replyAll"===this.$route.params.messageUid},envelopes:function(){return void 0===this.searchQuery?this.$store.getters.getEnvelopes(this.account.id,this.folder.id):this.$store.getters.getSearchEnvelopes(this.account.id,this.folder.id)}},watch:{$route:function(t,e){"folder"===t.name&&this.fetchData()}},created:function(){this.alive=!0,new OCA.Search(this.searchProxy,this.clearSearchProxy),this.fetchData()},beforeDestroy:function(){this.alive=!1},methods:{fetchData:function(){var t=this;this.loading=!0,this.$store.dispatch("fetchEnvelopes",{accountId:this.account.id,folderId:this.folder.id,query:this.searchQuery}).then((function(){var e=t.envelopes;if(q.a.debug("envelopes fetched",e),t.loading=!1,!t.isMobile&&"message"!==t.$route.name&&e.length>0){var a=e[0];t.$router.replace({name:"message",params:{accountId:t.account.id,folderId:t.folder.id,messageUid:a.uid}})}}))},hideMessage:function(){this.$router.replace({name:"folder",params:{accountId:this.account.id,folderId:this.folder.id}})},searchProxy:function(t){this.alive&&this.search(t)},clearSearchProxy:function(){this.alive&&this.clearSearch()},search:function(t){this.searchQuery=t,this.fetchData()},clearSearch:function(){this.searchQuery=void 0}}},Oe=Object(u.a)(Ee,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("AppContent",[t.showMessage?a("AppDetailsToggle",{on:{close:t.hideMessage}}):t._e(),t._v(" "),a("div",{attrs:{id:"app-content-wrapper"}},[t.loading?a("Loading",{attrs:{hint:t.t("mail","Loading messages")}}):[a("EnvelopeList",{attrs:{account:t.account,folder:t.folder,envelopes:t.envelopes,"search-query":t.searchQuery,show:!t.showMessage}}),t._v(" "),t.newMessage?a("NewMessageDetail"):t.showMessage?a("Message"):t.hasMessages&&!t.isMobile?a("NoMessageSelected"):t._e()]],2)],1)}),[],!1,null,null,null).exports,Ne=n(665),Fe={name:"Home",components:{Content:o.a,FolderContent:Oe,Navigation:Ne.a},computed:{activeAccount:function(){return this.$store.getters.getAccount(this.$route.params.accountId)},activeFolder:function(){return this.$store.getters.getFolder(this.$route.params.accountId,this.$route.params.folderId)},menu:function(){return this.buildMenu()}},created:function(){var t=this.$store.getters.accounts;if("home"===this.$route.name&&t.length>1){var e=t[0],a=this.$store.getters.getFolders(e.id)[0];console.debug("loading first folder of first account",e.id,a.id),this.$router.replace({name:"folder",params:{accountId:e.id,folderId:a.id}})}else if("home"===this.$route.name&&1===t.length)q.a.debug("the only account we have is the unified one -> show the setup page"),this.$router.replace({name:"setup"});else if("mailto"===this.$route.name){if(0===t.length)return void console.error("cannot handle mailto:, no accounts configured");var n=t[0],r=this.$store.getters.getFolders(n.id)[0];console.debug("loading composer with first account and folder",n.id,r.id),this.$router.replace({name:"message",params:{accountId:n.id,folderId:r.id,messageUid:"new"},query:{to:this.$route.query.to,cc:this.$route.query.cc,bcc:this.$route.query.bcc,subject:this.$route.query.subject,body:this.$route.query.body}})}},methods:{onNewMessage:function(){this.$router.push({name:"message",params:{accountId:this.$route.params.accountId,folderId:this.$route.params.folderId,messageUid:"new"}})}}},Pe=(n(1348),Object(u.a)(Fe,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Content",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["c"],expression:"['c']",modifiers:{once:!0}}],attrs:{"app-name":"mail"},nativeOn:{shortkey:function(e){return t.onNewMessage(e)}}},[a("Navigation"),t._v(" "),t.activeAccount?a("FolderContent",{attrs:{account:t.activeAccount,folder:t.activeFolder}}):t._e()],1)}),[],!1,null,"1fd66e6e",null));a.default=Pe.exports},620:function(t,e,a){var n=a(761);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("f5677480",n,!0,{})},621:function(t,e,a){var n=a(763);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("7cf5a1ef",n,!0,{})},626:function(t,e,a){var n=a(785);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("65d6dcfb",n,!0,{})},665:function(e,a,r){"use strict";var o=r(828),i=r.n(o),s=r(829),c=r.n(s),l=r(830),d=r.n(l),u=r(831),p=r.n(u),m=r(629),h=r.n(m),f=r(839),v=r.n(f),g=r(841),b=r.n(g),y=r(610),_=r.n(y),x=r(667),j=r.n(x),w=r(1),A=r(668),C=r(18),I={name:"NavigationAccount",components:{AppNavigationItem:h.a,AppNavigationIconBullet:v.a,ActionRouter:b.a,ActionButton:_.a,ActionInput:j.a},props:{account:{type:Object,required:!0},isFirst:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1}},data:function(){return{menuOpen:!1}},computed:{visible:function(){return!0!==this.account.isUnified&&!1!==this.account.visible},settingsRoute:function(){return{name:"accountSettings",params:{accountId:this.account.id}}},id:function(){return"account-"+this.account.id},bulletColor:function(){return this.account.error?void 0:Object(A.a)(this.account.emailAddress)},iconError:function(){return this.account.error?"icon-error":void 0}},methods:{createFolder:function(t){var e=t.target.elements[1].value;C.a.info("creating folder "+e),this.menuOpen=!1,this.$store.dispatch("createFolder",{account:this.account,name:e}).then((function(){return C.a.info("folder ".concat(e," created"))})).catch((function(t){throw C.a.error("could not create folder",{error:t}),t}))},deleteAccount:function(){var t=this.account.id;this.$store.dispatch("deleteAccount",this.account).then((function(){C.a.info("account ".concat(t," deleted, redirecting …")),location.href=Object(w.generateUrl)("/apps/mail")})).catch((function(t){return C.a.error("could not delete account",{error:t})}))},changeAccountOrderUp:function(){this.$store.dispatch("moveAccount",{account:this.account,up:!0}).catch((function(t){return C.a.error("could not move account up",{error:t})}))},changeAccountOrderDown:function(){this.$store.dispatch("moveAccount",{account:this.account}).catch((function(t){return C.a.error("could not move account down",{error:t})}))}}},k=r(35),T=Object(k.a)(I,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.visible?a("AppNavigationItem",{key:t.id,attrs:{id:t.id,icon:t.iconError,"menu-open":t.menuOpen,title:t.account.emailAddress,to:t.settingsRoute},on:{"update:menuOpen":function(e){t.menuOpen=e},"update:menu-open":function(e){t.menuOpen=e}},scopedSlots:t._u([{key:"actions",fn:function(){return[a("ActionRouter",{attrs:{to:t.settingsRoute,icon:"icon-settings"}},[t._v("\n\t\t\t"+t._s(t.t("mail","Edit account"))+"\n\t\t")]),t._v(" "),a("ActionInput",{attrs:{icon:"icon-add"},on:{submit:t.createFolder}},[t._v("\n\t\t\t"+t._s(t.t("mail","Add folder"))+"\n\t\t")]),t._v(" "),t.isFirst?t._e():a("ActionButton",{attrs:{icon:"icon-triangle-n"},on:{click:t.changeAccountOrderUp}},[t._v("\n\t\t\t"+t._s(t.t("mail","Move Up"))+"\n\t\t")]),t._v(" "),t.isLast?t._e():a("ActionButton",{attrs:{icon:"icon-triangle-s"},on:{click:t.changeAccountOrderDown}},[t._v("\n\t\t\t"+t._s(t.t("mail","Move down"))+"\n\t\t")]),t._v(" "),t.account.provisioned?t._e():a("ActionButton",{attrs:{icon:"icon-delete"},on:{click:t.deleteAccount}},[t._v("\n\t\t\t"+t._s(t.t("mail","Delete account"))+"\n\t\t")])]},proxy:!0}],null,!1,1751902140)},[t.bulletColor?a("AppNavigationIconBullet",{attrs:{slot:"icon",color:t.bulletColor},slot:"icon"}):t._e()],1):t._e()}),[],!1,null,null,null).exports,S={name:"NavigationAccount",components:{AppNavigationItem:h.a},props:{account:{type:Object,required:!0}},computed:{id:function(){return"collapse-"+this.account.id},title:function(){return this.account.collapsed?t("mail","Show all folders"):t("mail","Collapse folders")}},methods:{toggleCollapse:function(){this.$store.commit("toggleAccountCollapsed",this.account.id)}}},$=(r(760),Object(k.a)(S,(function(){var t=this.$createElement;return(this._self._c||t)("AppNavigationItem",{attrs:{title:this.title},on:{click:this.toggleCollapse}})}),[],!1,null,"7015b306",null).exports),D=r(845),M=r.n(D),E=r(846),O=r.n(E),N=r(184),F=r(23),P=function(t){if(t.specialUse.length>0)try{return function(t){if(t.specialUse.includes("all"))return Object(F.translate)("mail","All");if(t.specialUse.includes("archive"))return Object(F.translate)("mail","Archive");if(t.specialUse.includes("drafts"))return Object(F.translate)("mail","Drafts");if(t.specialUse.includes("flagged"))return Object(F.translate)("mail","Favorites");if(t.specialUse.includes("inbox"))return!0===t.isUnified?Object(F.translate)("mail","All inboxes"):Object(F.translate)("mail","Inbox");if(t.specialUse.includes("junk"))return Object(F.translate)("mail","Junk");if(t.specialUse.includes("sent"))return Object(F.translate)("mail","Sent");if(t.specialUse.includes("trash"))return Object(F.translate)("mail","Trash");throw new Error("unknown special use ".concat(t.specialUse))}(t)}catch(t){console.error("could not translate special folder",t)}return t.displayName};function R(t,e,a,n,r,o,i){try{var s=t[o](i),c=s.value}catch(t){return void a(t)}s.done?e(c):Promise.resolve(c).then(n,r)}var U,L,B={name:"NavigationFolder",components:{AppNavigationItem:h.a,AppNavigationCounter:M.a,ActionText:O.a,ActionButton:_.a,ActionInput:j.a},props:{account:{type:Object,required:!0},folder:{type:Object,required:!0},top:{type:Boolean,default:!0}},data:function(){return{folderStats:void 0,loadingMarkAsRead:!1}},computed:{title:function(){return P(this.folder)},folderId:function(){return atob(this.folder.id)},icon:function(){return this.folder.specialRole?"icon-"+this.folder.specialRole:"icon-folder"},to:function(){return{name:"folder",params:{accountId:this.account.id,folderId:this.folder.id}}},subFolders:function(){return this.$store.getters.getSubfolders(this.account.id,this.folder.id)},statsText:function(){return this.folderStats&&"total"in this.folderStats&&"unread"in this.folderStats?0===this.folderStats.unread?n("mail","{total} message","{total} messages",{total:this.folderStats.total}):n("mail","{unread} unread of {total}","{unread} unread of {total}",{total:this.folderStats.total,unread:this.folderStats.unread}):t("mail","Loading …")}},methods:{genId:function(t){return"account-"+this.account.id+"_"+t.id},onMenuToggle:function(t){t&&this.fetchFolderStats()},fetchFolderStats:(U=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.folderStats=null,t.prev=1,t.next=4,Object(N.c)(this.account.id,this.folder.id);case 4:e=t.sent,C.a.debug("loaded folder stats",{stats:e}),this.folderStats=e,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),this.folderStats={error:!0},C.a.error("could not load folder stats for ".concat(this.folder.id),t.t0);case 13:case"end":return t.stop()}}),t,this,[[1,9]])})),L=function(){var t=this,e=arguments;return new Promise((function(a,n){var r=U.apply(t,e);function o(t){R(r,a,n,o,i,"next",t)}function i(t){R(r,a,n,o,i,"throw",t)}o(void 0)}))},function(){return L.apply(this,arguments)}),createFolder:function(t){var e=t.target.elements[1].value,a=atob(this.folder.id)+this.folder.delimiter+e;C.a.info("creating folder ".concat(a," as subfolder of ").concat(this.folder.id)),this.menuOpen=!1,this.$store.dispatch("createFolder",{account:this.account,name:a}).then((function(){return C.a.info("folder ".concat(a," created"))})).catch((function(t){throw C.a.error("could not create folder ".concat(a),{error:t}),t}))},markAsRead:function(){var t=this;this.loadingMarkAsRead=!0,this.$store.dispatch("markFolderRead",{account:this.account,folderId:this.folder.id}).then((function(){return C.a.info("folder ".concat(t.folder.id," marked as read"))})).catch((function(e){return C.a.error("could not mark folder ".concat(t.folder.id," as read"),{error:e})})).then((function(){return t.loadingMarkAsRead=!1}))}}},q=Object(k.a)(B,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("AppNavigationItem",{key:t.genId(t.folder),attrs:{id:t.genId(t.folder),"allow-collapse":!0,icon:t.icon,title:t.title,to:t.to},on:{"update:menuOpen":t.onMenuToggle}},[a("template",{slot:"actions"},[t.top?[t.account.isUnified?t._e():a("ActionText",{attrs:{icon:"icon-info",title:t.folderId}},[t._v("\n\t\t\t\t"+t._s(t.statsText)+"\n\t\t\t")]),t._v(" "),t.account.isUnified?t._e():a("ActionButton",{attrs:{icon:"icon-checkmark",title:t.t("mail","Mark all as read"),disabled:t.loadingMarkAsRead},on:{click:t.markAsRead}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Mark all messages of this folder as read"))+"\n\t\t\t")]),t._v(" "),t.account.isUnified?t._e():a("ActionInput",{attrs:{icon:"icon-add"},on:{submit:t.createFolder}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Add subfolder"))+"\n\t\t\t")])]:t._e()],2),t._v(" "),t.folder.unread?a("AppNavigationCounter",{attrs:{slot:"counter"},slot:"counter"},[t._v("\n\t\t"+t._s(t.folder.unread)+"\n\t")]):t._e(),t._v(" "),t._l(t.subFolders,(function(e){return a("NavigationFolder",{key:t.genId(e),attrs:{account:t.account,folder:e,top:!1}})}))],2)}),[],!1,null,null,null).exports,z={name:"AppSettingsMenu",data:function(){return{loadingAvatarSettings:!1}},computed:{useExternalAvatars:function(){return"true"===this.$store.getters.getPreference("external-avatars","true")}},methods:{onToggleExternalAvatars:function(t){var e=this;this.loadingAvatarSettings=!0,this.$store.dispatch("savePreference",{key:"external-avatars",value:t.target.checked?"true":"false"}).catch((function(t){return C.a.error("could not save preferences",{error:t})})).then((function(){e.loadingAvatarSettings=!1}))},registerProtocolHandler:function(){if(window.navigator.registerProtocolHandler){var t=window.location.protocol+"//"+window.location.host+Object(w.generateUrl)("apps/mail/compose?uri=%s");try{window.navigator.registerProtocolHandler("mailto",t,OC.theme.name+" Mail")}catch(t){C.a.error("could not register protocol handler",{err:t})}}}}},V=(r(762),Object(k.a)(z,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("router-link",{staticClass:"icon-add-white app-settings-button button primary new-button",attrs:{to:"/setup"}},[t._v("\n\t\t"+t._s(t.t("mail","Add mail account"))+"\n\t")]),t._v(" "),t.loadingAvatarSettings?a("p",{staticClass:"app-settings avatar-settings"},[a("span",{staticClass:"icon-loading-small"}),t._v("\n\t\t"+t._s(t.t("mail","Use Gravatar and favicon avatars"))+"\n\t")]):a("p",{staticClass:"app-settings"},[a("input",{staticClass:"checkbox",attrs:{id:"gravatar-enabled",type:"checkbox"},domProps:{checked:t.useExternalAvatars},on:{change:t.onToggleExternalAvatars}}),t._v(" "),a("label",{attrs:{for:"gravatar-enabled"}},[t._v(t._s(t.t("mail","Use Gravatar and favicon avatars")))])]),t._v(" "),a("p",[a("button",{staticClass:"icon-mail app-settings-button",on:{click:t.registerProtocolHandler}},[t._v("\n\t\t\t"+t._s(t.t("mail","Register as application for mail links"))+"\n\t\t")])]),t._v(" "),a("p",{staticClass:"icon-details app-settings-button button"},[a("router-link",{attrs:{to:{name:"keyboardShortcuts"}}},[t._v("\n\t\t\t"+t._s(t.t("mail","Keyboard shortcuts"))+"\n\t\t")])],1),t._v(" "),a("p",{staticClass:"app-settings-hint app-settings-link"},[a("a",{attrs:{href:"https://www.mailvelope.com/",target:"_blank"}},[t._v(t._s(t.t("mail","Looking for a way to encrypt your emails? Install the Mailvelope browser extension!")))])])],1)}),[],!1,null,"14b23999",null).exports),W=Object.seal(["inbox","flagged","drafts","sent"]),H={name:"Navigation",components:{AppNavigation:i.a,AppNavigationNew:c.a,AppNavigationSettings:d.a,AppNavigationSpacer:p.a,AppSettingsMenu:V,NavigationAccount:T,NavigationAccountExpandCollapse:$,NavigationFolder:q},data:function(){return{SHOW_COLLAPSED:W}},computed:{menu:function(){var t=this;return this.$store.getters.accounts.map((function(e){var a=t.$store.getters.getFolders(e.id).filter((function(t){return!e.collapsed||-1!==W.indexOf(t.specialRole)}));return{id:e.id,account:e,folders:a}}))}},methods:{onNewMessage:function(){this.$router.push({name:"message",params:{accountId:this.$route.params.accountId,folderId:this.$route.params.folderId,messageUid:"new"}})},isFirst:function(t){return t===this.$store.getters.accounts[1]},isLast:function(t){var e=this.$store.getters.accounts;return t===e[e.length-1]}}},G=Object(k.a)(H,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("AppNavigation",[a("AppNavigationNew",{attrs:{text:t.t("mail","New message"),"button-id":"mail_new_message","button-class":"icon-add"},on:{click:t.onNewMessage}}),t._v(" "),a("ul",{attrs:{id:"accounts-list"}},[t._l(t.menu,(function(e){return[e.account?a("NavigationAccount",{key:e.account.id,attrs:{account:e.account,"is-first":t.isFirst(e.account),"is-last":t.isLast(e.account)}}):t._e(),t._v(" "),t._l(e.folders,(function(n){return a("NavigationFolder",{directives:[{name:"show",rawName:"v-show",value:!e.account.collapsed||-1!==t.SHOW_COLLAPSED.indexOf(n.specialRole),expression:"!group.account.collapsed || SHOW_COLLAPSED.indexOf(item.specialRole) !== -1"}],key:n.key,attrs:{account:e.account,folder:n}})})),t._v(" "),!e.account.isUnified&&e.account.folders.length>0?a("NavigationAccountExpandCollapse",{key:"collapse-"+e.account.id,attrs:{account:e.account}}):t._e(),t._v(" "),a("AppNavigationSpacer",{key:"spacer-"+e.account.id})]}))],2),t._v(" "),a("AppNavigationSettings",{attrs:{title:t.t("mail","Settings")}},[a("AppSettingsMenu")],1)],1)}),[],!1,null,"1c849ed8",null);a.a=G.exports},668:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var n=a(619),r=a.n(n),o=a(843),i=a.n(o),s=function(t){var e=r()(t),a=i.a.hex.hsl(e),n=[40*Math.round(a[0]/40),a[1],a[2]];return"#"+i.a.hsl.hex(n)}},760:function(t,e,a){"use strict";var n=a(620);a.n(n).a},761:function(t,e,a){(e=a(341)(!1)).push([t.i,"[data-v-7015b306] .app-navigation-entry__title{color:var(--color-text-maxcontrast)}\n",""]),t.exports=e},762:function(t,e,a){"use strict";var n=a(621);a.n(n).a},763:function(t,e,a){(e=a(341)(!1)).push([t.i,"\np.avatar-settings span.icon-loading-small[data-v-14b23999] {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tpadding: 5px 0;\n}\np.app-settings[data-v-14b23999] {\n\tpadding: 10px 0;\n}\n.app-settings-button[data-v-14b23999] {\n\tdisplay: block;\n\tpadding-left: 34px;\n\tbackground-position: 10px center;\n}\n.app-settings-link[data-v-14b23999] {\n\ttext-decoration: underline;\n}\n",""]),t.exports=e},783:function(t,e,a){var n={"./af":688,"./af.js":688,"./ar":689,"./ar.js":689,"./ast":690,"./ast.js":690,"./az":691,"./az.js":691,"./bg":692,"./bg.js":692,"./ca":693,"./ca.js":693,"./cs":694,"./cs.js":694,"./da":695,"./da.js":695,"./de":697,"./de-ch":696,"./de-ch.js":696,"./de.js":697,"./el":698,"./el.js":698,"./en-au":699,"./en-au.js":699,"./en-gb":700,"./en-gb.js":700,"./eo":701,"./eo.js":701,"./es":702,"./es.js":702,"./et":703,"./et.js":703,"./eu":704,"./eu.js":704,"./fa":705,"./fa.js":705,"./fi":706,"./fi.js":706,"./fr":707,"./fr.js":707,"./gl":708,"./gl.js":708,"./gu":709,"./gu.js":709,"./he":710,"./he.js":710,"./hr":711,"./hr.js":711,"./hu":712,"./hu.js":712,"./id":713,"./id.js":713,"./it":714,"./it.js":714,"./ja":715,"./ja.js":715,"./km":716,"./km.js":716,"./kn":717,"./kn.js":717,"./ko":718,"./ko.js":718,"./ku":719,"./ku.js":719,"./lt":720,"./lt.js":720,"./lv":721,"./lv.js":721,"./ms":722,"./ms.js":722,"./nb":723,"./nb.js":723,"./ne":724,"./ne.js":724,"./nl":725,"./nl.js":725,"./no":726,"./no.js":726,"./oc":727,"./oc.js":727,"./pl":728,"./pl.js":728,"./pt":730,"./pt-br":729,"./pt-br.js":729,"./pt.js":730,"./ro":731,"./ro.js":731,"./ru":732,"./ru.js":732,"./si":733,"./si.js":733,"./sk":734,"./sk.js":734,"./sl":735,"./sl.js":735,"./sq":736,"./sq.js":736,"./sr":738,"./sr-latn":737,"./sr-latn.js":737,"./sr.js":738,"./sv":739,"./sv.js":739,"./tr":740,"./tr.js":740,"./tt":741,"./tt.js":741,"./ug":742,"./ug.js":742,"./uk":743,"./uk.js":743,"./vi":744,"./vi.js":744,"./zh":746,"./zh-cn":745,"./zh-cn.js":745,"./zh.js":746};function r(t){return o(t).then((function(t){return a.t(t,7)}))}function o(t){return a.e(9).then((function(){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}))}r.keys=function(){return Object.keys(n)},r.resolve=o,r.id=783,t.exports=r},784:function(t,e,a){"use strict";var n=a(626);a.n(n).a},785:function(t,e,a){(e=a(341)(!1)).push([t.i,"[data-v-967d5954] p{cursor:text}\n",""]),t.exports=e},786:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return o}));var n=a(885),r=function(t){var e=t.replace(/<\/div>/gi,"</div><br>");return Object(n.fromString)(e,{noLinkBrackets:!0,ignoreHref:!0,ignoreImage:!0,wordwrap:!1,format:{blockquote:function(t,e,a){return e(t.children,a).replace(/\n\n\n/g,"\n\n").replace(/^/gm,"> ")}}}).replace(/\n\n\n/g,"\n\n").replace(/^[\n\r]+/g,"").replace(/ $/gm,"")},o=function(t){return t.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")}},794:function(t,e,a){var n=a(1205);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("7ca22fac",n,!0,{})},796:function(t,e,a){var n=a(1220);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("449bee28",n,!0,{})},797:function(t,e,a){var n=a(1224);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("096e8e1e",n,!0,{})},798:function(t,e,a){var n=a(1233);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("f08ec318",n,!0,{})},799:function(t,e,a){var n=a(1235);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("1748cf82",n,!0,{})},800:function(t,e,a){var n=a(1237);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("6c8d2aa2",n,!0,{})},801:function(t,e,a){var n=a(1239);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("4d1b97c0",n,!0,{})},802:function(t,e,a){var n=a(1241);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("b459e69c",n,!0,{})},812:function(t,e,a){var n=a(1312);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("19494b32",n,!0,{})},813:function(t,e,a){var n=a(1314);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("0d2c63ea",n,!0,{})},814:function(t,e,a){var n=a(1316);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("20b07b9b",n,!0,{})},815:function(t,e,a){var n=a(1341);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("f11f33a8",n,!0,{})},816:function(t,e,a){var n=a(1343);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("39dc4f9e",n,!0,{})},817:function(t,e,a){var n=a(1345);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("25fe426c",n,!0,{})},818:function(t,e,a){var n=a(1347);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("75b1afa3",n,!0,{})},819:function(t,e,a){var n=a(1349);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(342).default)("3aca70bb",n,!0,{})},823:function(t,e,a){"use strict";var n=a(847),r=a.n(n),o=a(1071),i=a(1072),s=a(1077),c=a(1079),l=a(1080),d=a(1073),u=a(1083),p=a(23),m=a(18),h={name:"TextEditor",components:{ckeditor:r.a.component},props:{value:{type:String,required:!0},html:{type:Boolean,default:!1},placeholder:{type:String,default:""},focus:{type:Boolean,default:!1}},data:function(){return{text:"",ready:!1,editor:o.a,config:{placeholder:this.placeholder,plugins:this.html?[i.a,u.a,c.a,l.a,d.a,s.a]:[i.a,u.a],toolbar:{items:this.html?["bold","italic","blockquote","link","undo","redo"]:["undo","redo"]},language:"en"}}},beforeMount:function(){this.loadEditorTranslations(Object(p.getLanguage)())},methods:{loadEditorTranslations:function(t){var e=this;if("en"===t)return this.showEditor("en");a(783)("./".concat(t)).then((function(){return e.showEditor(t)})).catch((function(){return e.showEditor("en")}))},showEditor:function(t){this.html,this.config.language=t,this.ready=!0},onEditorReady:function(t){t.model.schema.on("checkChild",(function(t,e){e[0].endsWith("blockQuote")&&(t.stop(),t.return=!0)}),{priority:"highest"}),this.focus&&(m.a.debug("focusing TextEditor"),t.editing.view.focus()),this.text=this.value,m.a.debug("setting TextEditor contents to <".concat(this.text,">"))},onInput:function(){m.a.debug("TextEditor input changed to <".concat(this.text,">")),this.$emit("input",this.text)}}},f=(a(784),a(35)),v=Object(f.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.ready?a("ckeditor",{attrs:{config:t.config,editor:t.editor},on:{input:t.onInput,ready:t.onEditorReady},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}):t._e()}),[],!1,null,"967d5954",null);e.a=v.exports},895:function(t,e){}},0,[9]]);
//# sourceMappingURL=mail.8.7a9397f9d9ea3cf59023.js.map