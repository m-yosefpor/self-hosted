!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/js/",n(n.s=853)}([,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return s}));
/**
 * @copyright Copyright (c) 2019 Joas Schilling <coding@schilljs.com>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 */
const r={START_CALL:{EVERYONE:0,USERS:1,MODERATORS:2},STATE:{READ_WRITE:0,READ_ONLY:1},TYPE:{ONE_TO_ONE:1,GROUP:2,PUBLIC:3,CHANGELOG:4}},o={CALL_FLAG:{DISCONNECTED:0,IN_CALL:1,WITH_AUDIO:2,WITH_VIDEO:4},NOTIFY:{DEFAULT:0,ALWAYS:1,MENTION:2,NEVER:3},TYPE:{OWNER:1,MODERATOR:2,USER:3,GUEST:4,USER_SELF_JOINED:5,GUEST_MODERATOR:6}},i={LOBBY:{NONE:0,NON_MODERATORS:1}},a={TYPE:{USER:0,GROUP:1,EMAIL:4,REMOTE:6,CIRCLE:7}},s={MESSAGE_MODES:{NO_MENTION:1,SELF_MENTION:2,ROOM_MENTION:3}}},function(e,t,n){"use strict";n(204),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(273))&&r.__esModule?r:{default:r},i=n(60);var a=o.default.create({headers:{requesttoken:(0,i.getRequestToken)()}}),s=Object.assign(a,{CancelToken:o.default.CancelToken,isCancel:o.default.isCancel});(0,i.onRequestTokenUpdate)((function(e){return a.defaults.headers.requesttoken=e}));var c=s;t.default=c},function(e,t,n){"use strict";n(407),n(421),n(424),n(428),n(429),Object.defineProperty(t,"__esModule",{value:!0}),t.getRootUrl=t.generateFilePath=t.imagePath=t.generateUrl=t.generateOcsUrl=t.generateRemoteUrl=t.linkTo=void 0;t.linkTo=function(e,t){return r(e,"",t)};t.generateRemoteUrl=function(e){return window.location.protocol+"//"+window.location.host+function(e){return o()+"/remote.php/"+e}(e)};t.generateOcsUrl=function(e,t){return t=2!==t?1:2,window.location.protocol+"//"+window.location.host+o()+"/ocs/v"+t+".php/"+e+"/"};t.generateUrl=function(e,t,n){var r=Object.assign({escape:!0,noRewrite:!1},n||{}),i=function(e,t){return t=t||{},e.replace(/{([^{}]*)}/g,(function(e,n){var o=t[n];return r.escape?"string"==typeof o||"number"==typeof o?encodeURIComponent(o.toString()):encodeURIComponent(e):"string"==typeof o||"number"==typeof o?o.toString():e}))};return"/"!==e.charAt(0)&&(e="/"+e),!0!==OC.config.modRewriteWorking||r.noRewrite?o()+"/index.php"+i(e,t||{}):o()+i(e,t||{})};t.imagePath=function(e,t){return-1===t.indexOf(".")?r(e,"img",t+".svg"):r(e,"img",t)};var r=function(e,t,n){var r=-1!==OC.coreApps.indexOf(e),i=o();return"php"!==n.substring(n.length-3)||r?"php"===n.substring(n.length-3)||r?(i+="settings"!==e&&"core"!==e&&"search"!==e||"ajax"!==t?"/":"/index.php/",r||(i+="apps/"),""!==e&&(i+=e+="/"),t&&(i+=t+"/"),i+=n):(i=OC.appswebroots[e],t&&(i+="/"+t+"/"),"/"!==i.substring(i.length-1)&&(i+="/"),i+=n):(i+="/index.php/apps/"+e,"index.php"!==n&&(i+="/",t&&(i+=encodeURI(t+"/")),i+=n)),i};t.generateFilePath=r;var o=function(){return OC.webroot};t.getRootUrl=o},function(e,t,n){"use strict";function r(e,t,n,r,o,i,a,s){var c,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):o&&(c=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.r(t),function(e,n){
/*!
 * Vue.js v2.6.11
 * (c) 2014-2019 Evan You
 * Released under the MIT License.
 */
var r=Object.freeze({});function o(e){return null==e}function i(e){return null!=e}function a(e){return!0===e}function s(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function c(e){return null!==e&&"object"==typeof e}var u=Object.prototype.toString;function l(e){return"[object Object]"===u.call(e)}function d(e){return"[object RegExp]"===u.call(e)}function f(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function p(e){return i(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function h(e){return null==e?"":Array.isArray(e)||l(e)&&e.toString===u?JSON.stringify(e,null,2):String(e)}function v(e){var t=parseFloat(e);return isNaN(t)?e:t}function m(e,t){for(var n=Object.create(null),r=e.split(","),o=0;o<r.length;o++)n[r[o]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}m("slot,component",!0);var g=m("key,ref,slot,slot-scope,is");function y(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var b=Object.prototype.hasOwnProperty;function S(e,t){return b.call(e,t)}function w(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}var C=/-(\w)/g,_=w((function(e){return e.replace(C,(function(e,t){return t?t.toUpperCase():""}))})),E=w((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),T=/\B([A-Z])/g,O=w((function(e){return e.replace(T,"-$1").toLowerCase()}));var R=Function.prototype.bind?function(e,t){return e.bind(t)}:function(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n};function k(e,t){t=t||0;for(var n=e.length-t,r=new Array(n);n--;)r[n]=e[n+t];return r}function P(e,t){for(var n in t)e[n]=t[n];return e}function x(e){for(var t={},n=0;n<e.length;n++)e[n]&&P(t,e[n]);return t}function I(e,t,n){}var A=function(e,t,n){return!1},M=function(e){return e};function j(e,t){if(e===t)return!0;var n=c(e),r=c(t);if(!n||!r)return!n&&!r&&String(e)===String(t);try{var o=Array.isArray(e),i=Array.isArray(t);if(o&&i)return e.length===t.length&&e.every((function(e,n){return j(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(o||i)return!1;var a=Object.keys(e),s=Object.keys(t);return a.length===s.length&&a.every((function(n){return j(e[n],t[n])}))}catch(e){return!1}}function D(e,t){for(var n=0;n<e.length;n++)if(j(e[n],t))return n;return-1}function L(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var N=["component","directive","filter"],F=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],U={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:A,isReservedAttr:A,isUnknownElement:A,getTagNamespace:I,parsePlatformTagName:M,mustUseProp:A,async:!0,_lifecycleHooks:F},$=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function B(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var G=new RegExp("[^"+$.source+".$_\\d]");var V,z="__proto__"in{},W="undefined"!=typeof window,H="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,q=H&&WXEnvironment.platform.toLowerCase(),J=W&&window.navigator.userAgent.toLowerCase(),X=J&&/msie|trident/.test(J),Y=J&&J.indexOf("msie 9.0")>0,K=J&&J.indexOf("edge/")>0,Z=(J&&J.indexOf("android"),J&&/iphone|ipad|ipod|ios/.test(J)||"ios"===q),Q=(J&&/chrome\/\d+/.test(J),J&&/phantomjs/.test(J),J&&J.match(/firefox\/(\d+)/)),ee={}.watch,te=!1;if(W)try{var ne={};Object.defineProperty(ne,"passive",{get:function(){te=!0}}),window.addEventListener("test-passive",null,ne)}catch(e){}var re=function(){return void 0===V&&(V=!W&&!H&&void 0!==e&&(e.process&&"server"===e.process.env.VUE_ENV)),V},oe=W&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ie(e){return"function"==typeof e&&/native code/.test(e.toString())}var ae,se="undefined"!=typeof Symbol&&ie(Symbol)&&"undefined"!=typeof Reflect&&ie(Reflect.ownKeys);ae="undefined"!=typeof Set&&ie(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var ce=I,ue=0,le=function(){this.id=ue++,this.subs=[]};le.prototype.addSub=function(e){this.subs.push(e)},le.prototype.removeSub=function(e){y(this.subs,e)},le.prototype.depend=function(){le.target&&le.target.addDep(this)},le.prototype.notify=function(){var e=this.subs.slice();for(var t=0,n=e.length;t<n;t++)e[t].update()},le.target=null;var de=[];function fe(e){de.push(e),le.target=e}function pe(){de.pop(),le.target=de[de.length-1]}var he=function(e,t,n,r,o,i,a,s){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=o,this.ns=void 0,this.context=i,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},ve={child:{configurable:!0}};ve.child.get=function(){return this.componentInstance},Object.defineProperties(he.prototype,ve);var me=function(e){void 0===e&&(e="");var t=new he;return t.text=e,t.isComment=!0,t};function ge(e){return new he(void 0,void 0,void 0,String(e))}function ye(e){var t=new he(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var be=Array.prototype,Se=Object.create(be);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){var t=be[e];B(Se,e,(function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var o,i=t.apply(this,n),a=this.__ob__;switch(e){case"push":case"unshift":o=n;break;case"splice":o=n.slice(2)}return o&&a.observeArray(o),a.dep.notify(),i}))}));var we=Object.getOwnPropertyNames(Se),Ce=!0;function _e(e){Ce=e}var Ee=function(e){this.value=e,this.dep=new le,this.vmCount=0,B(e,"__ob__",this),Array.isArray(e)?(z?function(e,t){e.__proto__=t}(e,Se):function(e,t,n){for(var r=0,o=n.length;r<o;r++){var i=n[r];B(e,i,t[i])}}(e,Se,we),this.observeArray(e)):this.walk(e)};function Te(e,t){var n;if(c(e)&&!(e instanceof he))return S(e,"__ob__")&&e.__ob__ instanceof Ee?n=e.__ob__:Ce&&!re()&&(Array.isArray(e)||l(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Ee(e)),t&&n&&n.vmCount++,n}function Oe(e,t,n,r,o){var i=new le,a=Object.getOwnPropertyDescriptor(e,t);if(!a||!1!==a.configurable){var s=a&&a.get,c=a&&a.set;s&&!c||2!==arguments.length||(n=e[t]);var u=!o&&Te(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(e):n;return le.target&&(i.depend(),u&&(u.dep.depend(),Array.isArray(t)&&Pe(t))),t},set:function(t){var r=s?s.call(e):n;t===r||t!=t&&r!=r||s&&!c||(c?c.call(e,t):n=t,u=!o&&Te(t),i.notify())}})}}function Re(e,t,n){if(Array.isArray(e)&&f(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var r=e.__ob__;return e._isVue||r&&r.vmCount?n:r?(Oe(r.value,t,n),r.dep.notify(),n):(e[t]=n,n)}function ke(e,t){if(Array.isArray(e)&&f(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||S(e,t)&&(delete e[t],n&&n.dep.notify())}}function Pe(e){for(var t=void 0,n=0,r=e.length;n<r;n++)(t=e[n])&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Pe(t)}Ee.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)Oe(e,t[n])},Ee.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Te(e[t])};var xe=U.optionMergeStrategies;function Ie(e,t){if(!t)return e;for(var n,r,o,i=se?Reflect.ownKeys(t):Object.keys(t),a=0;a<i.length;a++)"__ob__"!==(n=i[a])&&(r=e[n],o=t[n],S(e,n)?r!==o&&l(r)&&l(o)&&Ie(r,o):Re(e,n,o));return e}function Ae(e,t,n){return n?function(){var r="function"==typeof t?t.call(n,n):t,o="function"==typeof e?e.call(n,n):e;return r?Ie(r,o):o}:t?e?function(){return Ie("function"==typeof t?t.call(this,this):t,"function"==typeof e?e.call(this,this):e)}:t:e}function Me(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(n):n}function je(e,t,n,r){var o=Object.create(e||null);return t?P(o,t):o}xe.data=function(e,t,n){return n?Ae(e,t,n):t&&"function"!=typeof t?e:Ae(e,t)},F.forEach((function(e){xe[e]=Me})),N.forEach((function(e){xe[e+"s"]=je})),xe.watch=function(e,t,n,r){if(e===ee&&(e=void 0),t===ee&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var o={};for(var i in P(o,e),t){var a=o[i],s=t[i];a&&!Array.isArray(a)&&(a=[a]),o[i]=a?a.concat(s):Array.isArray(s)?s:[s]}return o},xe.props=xe.methods=xe.inject=xe.computed=function(e,t,n,r){if(!e)return t;var o=Object.create(null);return P(o,e),t&&P(o,t),o},xe.provide=Ae;var De=function(e,t){return void 0===t?e:t};function Le(e,t,n){if("function"==typeof t&&(t=t.options),function(e,t){var n=e.props;if(n){var r,o,i={};if(Array.isArray(n))for(r=n.length;r--;)"string"==typeof(o=n[r])&&(i[_(o)]={type:null});else if(l(n))for(var a in n)o=n[a],i[_(a)]=l(o)?o:{type:o};else 0;e.props=i}}(t),function(e,t){var n=e.inject;if(n){var r=e.inject={};if(Array.isArray(n))for(var o=0;o<n.length;o++)r[n[o]]={from:n[o]};else if(l(n))for(var i in n){var a=n[i];r[i]=l(a)?P({from:i},a):{from:a}}else 0}}(t),function(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"==typeof r&&(t[n]={bind:r,update:r})}}(t),!t._base&&(t.extends&&(e=Le(e,t.extends,n)),t.mixins))for(var r=0,o=t.mixins.length;r<o;r++)e=Le(e,t.mixins[r],n);var i,a={};for(i in e)s(i);for(i in t)S(e,i)||s(i);function s(r){var o=xe[r]||De;a[r]=o(e[r],t[r],n,r)}return a}function Ne(e,t,n,r){if("string"==typeof n){var o=e[t];if(S(o,n))return o[n];var i=_(n);if(S(o,i))return o[i];var a=E(i);return S(o,a)?o[a]:o[n]||o[i]||o[a]}}function Fe(e,t,n,r){var o=t[e],i=!S(n,e),a=n[e],s=Be(Boolean,o.type);if(s>-1)if(i&&!S(o,"default"))a=!1;else if(""===a||a===O(e)){var c=Be(String,o.type);(c<0||s<c)&&(a=!0)}if(void 0===a){a=function(e,t,n){if(!S(t,"default"))return;var r=t.default;0;if(e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n])return e._props[n];return"function"==typeof r&&"Function"!==Ue(t.type)?r.call(e):r}(r,o,e);var u=Ce;_e(!0),Te(a),_e(u)}return a}function Ue(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function $e(e,t){return Ue(e)===Ue(t)}function Be(e,t){if(!Array.isArray(t))return $e(t,e)?0:-1;for(var n=0,r=t.length;n<r;n++)if($e(t[n],e))return n;return-1}function Ge(e,t,n){fe();try{if(t)for(var r=t;r=r.$parent;){var o=r.$options.errorCaptured;if(o)for(var i=0;i<o.length;i++)try{if(!1===o[i].call(r,e,t,n))return}catch(e){ze(e,r,"errorCaptured hook")}}ze(e,t,n)}finally{pe()}}function Ve(e,t,n,r,o){var i;try{(i=n?e.apply(t,n):e.call(t))&&!i._isVue&&p(i)&&!i._handled&&(i.catch((function(e){return Ge(e,r,o+" (Promise/async)")})),i._handled=!0)}catch(e){Ge(e,r,o)}return i}function ze(e,t,n){if(U.errorHandler)try{return U.errorHandler.call(null,e,t,n)}catch(t){t!==e&&We(t,null,"config.errorHandler")}We(e,t,n)}function We(e,t,n){if(!W&&!H||"undefined"==typeof console)throw e;console.error(e)}var He,qe=!1,Je=[],Xe=!1;function Ye(){Xe=!1;var e=Je.slice(0);Je.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!=typeof Promise&&ie(Promise)){var Ke=Promise.resolve();He=function(){Ke.then(Ye),Z&&setTimeout(I)},qe=!0}else if(X||"undefined"==typeof MutationObserver||!ie(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())He=void 0!==n&&ie(n)?function(){n(Ye)}:function(){setTimeout(Ye,0)};else{var Ze=1,Qe=new MutationObserver(Ye),et=document.createTextNode(String(Ze));Qe.observe(et,{characterData:!0}),He=function(){Ze=(Ze+1)%2,et.data=String(Ze)},qe=!0}function tt(e,t){var n;if(Je.push((function(){if(e)try{e.call(t)}catch(e){Ge(e,t,"nextTick")}else n&&n(t)})),Xe||(Xe=!0,He()),!e&&"undefined"!=typeof Promise)return new Promise((function(e){n=e}))}var nt=new ae;function rt(e){!function e(t,n){var r,o,i=Array.isArray(t);if(!i&&!c(t)||Object.isFrozen(t)||t instanceof he)return;if(t.__ob__){var a=t.__ob__.dep.id;if(n.has(a))return;n.add(a)}if(i)for(r=t.length;r--;)e(t[r],n);else for(o=Object.keys(t),r=o.length;r--;)e(t[o[r]],n)}(e,nt),nt.clear()}var ot=w((function(e){var t="&"===e.charAt(0),n="~"===(e=t?e.slice(1):e).charAt(0),r="!"===(e=n?e.slice(1):e).charAt(0);return{name:e=r?e.slice(1):e,once:n,capture:r,passive:t}}));function it(e,t){function n(){var e=arguments,r=n.fns;if(!Array.isArray(r))return Ve(r,null,arguments,t,"v-on handler");for(var o=r.slice(),i=0;i<o.length;i++)Ve(o[i],null,e,t,"v-on handler")}return n.fns=e,n}function at(e,t,n,r,i,s){var c,u,l,d;for(c in e)u=e[c],l=t[c],d=ot(c),o(u)||(o(l)?(o(u.fns)&&(u=e[c]=it(u,s)),a(d.once)&&(u=e[c]=i(d.name,u,d.capture)),n(d.name,u,d.capture,d.passive,d.params)):u!==l&&(l.fns=u,e[c]=l));for(c in t)o(e[c])&&r((d=ot(c)).name,t[c],d.capture)}function st(e,t,n){var r;e instanceof he&&(e=e.data.hook||(e.data.hook={}));var s=e[t];function c(){n.apply(this,arguments),y(r.fns,c)}o(s)?r=it([c]):i(s.fns)&&a(s.merged)?(r=s).fns.push(c):r=it([s,c]),r.merged=!0,e[t]=r}function ct(e,t,n,r,o){if(i(t)){if(S(t,n))return e[n]=t[n],o||delete t[n],!0;if(S(t,r))return e[n]=t[r],o||delete t[r],!0}return!1}function ut(e){return s(e)?[ge(e)]:Array.isArray(e)?function e(t,n){var r,c,u,l,d=[];for(r=0;r<t.length;r++)o(c=t[r])||"boolean"==typeof c||(u=d.length-1,l=d[u],Array.isArray(c)?c.length>0&&(lt((c=e(c,(n||"")+"_"+r))[0])&&lt(l)&&(d[u]=ge(l.text+c[0].text),c.shift()),d.push.apply(d,c)):s(c)?lt(l)?d[u]=ge(l.text+c):""!==c&&d.push(ge(c)):lt(c)&&lt(l)?d[u]=ge(l.text+c.text):(a(t._isVList)&&i(c.tag)&&o(c.key)&&i(n)&&(c.key="__vlist"+n+"_"+r+"__"),d.push(c)));return d}(e):void 0}function lt(e){return i(e)&&i(e.text)&&!1===e.isComment}function dt(e,t){if(e){for(var n=Object.create(null),r=se?Reflect.ownKeys(e):Object.keys(e),o=0;o<r.length;o++){var i=r[o];if("__ob__"!==i){for(var a=e[i].from,s=t;s;){if(s._provided&&S(s._provided,a)){n[i]=s._provided[a];break}s=s.$parent}if(!s)if("default"in e[i]){var c=e[i].default;n[i]="function"==typeof c?c.call(t):c}else 0}}return n}}function ft(e,t){if(!e||!e.length)return{};for(var n={},r=0,o=e.length;r<o;r++){var i=e[r],a=i.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,i.context!==t&&i.fnContext!==t||!a||null==a.slot)(n.default||(n.default=[])).push(i);else{var s=a.slot,c=n[s]||(n[s]=[]);"template"===i.tag?c.push.apply(c,i.children||[]):c.push(i)}}for(var u in n)n[u].every(pt)&&delete n[u];return n}function pt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function ht(e,t,n){var o,i=Object.keys(t).length>0,a=e?!!e.$stable:!i,s=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&n&&n!==r&&s===n.$key&&!i&&!n.$hasNormal)return n;for(var c in o={},e)e[c]&&"$"!==c[0]&&(o[c]=vt(t,c,e[c]))}else o={};for(var u in t)u in o||(o[u]=mt(t,u));return e&&Object.isExtensible(e)&&(e._normalized=o),B(o,"$stable",a),B(o,"$key",s),B(o,"$hasNormal",i),o}function vt(e,t,n){var r=function(){var e=arguments.length?n.apply(null,arguments):n({});return(e=e&&"object"==typeof e&&!Array.isArray(e)?[e]:ut(e))&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:r,enumerable:!0,configurable:!0}),r}function mt(e,t){return function(){return e[t]}}function gt(e,t){var n,r,o,a,s;if(Array.isArray(e)||"string"==typeof e)for(n=new Array(e.length),r=0,o=e.length;r<o;r++)n[r]=t(e[r],r);else if("number"==typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(c(e))if(se&&e[Symbol.iterator]){n=[];for(var u=e[Symbol.iterator](),l=u.next();!l.done;)n.push(t(l.value,n.length)),l=u.next()}else for(a=Object.keys(e),n=new Array(a.length),r=0,o=a.length;r<o;r++)s=a[r],n[r]=t(e[s],s,r);return i(n)||(n=[]),n._isVList=!0,n}function yt(e,t,n,r){var o,i=this.$scopedSlots[e];i?(n=n||{},r&&(n=P(P({},r),n)),o=i(n)||t):o=this.$slots[e]||t;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},o):o}function bt(e){return Ne(this.$options,"filters",e)||M}function St(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function wt(e,t,n,r,o){var i=U.keyCodes[t]||n;return o&&r&&!U.keyCodes[t]?St(o,r):i?St(i,e):r?O(r)!==t:void 0}function Ct(e,t,n,r,o){if(n)if(c(n)){var i;Array.isArray(n)&&(n=x(n));var a=function(a){if("class"===a||"style"===a||g(a))i=e;else{var s=e.attrs&&e.attrs.type;i=r||U.mustUseProp(t,s,a)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var c=_(a),u=O(a);c in i||u in i||(i[a]=n[a],o&&((e.on||(e.on={}))["update:"+a]=function(e){n[a]=e}))};for(var s in n)a(s)}else;return e}function _t(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t?r:(Tt(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__"+e,!1),r)}function Et(e,t,n){return Tt(e,"__once__"+t+(n?"_"+n:""),!0),e}function Tt(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!=typeof e[r]&&Ot(e[r],t+"_"+r,n);else Ot(e,t,n)}function Ot(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function Rt(e,t){if(t)if(l(t)){var n=e.on=e.on?P({},e.on):{};for(var r in t){var o=n[r],i=t[r];n[r]=o?[].concat(o,i):i}}else;return e}function kt(e,t,n,r){t=t||{$stable:!n};for(var o=0;o<e.length;o++){var i=e[o];Array.isArray(i)?kt(i,t,n):i&&(i.proxy&&(i.fn.proxy=!0),t[i.key]=i.fn)}return r&&(t.$key=r),t}function Pt(e,t){for(var n=0;n<t.length;n+=2){var r=t[n];"string"==typeof r&&r&&(e[t[n]]=t[n+1])}return e}function xt(e,t){return"string"==typeof e?t+e:e}function It(e){e._o=Et,e._n=v,e._s=h,e._l=gt,e._t=yt,e._q=j,e._i=D,e._m=_t,e._f=bt,e._k=wt,e._b=Ct,e._v=ge,e._e=me,e._u=kt,e._g=Rt,e._d=Pt,e._p=xt}function At(e,t,n,o,i){var s,c=this,u=i.options;S(o,"_uid")?(s=Object.create(o))._original=o:(s=o,o=o._original);var l=a(u._compiled),d=!l;this.data=e,this.props=t,this.children=n,this.parent=o,this.listeners=e.on||r,this.injections=dt(u.inject,o),this.slots=function(){return c.$slots||ht(e.scopedSlots,c.$slots=ft(n,o)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return ht(e.scopedSlots,this.slots())}}),l&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=ht(e.scopedSlots,this.$slots)),u._scopeId?this._c=function(e,t,n,r){var i=Ut(s,e,t,n,r,d);return i&&!Array.isArray(i)&&(i.fnScopeId=u._scopeId,i.fnContext=o),i}:this._c=function(e,t,n,r){return Ut(s,e,t,n,r,d)}}function Mt(e,t,n,r,o){var i=ye(e);return i.fnContext=n,i.fnOptions=r,t.slot&&((i.data||(i.data={})).slot=t.slot),i}function jt(e,t){for(var n in t)e[_(n)]=t[n]}It(At.prototype);var Dt={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;Dt.prepatch(n,n)}else{(e.componentInstance=function(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;i(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns);return new e.componentOptions.Ctor(n)}(e,Xt)).$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions;!function(e,t,n,o,i){0;var a=o.data.scopedSlots,s=e.$scopedSlots,c=!!(a&&!a.$stable||s!==r&&!s.$stable||a&&e.$scopedSlots.$key!==a.$key),u=!!(i||e.$options._renderChildren||c);e.$options._parentVnode=o,e.$vnode=o,e._vnode&&(e._vnode.parent=o);if(e.$options._renderChildren=i,e.$attrs=o.data.attrs||r,e.$listeners=n||r,t&&e.$options.props){_e(!1);for(var l=e._props,d=e.$options._propKeys||[],f=0;f<d.length;f++){var p=d[f],h=e.$options.props;l[p]=Fe(p,h,t,e)}_e(!0),e.$options.propsData=t}n=n||r;var v=e.$options._parentListeners;e.$options._parentListeners=n,Jt(e,n,v),u&&(e.$slots=ft(i,o.context),e.$forceUpdate());0}(t.componentInstance=e.componentInstance,n.propsData,n.listeners,t,n.children)},insert:function(e){var t,n=e.context,r=e.componentInstance;r._isMounted||(r._isMounted=!0,Qt(r,"mounted")),e.data.keepAlive&&(n._isMounted?((t=r)._inactive=!1,tn.push(t)):Zt(r,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?function e(t,n){if(n&&(t._directInactive=!0,Kt(t)))return;if(!t._inactive){t._inactive=!0;for(var r=0;r<t.$children.length;r++)e(t.$children[r]);Qt(t,"deactivated")}}(t,!0):t.$destroy())}},Lt=Object.keys(Dt);function Nt(e,t,n,s,u){if(!o(e)){var l=n.$options._base;if(c(e)&&(e=l.extend(e)),"function"==typeof e){var d;if(o(e.cid)&&void 0===(e=function(e,t){if(a(e.error)&&i(e.errorComp))return e.errorComp;if(i(e.resolved))return e.resolved;var n=Bt;n&&i(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n);if(a(e.loading)&&i(e.loadingComp))return e.loadingComp;if(n&&!i(e.owners)){var r=e.owners=[n],s=!0,u=null,l=null;n.$on("hook:destroyed",(function(){return y(r,n)}));var d=function(e){for(var t=0,n=r.length;t<n;t++)r[t].$forceUpdate();e&&(r.length=0,null!==u&&(clearTimeout(u),u=null),null!==l&&(clearTimeout(l),l=null))},f=L((function(n){e.resolved=Gt(n,t),s?r.length=0:d(!0)})),h=L((function(t){i(e.errorComp)&&(e.error=!0,d(!0))})),v=e(f,h);return c(v)&&(p(v)?o(e.resolved)&&v.then(f,h):p(v.component)&&(v.component.then(f,h),i(v.error)&&(e.errorComp=Gt(v.error,t)),i(v.loading)&&(e.loadingComp=Gt(v.loading,t),0===v.delay?e.loading=!0:u=setTimeout((function(){u=null,o(e.resolved)&&o(e.error)&&(e.loading=!0,d(!1))}),v.delay||200)),i(v.timeout)&&(l=setTimeout((function(){l=null,o(e.resolved)&&h(null)}),v.timeout)))),s=!1,e.loading?e.loadingComp:e.resolved}}(d=e,l)))return function(e,t,n,r,o){var i=me();return i.asyncFactory=e,i.asyncMeta={data:t,context:n,children:r,tag:o},i}(d,t,n,s,u);t=t||{},Cn(e),i(t.model)&&function(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var o=t.on||(t.on={}),a=o[r],s=t.model.callback;i(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(o[r]=[s].concat(a)):o[r]=s}(e.options,t);var f=function(e,t,n){var r=t.options.props;if(!o(r)){var a={},s=e.attrs,c=e.props;if(i(s)||i(c))for(var u in r){var l=O(u);ct(a,c,u,l,!0)||ct(a,s,u,l,!1)}return a}}(t,e);if(a(e.options.functional))return function(e,t,n,o,a){var s=e.options,c={},u=s.props;if(i(u))for(var l in u)c[l]=Fe(l,u,t||r);else i(n.attrs)&&jt(c,n.attrs),i(n.props)&&jt(c,n.props);var d=new At(n,c,a,o,e),f=s.render.call(null,d._c,d);if(f instanceof he)return Mt(f,n,d.parent,s,d);if(Array.isArray(f)){for(var p=ut(f)||[],h=new Array(p.length),v=0;v<p.length;v++)h[v]=Mt(p[v],n,d.parent,s,d);return h}}(e,f,t,n,s);var h=t.on;if(t.on=t.nativeOn,a(e.options.abstract)){var v=t.slot;t={},v&&(t.slot=v)}!function(e){for(var t=e.hook||(e.hook={}),n=0;n<Lt.length;n++){var r=Lt[n],o=t[r],i=Dt[r];o===i||o&&o._merged||(t[r]=o?Ft(i,o):i)}}(t);var m=e.options.name||u;return new he("vue-component-"+e.cid+(m?"-"+m:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:f,listeners:h,tag:u,children:s},d)}}}function Ft(e,t){var n=function(n,r){e(n,r),t(n,r)};return n._merged=!0,n}function Ut(e,t,n,r,u,l){return(Array.isArray(n)||s(n))&&(u=r,r=n,n=void 0),a(l)&&(u=2),function(e,t,n,r,s){if(i(n)&&i(n.__ob__))return me();i(n)&&i(n.is)&&(t=n.is);if(!t)return me();0;Array.isArray(r)&&"function"==typeof r[0]&&((n=n||{}).scopedSlots={default:r[0]},r.length=0);2===s?r=ut(r):1===s&&(r=function(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}(r));var u,l;if("string"==typeof t){var d;l=e.$vnode&&e.$vnode.ns||U.getTagNamespace(t),u=U.isReservedTag(t)?new he(U.parsePlatformTagName(t),n,r,void 0,void 0,e):n&&n.pre||!i(d=Ne(e.$options,"components",t))?new he(t,n,r,void 0,void 0,e):Nt(d,n,e,r,t)}else u=Nt(t,n,e,r);return Array.isArray(u)?u:i(u)?(i(l)&&function e(t,n,r){t.ns=n,"foreignObject"===t.tag&&(n=void 0,r=!0);if(i(t.children))for(var s=0,c=t.children.length;s<c;s++){var u=t.children[s];i(u.tag)&&(o(u.ns)||a(r)&&"svg"!==u.tag)&&e(u,n,r)}}(u,l),i(n)&&function(e){c(e.style)&&rt(e.style);c(e.class)&&rt(e.class)}(n),u):me()}(e,t,n,r,u)}var $t,Bt=null;function Gt(e,t){return(e.__esModule||se&&"Module"===e[Symbol.toStringTag])&&(e=e.default),c(e)?t.extend(e):e}function Vt(e){return e.isComment&&e.asyncFactory}function zt(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(i(n)&&(i(n.componentOptions)||Vt(n)))return n}}function Wt(e,t){$t.$on(e,t)}function Ht(e,t){$t.$off(e,t)}function qt(e,t){var n=$t;return function r(){var o=t.apply(null,arguments);null!==o&&n.$off(e,r)}}function Jt(e,t,n){$t=e,at(t,n||{},Wt,Ht,qt,e),$t=void 0}var Xt=null;function Yt(e){var t=Xt;return Xt=e,function(){Xt=t}}function Kt(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function Zt(e,t){if(t){if(e._directInactive=!1,Kt(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Zt(e.$children[n]);Qt(e,"activated")}}function Qt(e,t){fe();var n=e.$options[t],r=t+" hook";if(n)for(var o=0,i=n.length;o<i;o++)Ve(n[o],e,null,e,r);e._hasHookEvent&&e.$emit("hook:"+t),pe()}var en=[],tn=[],nn={},rn=!1,on=!1,an=0;var sn=0,cn=Date.now;if(W&&!X){var un=window.performance;un&&"function"==typeof un.now&&cn()>document.createEvent("Event").timeStamp&&(cn=function(){return un.now()})}function ln(){var e,t;for(sn=cn(),on=!0,en.sort((function(e,t){return e.id-t.id})),an=0;an<en.length;an++)(e=en[an]).before&&e.before(),t=e.id,nn[t]=null,e.run();var n=tn.slice(),r=en.slice();an=en.length=tn.length=0,nn={},rn=on=!1,function(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Zt(e[t],!0)}(n),function(e){var t=e.length;for(;t--;){var n=e[t],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&Qt(r,"updated")}}(r),oe&&U.devtools&&oe.emit("flush")}var dn=0,fn=function(e,t,n,r,o){this.vm=e,o&&(e._watcher=this),e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++dn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ae,this.newDepIds=new ae,this.expression="","function"==typeof t?this.getter=t:(this.getter=function(e){if(!G.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}(t),this.getter||(this.getter=I)),this.value=this.lazy?void 0:this.get()};fn.prototype.get=function(){var e;fe(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;Ge(e,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&rt(e),pe(),this.cleanupDeps()}return e},fn.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},fn.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},fn.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(e){var t=e.id;if(null==nn[t]){if(nn[t]=!0,on){for(var n=en.length-1;n>an&&en[n].id>e.id;)n--;en.splice(n+1,0,e)}else en.push(e);rn||(rn=!0,tt(ln))}}(this)},fn.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||c(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(e){Ge(e,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},fn.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},fn.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},fn.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}};var pn={enumerable:!0,configurable:!0,get:I,set:I};function hn(e,t,n){pn.get=function(){return this[t][n]},pn.set=function(e){this[t][n]=e},Object.defineProperty(e,n,pn)}function vn(e){e._watchers=[];var t=e.$options;t.props&&function(e,t){var n=e.$options.propsData||{},r=e._props={},o=e.$options._propKeys=[];e.$parent&&_e(!1);var i=function(i){o.push(i);var a=Fe(i,t,n,e);Oe(r,i,a),i in e||hn(e,"_props",i)};for(var a in t)i(a);_e(!0)}(e,t.props),t.methods&&function(e,t){e.$options.props;for(var n in t)e[n]="function"!=typeof t[n]?I:R(t[n],e)}(e,t.methods),t.data?function(e){var t=e.$options.data;l(t=e._data="function"==typeof t?function(e,t){fe();try{return e.call(t,t)}catch(e){return Ge(e,t,"data()"),{}}finally{pe()}}(t,e):t||{})||(t={});var n=Object.keys(t),r=e.$options.props,o=(e.$options.methods,n.length);for(;o--;){var i=n[o];0,r&&S(r,i)||(a=void 0,36!==(a=(i+"").charCodeAt(0))&&95!==a&&hn(e,"_data",i))}var a;Te(t,!0)}(e):Te(e._data={},!0),t.computed&&function(e,t){var n=e._computedWatchers=Object.create(null),r=re();for(var o in t){var i=t[o],a="function"==typeof i?i:i.get;0,r||(n[o]=new fn(e,a||I,I,mn)),o in e||gn(e,o,i)}}(e,t.computed),t.watch&&t.watch!==ee&&function(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var o=0;o<r.length;o++)Sn(e,n,r[o]);else Sn(e,n,r)}}(e,t.watch)}var mn={lazy:!0};function gn(e,t,n){var r=!re();"function"==typeof n?(pn.get=r?yn(t):bn(n),pn.set=I):(pn.get=n.get?r&&!1!==n.cache?yn(t):bn(n.get):I,pn.set=n.set||I),Object.defineProperty(e,t,pn)}function yn(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),le.target&&t.depend(),t.value}}function bn(e){return function(){return e.call(this,this)}}function Sn(e,t,n,r){return l(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=e[n]),e.$watch(t,n,r)}var wn=0;function Cn(e){var t=e.options;if(e.super){var n=Cn(e.super);if(n!==e.superOptions){e.superOptions=n;var r=function(e){var t,n=e.options,r=e.sealedOptions;for(var o in n)n[o]!==r[o]&&(t||(t={}),t[o]=n[o]);return t}(e);r&&P(e.extendOptions,r),(t=e.options=Le(n,e.extendOptions)).name&&(t.components[t.name]=e)}}return t}function _n(e){this._init(e)}function En(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,o=e._Ctor||(e._Ctor={});if(o[r])return o[r];var i=e.name||n.options.name;var a=function(e){this._init(e)};return(a.prototype=Object.create(n.prototype)).constructor=a,a.cid=t++,a.options=Le(n.options,e),a.super=n,a.options.props&&function(e){var t=e.options.props;for(var n in t)hn(e.prototype,"_props",n)}(a),a.options.computed&&function(e){var t=e.options.computed;for(var n in t)gn(e.prototype,n,t[n])}(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,N.forEach((function(e){a[e]=n[e]})),i&&(a.options.components[i]=a),a.superOptions=n.options,a.extendOptions=e,a.sealedOptions=P({},a.options),o[r]=a,a}}function Tn(e){return e&&(e.Ctor.options.name||e.tag)}function On(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"==typeof e?e.split(",").indexOf(t)>-1:!!d(e)&&e.test(t)}function Rn(e,t){var n=e.cache,r=e.keys,o=e._vnode;for(var i in n){var a=n[i];if(a){var s=Tn(a.componentOptions);s&&!t(s)&&kn(n,i,r,o)}}}function kn(e,t,n,r){var o=e[t];!o||r&&o.tag===r.tag||o.componentInstance.$destroy(),e[t]=null,y(n,t)}!function(e){e.prototype._init=function(e){var t=this;t._uid=wn++,t._isVue=!0,e&&e._isComponent?function(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r;var o=r.componentOptions;n.propsData=o.propsData,n._parentListeners=o.listeners,n._renderChildren=o.children,n._componentTag=o.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}(t,e):t.$options=Le(Cn(t.constructor),e||{},t),t._renderProxy=t,t._self=t,function(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(t),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Jt(e,t)}(t),function(e){e._vnode=null,e._staticTrees=null;var t=e.$options,n=e.$vnode=t._parentVnode,o=n&&n.context;e.$slots=ft(t._renderChildren,o),e.$scopedSlots=r,e._c=function(t,n,r,o){return Ut(e,t,n,r,o,!1)},e.$createElement=function(t,n,r,o){return Ut(e,t,n,r,o,!0)};var i=n&&n.data;Oe(e,"$attrs",i&&i.attrs||r,null,!0),Oe(e,"$listeners",t._parentListeners||r,null,!0)}(t),Qt(t,"beforeCreate"),function(e){var t=dt(e.$options.inject,e);t&&(_e(!1),Object.keys(t).forEach((function(n){Oe(e,n,t[n])})),_e(!0))}(t),vn(t),function(e){var t=e.$options.provide;t&&(e._provided="function"==typeof t?t.call(e):t)}(t),Qt(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}(_n),function(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Re,e.prototype.$delete=ke,e.prototype.$watch=function(e,t,n){if(l(t))return Sn(this,e,t,n);(n=n||{}).user=!0;var r=new fn(this,e,t,n);if(n.immediate)try{t.call(this,r.value)}catch(e){Ge(e,this,'callback for immediate watcher "'+r.expression+'"')}return function(){r.teardown()}}}(_n),function(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;if(Array.isArray(e))for(var o=0,i=e.length;o<i;o++)r.$on(e[o],n);else(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var r=0,o=e.length;r<o;r++)n.$off(e[r],t);return n}var i,a=n._events[e];if(!a)return n;if(!t)return n._events[e]=null,n;for(var s=a.length;s--;)if((i=a[s])===t||i.fn===t){a.splice(s,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?k(n):n;for(var r=k(arguments,1),o='event handler for "'+e+'"',i=0,a=n.length;i<a;i++)Ve(n[i],t,r,t,o)}return t}}(_n),function(e){e.prototype._update=function(e,t){var n=this,r=n.$el,o=n._vnode,i=Yt(n);n._vnode=e,n.$el=o?n.__patch__(o,e):n.__patch__(n.$el,e,t,!1),i(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Qt(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||y(t.$children,e),e._watcher&&e._watcher.teardown();for(var n=e._watchers.length;n--;)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Qt(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}(_n),function(e){It(e.prototype),e.prototype.$nextTick=function(e){return tt(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,r=n.render,o=n._parentVnode;o&&(t.$scopedSlots=ht(o.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=o;try{Bt=t,e=r.call(t._renderProxy,t.$createElement)}catch(n){Ge(n,t,"render"),e=t._vnode}finally{Bt=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof he||(e=me()),e.parent=o,e}}(_n);var Pn=[String,RegExp,Array],xn={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Pn,exclude:Pn,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)kn(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",(function(t){Rn(e,(function(e){return On(t,e)}))})),this.$watch("exclude",(function(t){Rn(e,(function(e){return!On(t,e)}))}))},render:function(){var e=this.$slots.default,t=zt(e),n=t&&t.componentOptions;if(n){var r=Tn(n),o=this.include,i=this.exclude;if(o&&(!r||!On(o,r))||i&&r&&On(i,r))return t;var a=this.cache,s=this.keys,c=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;a[c]?(t.componentInstance=a[c].componentInstance,y(s,c),s.push(c)):(a[c]=t,s.push(c),this.max&&s.length>parseInt(this.max)&&kn(a,s[0],s,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}}};!function(e){var t={get:function(){return U}};Object.defineProperty(e,"config",t),e.util={warn:ce,extend:P,mergeOptions:Le,defineReactive:Oe},e.set=Re,e.delete=ke,e.nextTick=tt,e.observable=function(e){return Te(e),e},e.options=Object.create(null),N.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,P(e.options.components,xn),function(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=k(arguments,1);return n.unshift(this),"function"==typeof e.install?e.install.apply(e,n):"function"==typeof e&&e.apply(null,n),t.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=Le(this.options,e),this}}(e),En(e),function(e){N.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&l(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"==typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}(e)}(_n),Object.defineProperty(_n.prototype,"$isServer",{get:re}),Object.defineProperty(_n.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(_n,"FunctionalRenderContext",{value:At}),_n.version="2.6.11";var In=m("style,class"),An=m("input,textarea,option,select,progress"),Mn=m("contenteditable,draggable,spellcheck"),jn=m("events,caret,typing,plaintext-only"),Dn=m("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Ln="http://www.w3.org/1999/xlink",Nn=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Fn=function(e){return Nn(e)?e.slice(6,e.length):""},Un=function(e){return null==e||!1===e};function $n(e){for(var t=e.data,n=e,r=e;i(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(t=Bn(r.data,t));for(;i(n=n.parent);)n&&n.data&&(t=Bn(t,n.data));return function(e,t){if(i(e)||i(t))return Gn(e,Vn(t));return""}(t.staticClass,t.class)}function Bn(e,t){return{staticClass:Gn(e.staticClass,t.staticClass),class:i(e.class)?[e.class,t.class]:t.class}}function Gn(e,t){return e?t?e+" "+t:e:t||""}function Vn(e){return Array.isArray(e)?function(e){for(var t,n="",r=0,o=e.length;r<o;r++)i(t=Vn(e[r]))&&""!==t&&(n&&(n+=" "),n+=t);return n}(e):c(e)?function(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}(e):"string"==typeof e?e:""}var zn={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Wn=m("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Hn=m("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),qn=function(e){return Wn(e)||Hn(e)};var Jn=Object.create(null);var Xn=m("text,number,password,search,email,tel,url");var Yn=Object.freeze({createElement:function(e,t){var n=document.createElement(e);return"select"!==e?n:(t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)},createElementNS:function(e,t){return document.createElementNS(zn[e],t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},setStyleScope:function(e,t){e.setAttribute(t,"")}}),Kn={create:function(e,t){Zn(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Zn(e,!0),Zn(t))},destroy:function(e){Zn(e,!0)}};function Zn(e,t){var n=e.data.ref;if(i(n)){var r=e.context,o=e.componentInstance||e.elm,a=r.$refs;t?Array.isArray(a[n])?y(a[n],o):a[n]===o&&(a[n]=void 0):e.data.refInFor?Array.isArray(a[n])?a[n].indexOf(o)<0&&a[n].push(o):a[n]=[o]:a[n]=o}}var Qn=new he("",{},[]),er=["create","activate","update","remove","destroy"];function tr(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&i(e.data)===i(t.data)&&function(e,t){if("input"!==e.tag)return!0;var n,r=i(n=e.data)&&i(n=n.attrs)&&n.type,o=i(n=t.data)&&i(n=n.attrs)&&n.type;return r===o||Xn(r)&&Xn(o)}(e,t)||a(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&o(t.asyncFactory.error))}function nr(e,t,n){var r,o,a={};for(r=t;r<=n;++r)i(o=e[r].key)&&(a[o]=r);return a}var rr={create:or,update:or,destroy:function(e){or(e,Qn)}};function or(e,t){(e.data.directives||t.data.directives)&&function(e,t){var n,r,o,i=e===Qn,a=t===Qn,s=ar(e.data.directives,e.context),c=ar(t.data.directives,t.context),u=[],l=[];for(n in c)r=s[n],o=c[n],r?(o.oldValue=r.value,o.oldArg=r.arg,cr(o,"update",t,e),o.def&&o.def.componentUpdated&&l.push(o)):(cr(o,"bind",t,e),o.def&&o.def.inserted&&u.push(o));if(u.length){var d=function(){for(var n=0;n<u.length;n++)cr(u[n],"inserted",t,e)};i?st(t,"insert",d):d()}l.length&&st(t,"postpatch",(function(){for(var n=0;n<l.length;n++)cr(l[n],"componentUpdated",t,e)}));if(!i)for(n in s)c[n]||cr(s[n],"unbind",e,e,a)}(e,t)}var ir=Object.create(null);function ar(e,t){var n,r,o=Object.create(null);if(!e)return o;for(n=0;n<e.length;n++)(r=e[n]).modifiers||(r.modifiers=ir),o[sr(r)]=r,r.def=Ne(t.$options,"directives",r.name);return o}function sr(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function cr(e,t,n,r,o){var i=e.def&&e.def[t];if(i)try{i(n.elm,e,n,r,o)}catch(r){Ge(r,n.context,"directive "+e.name+" "+t+" hook")}}var ur=[Kn,rr];function lr(e,t){var n=t.componentOptions;if(!(i(n)&&!1===n.Ctor.options.inheritAttrs||o(e.data.attrs)&&o(t.data.attrs))){var r,a,s=t.elm,c=e.data.attrs||{},u=t.data.attrs||{};for(r in i(u.__ob__)&&(u=t.data.attrs=P({},u)),u)a=u[r],c[r]!==a&&dr(s,r,a);for(r in(X||K)&&u.value!==c.value&&dr(s,"value",u.value),c)o(u[r])&&(Nn(r)?s.removeAttributeNS(Ln,Fn(r)):Mn(r)||s.removeAttribute(r))}}function dr(e,t,n){e.tagName.indexOf("-")>-1?fr(e,t,n):Dn(t)?Un(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):Mn(t)?e.setAttribute(t,function(e,t){return Un(t)||"false"===t?"false":"contenteditable"===e&&jn(t)?t:"true"}(t,n)):Nn(t)?Un(n)?e.removeAttributeNS(Ln,Fn(t)):e.setAttributeNS(Ln,t,n):fr(e,t,n)}function fr(e,t,n){if(Un(n))e.removeAttribute(t);else{if(X&&!Y&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var r=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",r)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(t,n)}}var pr={create:lr,update:lr};function hr(e,t){var n=t.elm,r=t.data,a=e.data;if(!(o(r.staticClass)&&o(r.class)&&(o(a)||o(a.staticClass)&&o(a.class)))){var s=$n(t),c=n._transitionClasses;i(c)&&(s=Gn(s,Vn(c))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var vr,mr={create:hr,update:hr};function gr(e,t,n){var r=vr;return function o(){var i=t.apply(null,arguments);null!==i&&Sr(e,o,n,r)}}var yr=qe&&!(Q&&Number(Q[1])<=53);function br(e,t,n,r){if(yr){var o=sn,i=t;t=i._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=o||e.timeStamp<=0||e.target.ownerDocument!==document)return i.apply(this,arguments)}}vr.addEventListener(e,t,te?{capture:n,passive:r}:n)}function Sr(e,t,n,r){(r||vr).removeEventListener(e,t._wrapper||t,n)}function wr(e,t){if(!o(e.data.on)||!o(t.data.on)){var n=t.data.on||{},r=e.data.on||{};vr=t.elm,function(e){if(i(e.__r)){var t=X?"change":"input";e[t]=[].concat(e.__r,e[t]||[]),delete e.__r}i(e.__c)&&(e.change=[].concat(e.__c,e.change||[]),delete e.__c)}(n),at(n,r,br,Sr,gr,t.context),vr=void 0}}var Cr,_r={create:wr,update:wr};function Er(e,t){if(!o(e.data.domProps)||!o(t.data.domProps)){var n,r,a=t.elm,s=e.data.domProps||{},c=t.data.domProps||{};for(n in i(c.__ob__)&&(c=t.data.domProps=P({},c)),s)n in c||(a[n]="");for(n in c){if(r=c[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),r===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n&&"PROGRESS"!==a.tagName){a._value=r;var u=o(r)?"":String(r);Tr(a,u)&&(a.value=u)}else if("innerHTML"===n&&Hn(a.tagName)&&o(a.innerHTML)){(Cr=Cr||document.createElement("div")).innerHTML="<svg>"+r+"</svg>";for(var l=Cr.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}else if(r!==s[n])try{a[n]=r}catch(e){}}}}function Tr(e,t){return!e.composing&&("OPTION"===e.tagName||function(e,t){var n=!0;try{n=document.activeElement!==e}catch(e){}return n&&e.value!==t}(e,t)||function(e,t){var n=e.value,r=e._vModifiers;if(i(r)){if(r.number)return v(n)!==v(t);if(r.trim)return n.trim()!==t.trim()}return n!==t}(e,t))}var Or={create:Er,update:Er},Rr=w((function(e){var t={},n=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach((function(e){if(e){var r=e.split(n);r.length>1&&(t[r[0].trim()]=r[1].trim())}})),t}));function kr(e){var t=Pr(e.style);return e.staticStyle?P(e.staticStyle,t):t}function Pr(e){return Array.isArray(e)?x(e):"string"==typeof e?Rr(e):e}var xr,Ir=/^--/,Ar=/\s*!important$/,Mr=function(e,t,n){if(Ir.test(t))e.style.setProperty(t,n);else if(Ar.test(n))e.style.setProperty(O(t),n.replace(Ar,""),"important");else{var r=Dr(t);if(Array.isArray(n))for(var o=0,i=n.length;o<i;o++)e.style[r]=n[o];else e.style[r]=n}},jr=["Webkit","Moz","ms"],Dr=w((function(e){if(xr=xr||document.createElement("div").style,"filter"!==(e=_(e))&&e in xr)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<jr.length;n++){var r=jr[n]+t;if(r in xr)return r}}));function Lr(e,t){var n=t.data,r=e.data;if(!(o(n.staticStyle)&&o(n.style)&&o(r.staticStyle)&&o(r.style))){var a,s,c=t.elm,u=r.staticStyle,l=r.normalizedStyle||r.style||{},d=u||l,f=Pr(t.data.style)||{};t.data.normalizedStyle=i(f.__ob__)?P({},f):f;var p=function(e,t){var n,r={};if(t)for(var o=e;o.componentInstance;)(o=o.componentInstance._vnode)&&o.data&&(n=kr(o.data))&&P(r,n);(n=kr(e.data))&&P(r,n);for(var i=e;i=i.parent;)i.data&&(n=kr(i.data))&&P(r,n);return r}(t,!0);for(s in d)o(p[s])&&Mr(c,s,"");for(s in p)(a=p[s])!==d[s]&&Mr(c,s,null==a?"":a)}}var Nr={create:Lr,update:Lr},Fr=/\s+/;function Ur(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Fr).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function $r(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Fr).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{for(var n=" "+(e.getAttribute("class")||"")+" ",r=" "+t+" ";n.indexOf(r)>=0;)n=n.replace(r," ");(n=n.trim())?e.setAttribute("class",n):e.removeAttribute("class")}}function Br(e){if(e){if("object"==typeof e){var t={};return!1!==e.css&&P(t,Gr(e.name||"v")),P(t,e),t}return"string"==typeof e?Gr(e):void 0}}var Gr=w((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),Vr=W&&!Y,zr="transition",Wr="transitionend",Hr="animation",qr="animationend";Vr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(zr="WebkitTransition",Wr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Hr="WebkitAnimation",qr="webkitAnimationEnd"));var Jr=W?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Xr(e){Jr((function(){Jr(e)}))}function Yr(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),Ur(e,t))}function Kr(e,t){e._transitionClasses&&y(e._transitionClasses,t),$r(e,t)}function Zr(e,t,n){var r=eo(e,t),o=r.type,i=r.timeout,a=r.propCount;if(!o)return n();var s="transition"===o?Wr:qr,c=0,u=function(){e.removeEventListener(s,l),n()},l=function(t){t.target===e&&++c>=a&&u()};setTimeout((function(){c<a&&u()}),i+1),e.addEventListener(s,l)}var Qr=/\b(transform|all)(,|$)/;function eo(e,t){var n,r=window.getComputedStyle(e),o=(r[zr+"Delay"]||"").split(", "),i=(r[zr+"Duration"]||"").split(", "),a=to(o,i),s=(r[Hr+"Delay"]||"").split(", "),c=(r[Hr+"Duration"]||"").split(", "),u=to(s,c),l=0,d=0;return"transition"===t?a>0&&(n="transition",l=a,d=i.length):"animation"===t?u>0&&(n="animation",l=u,d=c.length):d=(n=(l=Math.max(a,u))>0?a>u?"transition":"animation":null)?"transition"===n?i.length:c.length:0,{type:n,timeout:l,propCount:d,hasTransform:"transition"===n&&Qr.test(r[zr+"Property"])}}function to(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return no(t)+no(e[n])})))}function no(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function ro(e,t){var n=e.elm;i(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var r=Br(e.data.transition);if(!o(r)&&!i(n._enterCb)&&1===n.nodeType){for(var a=r.css,s=r.type,u=r.enterClass,l=r.enterToClass,d=r.enterActiveClass,f=r.appearClass,p=r.appearToClass,h=r.appearActiveClass,m=r.beforeEnter,g=r.enter,y=r.afterEnter,b=r.enterCancelled,S=r.beforeAppear,w=r.appear,C=r.afterAppear,_=r.appearCancelled,E=r.duration,T=Xt,O=Xt.$vnode;O&&O.parent;)T=O.context,O=O.parent;var R=!T._isMounted||!e.isRootInsert;if(!R||w||""===w){var k=R&&f?f:u,P=R&&h?h:d,x=R&&p?p:l,I=R&&S||m,A=R&&"function"==typeof w?w:g,M=R&&C||y,j=R&&_||b,D=v(c(E)?E.enter:E);0;var N=!1!==a&&!Y,F=ao(A),U=n._enterCb=L((function(){N&&(Kr(n,x),Kr(n,P)),U.cancelled?(N&&Kr(n,k),j&&j(n)):M&&M(n),n._enterCb=null}));e.data.show||st(e,"insert",(function(){var t=n.parentNode,r=t&&t._pending&&t._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),A&&A(n,U)})),I&&I(n),N&&(Yr(n,k),Yr(n,P),Xr((function(){Kr(n,k),U.cancelled||(Yr(n,x),F||(io(D)?setTimeout(U,D):Zr(n,s,U)))}))),e.data.show&&(t&&t(),A&&A(n,U)),N||F||U()}}}function oo(e,t){var n=e.elm;i(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var r=Br(e.data.transition);if(o(r)||1!==n.nodeType)return t();if(!i(n._leaveCb)){var a=r.css,s=r.type,u=r.leaveClass,l=r.leaveToClass,d=r.leaveActiveClass,f=r.beforeLeave,p=r.leave,h=r.afterLeave,m=r.leaveCancelled,g=r.delayLeave,y=r.duration,b=!1!==a&&!Y,S=ao(p),w=v(c(y)?y.leave:y);0;var C=n._leaveCb=L((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),b&&(Kr(n,l),Kr(n,d)),C.cancelled?(b&&Kr(n,u),m&&m(n)):(t(),h&&h(n)),n._leaveCb=null}));g?g(_):_()}function _(){C.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),f&&f(n),b&&(Yr(n,u),Yr(n,d),Xr((function(){Kr(n,u),C.cancelled||(Yr(n,l),S||(io(w)?setTimeout(C,w):Zr(n,s,C)))}))),p&&p(n,C),b||S||C())}}function io(e){return"number"==typeof e&&!isNaN(e)}function ao(e){if(o(e))return!1;var t=e.fns;return i(t)?ao(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function so(e,t){!0!==t.data.show&&ro(t)}var co=function(e){var t,n,r={},c=e.modules,u=e.nodeOps;for(t=0;t<er.length;++t)for(r[er[t]]=[],n=0;n<c.length;++n)i(c[n][er[t]])&&r[er[t]].push(c[n][er[t]]);function l(e){var t=u.parentNode(e);i(t)&&u.removeChild(t,e)}function d(e,t,n,o,s,c,l){if(i(e.elm)&&i(c)&&(e=c[l]=ye(e)),e.isRootInsert=!s,!function(e,t,n,o){var s=e.data;if(i(s)){var c=i(e.componentInstance)&&s.keepAlive;if(i(s=s.hook)&&i(s=s.init)&&s(e,!1),i(e.componentInstance))return f(e,t),p(n,e.elm,o),a(c)&&function(e,t,n,o){var a,s=e;for(;s.componentInstance;)if(s=s.componentInstance._vnode,i(a=s.data)&&i(a=a.transition)){for(a=0;a<r.activate.length;++a)r.activate[a](Qn,s);t.push(s);break}p(n,e.elm,o)}(e,t,n,o),!0}}(e,t,n,o)){var d=e.data,v=e.children,m=e.tag;i(m)?(e.elm=e.ns?u.createElementNS(e.ns,m):u.createElement(m,e),y(e),h(e,v,t),i(d)&&g(e,t),p(n,e.elm,o)):a(e.isComment)?(e.elm=u.createComment(e.text),p(n,e.elm,o)):(e.elm=u.createTextNode(e.text),p(n,e.elm,o))}}function f(e,t){i(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,v(e)?(g(e,t),y(e)):(Zn(e),t.push(e))}function p(e,t,n){i(e)&&(i(n)?u.parentNode(n)===e&&u.insertBefore(e,t,n):u.appendChild(e,t))}function h(e,t,n){if(Array.isArray(t)){0;for(var r=0;r<t.length;++r)d(t[r],n,e.elm,null,!0,t,r)}else s(e.text)&&u.appendChild(e.elm,u.createTextNode(String(e.text)))}function v(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return i(e.tag)}function g(e,n){for(var o=0;o<r.create.length;++o)r.create[o](Qn,e);i(t=e.data.hook)&&(i(t.create)&&t.create(Qn,e),i(t.insert)&&n.push(e))}function y(e){var t;if(i(t=e.fnScopeId))u.setStyleScope(e.elm,t);else for(var n=e;n;)i(t=n.context)&&i(t=t.$options._scopeId)&&u.setStyleScope(e.elm,t),n=n.parent;i(t=Xt)&&t!==e.context&&t!==e.fnContext&&i(t=t.$options._scopeId)&&u.setStyleScope(e.elm,t)}function b(e,t,n,r,o,i){for(;r<=o;++r)d(n[r],i,e,t,!1,n,r)}function S(e){var t,n,o=e.data;if(i(o))for(i(t=o.hook)&&i(t=t.destroy)&&t(e),t=0;t<r.destroy.length;++t)r.destroy[t](e);if(i(t=e.children))for(n=0;n<e.children.length;++n)S(e.children[n])}function w(e,t,n){for(;t<=n;++t){var r=e[t];i(r)&&(i(r.tag)?(C(r),S(r)):l(r.elm))}}function C(e,t){if(i(t)||i(e.data)){var n,o=r.remove.length+1;for(i(t)?t.listeners+=o:t=function(e,t){function n(){0==--n.listeners&&l(e)}return n.listeners=t,n}(e.elm,o),i(n=e.componentInstance)&&i(n=n._vnode)&&i(n.data)&&C(n,t),n=0;n<r.remove.length;++n)r.remove[n](e,t);i(n=e.data.hook)&&i(n=n.remove)?n(e,t):t()}else l(e.elm)}function _(e,t,n,r){for(var o=n;o<r;o++){var a=t[o];if(i(a)&&tr(e,a))return o}}function E(e,t,n,s,c,l){if(e!==t){i(t.elm)&&i(s)&&(t=s[c]=ye(t));var f=t.elm=e.elm;if(a(e.isAsyncPlaceholder))i(t.asyncFactory.resolved)?R(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(a(t.isStatic)&&a(e.isStatic)&&t.key===e.key&&(a(t.isCloned)||a(t.isOnce)))t.componentInstance=e.componentInstance;else{var p,h=t.data;i(h)&&i(p=h.hook)&&i(p=p.prepatch)&&p(e,t);var m=e.children,g=t.children;if(i(h)&&v(t)){for(p=0;p<r.update.length;++p)r.update[p](e,t);i(p=h.hook)&&i(p=p.update)&&p(e,t)}o(t.text)?i(m)&&i(g)?m!==g&&function(e,t,n,r,a){var s,c,l,f=0,p=0,h=t.length-1,v=t[0],m=t[h],g=n.length-1,y=n[0],S=n[g],C=!a;for(0;f<=h&&p<=g;)o(v)?v=t[++f]:o(m)?m=t[--h]:tr(v,y)?(E(v,y,r,n,p),v=t[++f],y=n[++p]):tr(m,S)?(E(m,S,r,n,g),m=t[--h],S=n[--g]):tr(v,S)?(E(v,S,r,n,g),C&&u.insertBefore(e,v.elm,u.nextSibling(m.elm)),v=t[++f],S=n[--g]):tr(m,y)?(E(m,y,r,n,p),C&&u.insertBefore(e,m.elm,v.elm),m=t[--h],y=n[++p]):(o(s)&&(s=nr(t,f,h)),o(c=i(y.key)?s[y.key]:_(y,t,f,h))?d(y,r,e,v.elm,!1,n,p):tr(l=t[c],y)?(E(l,y,r,n,p),t[c]=void 0,C&&u.insertBefore(e,l.elm,v.elm)):d(y,r,e,v.elm,!1,n,p),y=n[++p]);f>h?b(e,o(n[g+1])?null:n[g+1].elm,n,p,g,r):p>g&&w(t,f,h)}(f,m,g,n,l):i(g)?(i(e.text)&&u.setTextContent(f,""),b(f,null,g,0,g.length-1,n)):i(m)?w(m,0,m.length-1):i(e.text)&&u.setTextContent(f,""):e.text!==t.text&&u.setTextContent(f,t.text),i(h)&&i(p=h.hook)&&i(p=p.postpatch)&&p(e,t)}}}function T(e,t,n){if(a(n)&&i(e.parent))e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}var O=m("attrs,class,staticClass,staticStyle,key");function R(e,t,n,r){var o,s=t.tag,c=t.data,u=t.children;if(r=r||c&&c.pre,t.elm=e,a(t.isComment)&&i(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(i(c)&&(i(o=c.hook)&&i(o=o.init)&&o(t,!0),i(o=t.componentInstance)))return f(t,n),!0;if(i(s)){if(i(u))if(e.hasChildNodes())if(i(o=c)&&i(o=o.domProps)&&i(o=o.innerHTML)){if(o!==e.innerHTML)return!1}else{for(var l=!0,d=e.firstChild,p=0;p<u.length;p++){if(!d||!R(d,u[p],n,r)){l=!1;break}d=d.nextSibling}if(!l||d)return!1}else h(t,u,n);if(i(c)){var v=!1;for(var m in c)if(!O(m)){v=!0,g(t,n);break}!v&&c.class&&rt(c.class)}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,s){if(!o(t)){var c,l=!1,f=[];if(o(e))l=!0,d(t,f);else{var p=i(e.nodeType);if(!p&&tr(e,t))E(e,t,f,null,null,s);else{if(p){if(1===e.nodeType&&e.hasAttribute("data-server-rendered")&&(e.removeAttribute("data-server-rendered"),n=!0),a(n)&&R(e,t,f))return T(t,f,!0),e;c=e,e=new he(u.tagName(c).toLowerCase(),{},[],void 0,c)}var h=e.elm,m=u.parentNode(h);if(d(t,f,h._leaveCb?null:m,u.nextSibling(h)),i(t.parent))for(var g=t.parent,y=v(t);g;){for(var b=0;b<r.destroy.length;++b)r.destroy[b](g);if(g.elm=t.elm,y){for(var C=0;C<r.create.length;++C)r.create[C](Qn,g);var _=g.data.hook.insert;if(_.merged)for(var O=1;O<_.fns.length;O++)_.fns[O]()}else Zn(g);g=g.parent}i(m)?w([e],0,0):i(e.tag)&&S(e)}}return T(t,f,l),t.elm}i(e)&&S(e)}}({nodeOps:Yn,modules:[pr,mr,_r,Or,Nr,W?{create:so,activate:so,remove:function(e,t){!0!==e.data.show?oo(e,t):t()}}:{}].concat(ur)});Y&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&go(e,"input")}));var uo={inserted:function(e,t,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?st(n,"postpatch",(function(){uo.componentUpdated(e,t,n)})):lo(e,t,n.context),e._vOptions=[].map.call(e.options,ho)):("textarea"===n.tag||Xn(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",vo),e.addEventListener("compositionend",mo),e.addEventListener("change",mo),Y&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){lo(e,t,n.context);var r=e._vOptions,o=e._vOptions=[].map.call(e.options,ho);if(o.some((function(e,t){return!j(e,r[t])})))(e.multiple?t.value.some((function(e){return po(e,o)})):t.value!==t.oldValue&&po(t.value,o))&&go(e,"change")}}};function lo(e,t,n){fo(e,t,n),(X||K)&&setTimeout((function(){fo(e,t,n)}),0)}function fo(e,t,n){var r=t.value,o=e.multiple;if(!o||Array.isArray(r)){for(var i,a,s=0,c=e.options.length;s<c;s++)if(a=e.options[s],o)i=D(r,ho(a))>-1,a.selected!==i&&(a.selected=i);else if(j(ho(a),r))return void(e.selectedIndex!==s&&(e.selectedIndex=s));o||(e.selectedIndex=-1)}}function po(e,t){return t.every((function(t){return!j(t,e)}))}function ho(e){return"_value"in e?e._value:e.value}function vo(e){e.target.composing=!0}function mo(e){e.target.composing&&(e.target.composing=!1,go(e.target,"input"))}function go(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function yo(e){return!e.componentInstance||e.data&&e.data.transition?e:yo(e.componentInstance._vnode)}var bo={model:uo,show:{bind:function(e,t,n){var r=t.value,o=(n=yo(n)).data&&n.data.transition,i=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&o?(n.data.show=!0,ro(n,(function(){e.style.display=i}))):e.style.display=r?i:"none"},update:function(e,t,n){var r=t.value;!r!=!t.oldValue&&((n=yo(n)).data&&n.data.transition?(n.data.show=!0,r?ro(n,(function(){e.style.display=e.__vOriginalDisplay})):oo(n,(function(){e.style.display="none"}))):e.style.display=r?e.__vOriginalDisplay:"none")},unbind:function(e,t,n,r,o){o||(e.style.display=e.__vOriginalDisplay)}}},So={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function wo(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?wo(zt(t.children)):e}function Co(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var o=n._parentListeners;for(var i in o)t[_(i)]=o[i];return t}function _o(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}var Eo=function(e){return e.tag||Vt(e)},To=function(e){return"show"===e.name},Oo={name:"transition",props:So,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(Eo)).length){0;var r=this.mode;0;var o=n[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return o;var i=wo(o);if(!i)return o;if(this._leaving)return _o(e,o);var a="__transition-"+this._uid+"-";i.key=null==i.key?i.isComment?a+"comment":a+i.tag:s(i.key)?0===String(i.key).indexOf(a)?i.key:a+i.key:i.key;var c=(i.data||(i.data={})).transition=Co(this),u=this._vnode,l=wo(u);if(i.data.directives&&i.data.directives.some(To)&&(i.data.show=!0),l&&l.data&&!function(e,t){return t.key===e.key&&t.tag===e.tag}(i,l)&&!Vt(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var d=l.data.transition=P({},c);if("out-in"===r)return this._leaving=!0,st(d,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),_o(e,o);if("in-out"===r){if(Vt(i))return u;var f,p=function(){f()};st(c,"afterEnter",p),st(c,"enterCancelled",p),st(d,"delayLeave",(function(e){f=e}))}}return o}}},Ro=P({tag:String,moveClass:String},So);function ko(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function Po(e){e.data.newPos=e.elm.getBoundingClientRect()}function xo(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,o=t.top-n.top;if(r||o){e.data.moved=!0;var i=e.elm.style;i.transform=i.WebkitTransform="translate("+r+"px,"+o+"px)",i.transitionDuration="0s"}}delete Ro.mode;var Io={Transition:Oo,TransitionGroup:{props:Ro,beforeMount:function(){var e=this,t=this._update;this._update=function(n,r){var o=Yt(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,o(),t.call(e,n,r)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,o=this.$slots.default||[],i=this.children=[],a=Co(this),s=0;s<o.length;s++){var c=o[s];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))i.push(c),n[c.key]=c,(c.data||(c.data={})).transition=a;else;}if(r){for(var u=[],l=[],d=0;d<r.length;d++){var f=r[d];f.data.transition=a,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?u.push(f):l.push(f)}this.kept=e(t,null,u),this.removed=l}return e(t,null,i)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(ko),e.forEach(Po),e.forEach(xo),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,r=n.style;Yr(n,t),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Wr,n._moveCb=function e(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Wr,e),n._moveCb=null,Kr(n,t))})}})))},methods:{hasMove:function(e,t){if(!Vr)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){$r(n,e)})),Ur(n,t),n.style.display="none",this.$el.appendChild(n);var r=eo(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}}};_n.config.mustUseProp=function(e,t,n){return"value"===n&&An(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},_n.config.isReservedTag=qn,_n.config.isReservedAttr=In,_n.config.getTagNamespace=function(e){return Hn(e)?"svg":"math"===e?"math":void 0},_n.config.isUnknownElement=function(e){if(!W)return!0;if(qn(e))return!1;if(e=e.toLowerCase(),null!=Jn[e])return Jn[e];var t=document.createElement(e);return e.indexOf("-")>-1?Jn[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:Jn[e]=/HTMLUnknownElement/.test(t.toString())},P(_n.options.directives,bo),P(_n.options.components,Io),_n.prototype.__patch__=W?co:I,_n.prototype.$mount=function(e,t){return function(e,t,n){var r;return e.$el=t,e.$options.render||(e.$options.render=me),Qt(e,"beforeMount"),r=function(){e._update(e._render(),n)},new fn(e,r,I,{before:function(){e._isMounted&&!e._isDestroyed&&Qt(e,"beforeUpdate")}},!0),n=!1,null==e.$vnode&&(e._isMounted=!0,Qt(e,"mounted")),e}(this,e=e&&W?function(e){if("string"==typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}(e):void 0,t)},W&&setTimeout((function(){U.devtools&&oe&&oe.emit("init",_n)}),0),t.default=_n}.call(this,n(17),n(225).setImmediate)},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(17))},,function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(16);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(17))},function(e,t,n){var r=n(10),o=n(177),i=n(22),a=n(96),s=n(182),c=n(306),u=o("wks"),l=r.Symbol,d=c?l:l&&l.withoutSetter||a;e.exports=function(e){return i(u,e)||(s&&i(l,e)?u[e]=l[e]:u[e]=d("Symbol."+e)),u[e]}},function(e,t,n){"use strict";var r=n(163),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===o.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:a,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,o=arguments.length;r<o;r++)u(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,o=arguments.length;r<o;r++)u(arguments[r],n);return t},extend:function(e,t,n){return u(t,(function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));
/**
 * @copyright Copyright (c) 2019 Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @author Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 */
const r=new(n(5).default)},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(6),o=n(53).f,i=n(27),a=n(24),s=n(88),c=n(230),u=n(83);e.exports=function(e,t){var n,l,d,f,p,h=e.target,v=e.global,m=e.stat;if(n=v?r:m?r[h]||s(h,{}):(r[h]||{}).prototype)for(l in t){if(f=t[l],d=e.noTargetGet?(p=o(n,l))&&p.value:n[l],!u(v?l:h+(m?".":"#")+l,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(e.sham||d&&d.sham)&&i(f,"sham",!0),a(n,l,f,e)}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),i=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(i).concat([o]).join("\n")}var a,s,c;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],a=i[0],s={id:e+":"+o,css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}n.r(t),n.d(t,"default",(function(){return p}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},a=o&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,u=!1,l=function(){},d=null,f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(e,t,n,o){u=n,d=o||{};var a=r(e,t);return h(a),function(t){for(var n=[],o=0;o<a.length;o++){var s=a[o];(c=i[s.id]).refs--,n.push(c)}t?h(a=r(e,t)):a=[];for(o=0;o<n.length;o++){var c;if(0===(c=n[o]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete i[c.id]}}}}function h(e){for(var t=0;t<e.length;t++){var n=e[t],r=i[n.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(m(n.parts[o]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(o=0;o<n.parts.length;o++)a.push(m(n.parts[o]));i[n.id]={id:n.id,refs:1,parts:a}}}}function v(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function m(e){var t,n,r=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(r){if(u)return l;r.parentNode.removeChild(r)}if(f){var o=c++;r=s||(s=v()),t=b.bind(null,r,o,!1),n=b.bind(null,r,o,!0)}else r=v(),t=S.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var g,y=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function b(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function S(e,t){var n=t.css,r=t.media,o=t.sourceMap;if(r&&e.setAttribute("media",r),d.ssrId&&e.setAttribute("data-vue-ssr-id",t.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},function(e,t,n){var r=n(8);e.exports=!r((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(21),o=n(159),i=n(9),a=n(52),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(i(e),t=a(t,!0),i(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(6),o=n(27),i=n(14),a=n(88),s=n(113),c=n(37),u=c.get,l=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,s){var c=!!s&&!!s.unsafe,u=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||i(n,"name")||o(n,"name",t),l(n).source=d.join("string"==typeof t?t:"")),e!==r?(c?!f&&e[t]&&(u=!0):delete e[t],u?e[t]=n:o(e,t,n)):u?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(28),o=n(173),i=n(34),a=n(92),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(i(e),t=a(t,!0),i(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(21),o=n(23),i=n(46);e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(18);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var r=n(28),o=n(26),i=n(64);e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},,function(e,t,n){"use strict";n.d(t,"i",(function(){return s})),n.d(t,"h",(function(){return c})),n.d(t,"m",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return m})),n.d(t,"a",(function(){return g})),n.d(t,"l",(function(){return y})),n.d(t,"p",(function(){return b})),n.d(t,"k",(function(){return S})),n.d(t,"j",(function(){return w})),n.d(t,"b",(function(){return C})),n.d(t,"o",(function(){return h})),n.d(t,"n",(function(){return v}));var r=n(2),o=n.n(r),i=n(3),a=n(1);
/**
 * @copyright Copyright (c) 2019 Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @author Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 */
const s=async function(){return await o.a.get(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+"room")},c=async function(e){return await o.a.get(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+`room/${e}`)},u=async function(e,t){t=t||"new";const n=[a.d.TYPE.USER,a.d.TYPE.GROUP,a.d.TYPE.CIRCLE];"new"!==t&&n.push(a.d.TYPE.EMAIL);try{return await o.a.get(Object(i.generateOcsUrl)("core/autocomplete",2)+"get",{params:{search:e,itemType:"call",itemId:t,shareTypes:n}})}catch(e){console.debug("Error while searching possible conversations: ",e)}},l=async function(e){try{return await o.a.post(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+"room",{roomType:a.a.TYPE.ONE_TO_ONE,invite:e})}catch(e){console.debug("Error creating new one to one conversation: ",e)}},d=async function(e,t){try{return await o.a.post(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+"room",{roomType:a.a.TYPE.GROUP,invite:e,source:t||"groups"})}catch(e){console.debug("Error creating new group conversation: ",e)}},f=async function(e){try{return await o.a.post(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+"room",{roomType:a.a.TYPE.GROUP,roomName:e})}catch(e){console.debug("Error creating new private conversation: ",e)}},p=async function(e){try{return await o.a.post(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+"room",{roomType:a.a.TYPE.PUBLIC,roomName:e})}catch(e){console.debug("Error creating new public conversation: ",e)}},h=async function(e,t){return await o.a.put(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+`room/${e}/password?password=${t}`)},v=async function(e,t){return await o.a.put(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+`room/${e}`,{roomName:t})},m=async function(e){try{return await o.a.delete(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+`room/${e}`)}catch(e){console.debug("Error while deleting the conversation: ",e)}},g=async function(e){try{return await o.a.post(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+`room/${e}/favorite`)}catch(e){console.debug("Error while adding the conversation to favorites: ",e)}},y=async function(e){try{return await o.a.delete(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+`room/${e}/favorite`)}catch(e){console.debug("Error while removing the conversation from favorites: ",e)}},b=async function(e,t){try{return await o.a.post(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+`room/${e}/notify`,{level:t})}catch(e){console.debug("Error while setting the notification level: ",e)}},S=async function(e){try{return await o.a.post(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+`room/${e}/public`)}catch(e){console.debug("Error while making the conversation public: ",e)}},w=async function(e){try{return await o.a.delete(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+`room/${e}/public`)}catch(e){console.debug("Error while making the conversation private: ",e)}},C=async function(e,t,n){try{return await o.a.put(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+`room/${e}/webinar/lobby`,{state:t,timer:n})}catch(e){console.debug("Error while updating webinar lobby: ",e)}}},function(e,t,n){var r=n(54),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(25);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,n,r){"use strict";var o=r(2),i=r.n(o),a=r(3);
/**
 * @copyright Copyright (c) 2019 Joas Schilling <coding@schilljs.com>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 */
const s=async e=>i.a.get(Object(a.generateOcsUrl)("apps/spreed/api/v1/signaling",2)+e);var c=r(147),u=r(13);
/**
 * @copyright Copyright (c) 2019 Daniel Calviño Sánchez <danxuliu@gmail.com>
 * @copyright Copyright (c) 2019 Ivan Sein <ivan@nextcloud.com>
 * @copyright Copyright (c) 2019 Joachim Bauch <bauch@struktur.de>
 * @copyright Copyright (c) 2019 Joas Schilling <coding@schilljs.com>
 *
 * @author Daniel Calviño Sánchez <danxuliu@gmail.com>
 * @author Ivan Sein <ivan@nextcloud.com>
 * @author Joachim Bauch <bauch@struktur.de>
 * @author Joas Schilling <coding@schilljs.com>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 */
const l={Base:{},Internal:{},Standalone:{},settings:{},async loadSettings(e){const t=await(async e=>i.a.get(Object(a.generateOcsUrl)("apps/spreed/api/v1/signaling",2)+"settings"))();this.settings=t.data.ocs.data},createConnection(){this.settings||console.error("Signaling settings are not yet loaded");const e=this.settings.server;return e&&e.length?new l.Standalone(this.settings,e):new l.Internal(this.settings)}};function d(e){l.Base.prototype.constructor.apply(this,arguments),this.hideWarning=e.hideWarning,this.spreedArrayConnection=[],this.pullMessagesFails=0,this.pullMessagesRequest=null,this.isSendingMessages=!1,this.sendInterval=window.setInterval(function(){this.sendPendingMessages()}.bind(this),500)}function f(e,t){l.Base.prototype.constructor.apply(this,arguments),"string"==typeof t&&(t=[t]);const n=Math.floor(Math.random()*t.length);let r=t[n];0===r.indexOf("https://")?r="wss://"+r.substr(8):0===r.indexOf("http://")&&(r="ws://"+r.substr(7)),"/"===r[r.length-1]&&(r=r.substr(0,r.length-1)),this.url=r+"/spreed",this.initialReconnectIntervalMs=1e3,this.maxReconnectIntervalMs=16e3,this.reconnectIntervalMs=this.initialReconnectIntervalMs,this.joinedUsers={},this.rooms=[],this.connect()}l.Base=function(e){this.settings=e,this.sessionId="",this.currentRoomToken=null,this.currentCallToken=null,this.currentCallFlags=null,this.handlers={},this.features={},this._sendVideoIfAvailable=!0},l.Base.prototype.on=function(e,t){this.handlers.hasOwnProperty(e)?this.handlers[e].push(t):this.handlers[e]=[t];let n=[];switch(e){case"stunservers":case"turnservers":n=this.settings[e]||[],n.length&&t(n)}},l.Base.prototype.off=function(e,t){if(!this.handlers.hasOwnProperty(e))return;let n=this.handlers[e].indexOf(t);for(;-1!==n;)this.handlers[e].splice(n,1),n=this.handlers[e].indexOf(t)},l.Base.prototype._trigger=function(e,t){let n=this.handlers[e];if(n){n=n.slice(0);for(let e=0,r=n.length;e<r;e++){const r=n[e];r.apply(r,t)}}u.a.$emit("Signaling::"+e,t)},l.Base.prototype.isNoMcuWarningEnabled=function(){return!this.settings.hideWarning},l.Base.prototype.getSessionId=function(){return this.sessionId},l.Base.prototype.getCurrentCallFlags=function(){return this.currentCallFlags},l.Base.prototype.disconnect=function(){this.sessionId="",this.currentCallToken=null,this.currentCallFlags=null},l.Base.prototype.hasFeature=function(e){return this.features&&this.features[e]},l.Base.prototype.emit=function(e,t){switch(e){case"joinRoom":this.joinRoom(t);break;case"joinCall":this.joinCall(t,arguments[2]);break;case"leaveRoom":this.leaveCurrentRoom();break;case"leaveCall":this.leaveCurrentCall();break;case"message":this.sendCallMessage(t)}},l.Base.prototype.leaveCurrentRoom=function(){this.currentRoomToken&&(this.leaveRoom(this.currentRoomToken),this.currentRoomToken=null)},l.Base.prototype.leaveCurrentCall=function(){return new Promise((e,t)=>{this.currentCallToken?(this.leaveCall(this.currentCallToken).then(()=>{e()}).catch(e=>{t(e)}),this.currentCallToken=null,this.currentCallFlags=null):e()})},l.Base.prototype.joinRoom=function(e,n){return new Promise((r,o)=>{i.a.post(Object(a.generateOcsUrl)("apps/spreed/api/v1/room",2)+e+"/participants/active",{password:n}).then(function(t){console.log("Joined",t),this.currentRoomToken=e,this._trigger("joinRoom",[e]),r(),this.currentCallToken===e?this.joinCall(e,this.currentCallFlags):(this.currentCallToken=null,this.currentCallFlags=null),this._joinRoomSuccess(e,t.data.ocs.data.sessionId)}.bind(this)).catch(function(n){o(n),403===n.status&&OC.dialogs.prompt(t("spreed","Please enter the password for this call"),t("spreed","Password required"),function(t,n){t&&""!==n&&this.joinRoom(e,n)}.bind(this),!0,t("spreed","Password"),!0).then((function(){const e=$(".oc-dialog:visible");e.find(".ui-icon").remove();const n=e.find("button");n.eq(0).text(t("core","Cancel")),n.eq(1).text(t("core","Submit"))}))}.bind(this))})},l.Base.prototype._leaveRoomSuccess=function(){},l.Base.prototype.leaveRoom=function(e){return this.leaveCurrentCall(),this._trigger("leaveRoom",[e]),this._doLeaveRoom(e),new Promise((t,n)=>{i.a.delete(Object(a.generateOcsUrl)("apps/spreed/api/v1/room",2)+e+"/participants/active").then(function(){this._leaveRoomSuccess(e),t(),e===this.currentRoomToken&&(this.currentRoomToken=null)}.bind(this)).catch((function(){n(new Error)}))})},l.Base.prototype.getSendVideoIfAvailable=function(){return this._sendVideoIfAvailable},l.Base.prototype.setSendVideoIfAvailable=function(e){this._sendVideoIfAvailable=e},l.Base.prototype._joinCallSuccess=function(){},l.Base.prototype.joinCall=function(e,t){return new Promise((n,r)=>{i.a.post(Object(a.generateOcsUrl)("apps/spreed/api/v1/call",2)+e,{flags:t}).then(function(){this.currentCallToken=e,this.currentCallFlags=t,this._trigger("joinCall",[e]),n(),this._joinCallSuccess(e)}.bind(this)).catch((function(){r(new Error),OC.redirect(OC.generateUrl("apps/spreed"))}))})},l.Base.prototype._leaveCallSuccess=function(){},l.Base.prototype.leaveCall=function(e,t){return new Promise((n,r)=>{e?i.a.delete(Object(a.generateOcsUrl)("apps/spreed/api/v1/call",2)+e).then(function(){this._trigger("leaveCall",[e,t]),this._leaveCallSuccess(e),n(),t||e!==this.currentCallToken||(this.currentCallToken=null,this.currentCallFlags=null)}.bind(this)).catch((function(){r(new Error)})):r(new Error)})},d.prototype=new l.Base,d.prototype.constructor=d,l.Internal=d,l.Internal.prototype.disconnect=function(){this.spreedArrayConnection=[],this.sendInterval&&(window.clearInterval(this.sendInterval),this.sendInterval=null),l.Base.prototype.disconnect.apply(this,arguments)},l.Internal.prototype.on=function(e){switch(l.Base.prototype.on.apply(this,arguments),e){case"connect":this._sendMessageWithCallback(e)}},l.Internal.prototype.forceReconnect=function(e,t){e&&console.log("Forced reconnects with a new session are not supported in the internal signaling; same session as before will be used"),void 0!==t&&(this.currentCallFlags=t),this.leaveCall(this.currentCallToken,!0),this.joinCall(this.currentCallToken)},l.Internal.prototype._sendMessageWithCallback=function(e){const t=[{ev:e}];this._sendMessages(t).then(function(t){this._trigger(e,[t.data.ocs.data])}.bind(this)).catch((function(e){console.error(e),OC.Notification.show("Sending signaling message with callback has failed.",{type:"error",timeout:15})}))},l.Internal.prototype._sendMessages=function(e){return i.a.post(Object(a.generateOcsUrl)("apps/spreed/api/v1/signaling",2)+this.currentRoomToken,{messages:JSON.stringify(e)})},l.Internal.prototype._joinRoomSuccess=function(e,t){this.sessionId=t,this._startPullingMessages()},l.Internal.prototype._doLeaveRoom=function(e){},l.Internal.prototype.sendCallMessage=function(e){"answer"===e.type?console.log("ANSWER",e):"offer"===e.type&&console.log("OFFER",e),this.spreedArrayConnection.push({ev:"message",fn:JSON.stringify(e),sessionId:this.sessionId})},l.Internal.prototype._startPullingMessages=function(){if(!this.currentRoomToken)return;null!==this.pullMessagesRequest&&this.pullMessagesRequest("canceled");const{request:e,cancel:t}=Object(c.a)(s);this.pullMessagesRequest=t,e(this.currentRoomToken).then(function(e){this.pullMessagesFails=0,$.each(e.data.ocs.data,function(e,t){switch(this._trigger("onBeforeReceiveMessage",[t]),t.type){case"usersInRoom":this._trigger("usersInRoom",[t.data]),this._trigger("participantListChanged");break;case"message":"string"==typeof t.data&&(t.data=JSON.parse(t.data)),this._trigger("message",[t.data]);break;default:console.log("Unknown Signaling Message")}this._trigger("onAfterReceiveMessage",[t])}.bind(this)),this._startPullingMessages()}.bind(this)).catch(function(e,t){if(0===e.status&&"abort"===t);else if(404===e.status||403===e.status)console.error("Stop pulling messages because room does not exist or is not accessible"),this._trigger("pullMessagesStoppedOnFail");else if(this.currentRoomToken){if(this.pullMessagesFails>=3)return console.error("Stop pulling messages after repeated failures"),void this._trigger("pullMessagesStoppedOnFail");this.pullMessagesFails++,window.setTimeout(function(){this._startPullingMessages()}.bind(this),5e3)}}.bind(this))},l.Internal.prototype.sendPendingMessages=function(){if(!this.spreedArrayConnection.length||this.isSendingMessages)return;const e=this.spreedArrayConnection.length;this.isSendingMessages=!0,this._sendMessages(this.spreedArrayConnection).then(function(){this.spreedArrayConnection.splice(0,e),this.isSendingMessages=!1}.bind(this)).catch(function(){console.log("Sending pending signaling messages has failed."),this.isSendingMessages=!1}.bind(this))},f.prototype=new l.Base,f.prototype.constructor=f,l.Standalone=f,l.Standalone.prototype.reconnect=function(){if(this.reconnectTimer)return;const e=this.reconnectIntervalMs-this.reconnectIntervalMs/2+this.reconnectIntervalMs*Math.random();console.log("Reconnect in",e),this.reconnected=!0,this.reconnectTimer=window.setTimeout(function(){this.reconnectTimer=null,this.connect()}.bind(this),e),this.reconnectIntervalMs=2*this.reconnectIntervalMs,this.reconnectIntervalMs>this.maxReconnectIntervalMs&&(this.reconnectIntervalMs=this.maxReconnectIntervalMs),this.socket&&(this.socket.close(),this.socket=null)},l.Standalone.prototype.connect=function(){console.log("Connecting to",this.url),this.callbacks={},this.id=1,this.pendingMessages=[],this.connected=!1,this._forceReconnect=!1,this.socket=new WebSocket(this.url),window.signalingSocket=this.socket,this.socket.onopen=function(e){console.log("Connected",e),this.reconnectIntervalMs=this.initialReconnectIntervalMs,this.sendHello()}.bind(this),this.socket.onerror=function(e){console.log("Error",e),this.reconnect()}.bind(this),this.socket.onclose=function(e){console.log("Close",e),this.reconnect()}.bind(this),this.socket.onmessage=function(e){let t=e.data;"string"==typeof t&&(t=JSON.parse(t)),console.log("Received",t);const n=t.id;if(n&&this.callbacks.hasOwnProperty(n)){const e=this.callbacks[n];delete this.callbacks[n],e(t)}switch(this._trigger("onBeforeReceiveMessage",[t]),t.type){case"hello":n||this.helloResponseReceived(t);break;case"room":this.currentRoomToken&&t.room.roomid!==this.currentRoomToken?(this._trigger("roomChanged",[this.currentRoomToken,t.room.roomid]),this.joinedUsers={},this.currentRoomToken=null):u.a.$emit("shouldRefreshConversations");break;case"event":this.processEvent(t);break;case"message":t.message.data.from=t.message.sender.sessionid,this._trigger("message",[t.message.data]);break;default:n||console.log("Ignore unknown event",t)}this._trigger("onAfterReceiveMessage",[t])}.bind(this)},l.Standalone.prototype.sendBye=function(){this.connected&&this.doSend({type:"bye",bye:{}}),this.resumeId=null,this.signalingRoomJoined=null},l.Standalone.prototype.disconnect=function(){this.sendBye(),this.socket&&(this.socket.close(),this.socket=null),l.Base.prototype.disconnect.apply(this,arguments)},l.Standalone.prototype.forceReconnect=function(e,t){if(void 0!==t&&(this.currentCallFlags=t),!this.connected){if(!e)return;return this._forceReconnect=!0,this.resumeId=null,void(this.signalingRoomJoined=null)}this._forceReconnect=!1,e&&(this.currentCallToken&&this.leaveCall(this.currentCallToken,!0),this.sendBye()),this.socket&&this.socket.close()},l.Standalone.prototype.sendCallMessage=function(e){this.doSend({type:"message",message:{recipient:{type:"session",sessionid:e.to},data:e}})},l.Standalone.prototype.sendRoomMessage=function(e){this.currentCallToken?this.doSend({type:"message",message:{recipient:{type:"room"},data:e}}):console.warn("Not in a room, not sending room message",e)},l.Standalone.prototype.doSend=function(e,t){if(!this.connected&&"hello"!==e.type||null===this.socket)this.pendingMessages.push([e,t]);else{if(t){const n=this.id++;this.callbacks[n]=t,e.id=""+n}console.log("Sending",e),this.socket.send(JSON.stringify(e))}},l.Standalone.prototype.sendHello=function(){let e;if(this.resumeId)console.log("Trying to resume session",this.sessionId),e={type:"hello",hello:{version:"1.0",resumeid:this.resumeId}};else{this._forceReconnect=!1,e={type:"hello",hello:{version:"1.0",auth:{url:OC.linkToOCS("apps/spreed/api/v1/signaling",2)+"backend",params:{userid:this.settings.userId,ticket:this.settings.ticket}}}}}this.doSend(e,this.helloResponseReceived.bind(this))},l.Standalone.prototype.helloResponseReceived=function(e){if(console.log("Hello response received",e),"hello"!==e.type)return this.resumeId?(this.resumeId="",void this.sendHello()):(console.error("Could not connect to server",e),void this.reconnect());const t=!!this.resumeId;if(this.connected=!0,this._forceReconnect&&t)return console.log("Perform pending forced reconnect"),void this.forceReconnect(!0);let n;if(this.sessionId=e.hello.sessionid,this.resumeId=e.hello.resumeid,this.features={},e.hello.server&&e.hello.server.features){const t=e.hello.server.features;for(n=0;n<t.length;n++)this.features[t[n]]=!0}const r=this.pendingMessages;for(this.pendingMessages=[],n=0;n<r.length;n++){const e=r[n][0],t=r[n][1];this.doSend(e,t)}this._trigger("connect"),!t&&this.currentRoomToken&&this.joinRoom(this.currentRoomToken)},l.Standalone.prototype.joinRoom=function(e){if(!this.sessionId){if(this._pendingJoinRoomPromise&&this._pendingJoinRoomPromise.token===e)return this._pendingJoinRoomPromise;let t,n;return this._pendingJoinRoomPromise&&this._pendingJoinRoomPromise.reject(),this._pendingJoinRoomPromise=new Promise((e,r)=>{t=e,n=r}),this._pendingJoinRoomPromise.resolve=t,this._pendingJoinRoomPromise.reject=n,this._pendingJoinRoomPromise.token=e,console.log("Not connected to signaling server yet, defer joining room",e),this.currentRoomToken=e,this._pendingJoinRoomPromise}if(this._pendingJoinRoomPromise&&this._pendingJoinRoomPromise.token!==e&&(this._pendingJoinRoomPromise.reject(),delete this._pendingJoinRoomPromise),!this._pendingJoinRoomPromise)return l.Base.prototype.joinRoom.apply(this,arguments);const t=this._pendingJoinRoomPromise;return delete this._pendingJoinRoomPromise,l.Base.prototype.joinRoom.apply(this,arguments).then(()=>{t.resolve()}).catch(e=>{t.reject(e)}),t},l.Standalone.prototype._joinRoomSuccess=function(e,t){this.sessionId?(console.log("Join room",e),this.doSend({type:"room",room:{roomid:e,sessionid:t}},function(t){this.joinResponseReceived(t,e)}.bind(this))):console.log("No hello response received yet, not joining room",e)},l.Standalone.prototype.joinCall=function(e,t){if(this.signalingRoomJoined!==e)return console.log("Not joined room yet, not joining call",e),void(this.pendingJoinCall={token:e,flags:t});l.Base.prototype.joinCall.apply(this,arguments)},l.Standalone.prototype._joinCallSuccess=function(){u.a.$emit("shouldRefreshConversations")},l.Standalone.prototype._leaveCallSuccess=function(){u.a.$emit("shouldRefreshConversations")},l.Standalone.prototype.joinResponseReceived=function(e,t){console.log("Joined",e,t),this.signalingRoomJoined=t,this.pendingJoinCall&&t===this.pendingJoinCall.token&&(this.joinCall(this.pendingJoinCall.token,this.pendingJoinCall.flags),this.pendingJoinCall=null),this.roomCollection&&(this.roomCollection.forEach((function(e){e.get("token")===t&&e.set("lastPing",(new Date).getTime()/1e3)})),this.roomCollection.sort())},l.Standalone.prototype._doLeaveRoom=function(e){console.log("Leave room",e),this.doSend({type:"room",room:{roomid:""}},function(e){console.log("Left",e),this.signalingRoomJoined=null;const t=_.keys(this.joinedUsers);t.length&&this._trigger("usersLeft",[t]),this.joinedUsers={}}.bind(this))},l.Standalone.prototype.processEvent=function(e){switch(e.event.target){case"room":this.processRoomEvent(e);break;case"roomlist":this.processRoomListEvent(e);break;case"participants":this.processRoomParticipantsEvent(e);break;default:console.log("Unsupported event target",e)}},l.Standalone.prototype.processRoomEvent=function(e){let t,n=[],r=[];switch(e.event.type){case"join":if(n=e.event.join||[],n.length){console.log("Users joined",n);let e={};for(this.reconnected&&(this.reconnected=!1,e=_.extend({},this.joinedUsers)),t=0;t<n.length;t++)this.joinedUsers[n[t].sessionid]=!0,delete e[n[t].sessionid];e=_.keys(e),e.length&&this._trigger("usersLeft",[e]),this._trigger("usersJoined",[n]),this._trigger("participantListChanged")}break;case"leave":if(r=e.event.leave||[],r.length){for(console.log("Users left",r),t=0;t<r.length;t++)delete this.joinedUsers[r[t]];this._trigger("usersLeft",[r]),this._trigger("participantListChanged")}break;case"message":this.processRoomMessageEvent(e.event.message.data);break;default:console.log("Unknown room event",e)}},l.Standalone.prototype.processRoomMessageEvent=function(e){switch(e.type){case"chat":u.a.$emit("shouldRefreshChatMessages");break;default:console.log("Unknown room message event",e)}},l.Standalone.prototype.processRoomListEvent=function(e){console.log("Room list event",e),u.a.$emit("shouldRefreshConversations")},l.Standalone.prototype.processRoomParticipantsEvent=function(e){switch(e.event.type){case"update":this._trigger("usersChanged",[e.event.update.users||[]]),this._trigger("participantListChanged"),u.a.$emit("shouldRefreshConversations");break;default:console.log("Unknown room participant event",e)}},l.Standalone.prototype.requestOffer=function(e,t){this.hasFeature("mcu")?("string"!=typeof e&&(e=e.sessionId||e.sessionid),console.log("Request offer from",e),this.doSend({type:"message",message:{recipient:{type:"session",sessionid:e},data:{type:"requestoffer",roomType:t}}})):console.warn("Can't request an offer without a MCU.")},l.Standalone.prototype.sendOffer=function(e,t){this.hasFeature("mcu")?("string"!=typeof e&&(e=e.sessionId||e.sessionid),console.log("Send offer to",e),this.doSend({type:"message",message:{recipient:{type:"session",sessionid:e},data:{type:"sendoffer",roomType:t}}})):console.warn("Can't send an offer without a MCU.")};var p=l,h=r(402),v=r.n(h),m=r(1),g=r(131);
/**
 * @copyright Copyright (c) 2019 Daniel Calviño Sánchez <danxuliu@gmail.com>
 * @copyright Copyright (c) 2019 Ivan Sein <ivan@nextcloud.com>
 * @copyright Copyright (c) 2019 Joachim Bauch <bauch@struktur.de>
 * @copyright Copyright (c) 2019 Joas Schilling <coding@schilljs.com>
 *
 * @author Daniel Calviño Sánchez <danxuliu@gmail.com>
 * @author Ivan Sein <ivan@nextcloud.com>
 * @author Joachim Bauch <bauch@struktur.de>
 * @author Joas Schilling <coding@schilljs.com>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 */
let y;const b=[];let S=[],w={},C=null,E=null,T=m.c.CALL_FLAG.DISCONNECTED;const O=[];let R=null;function k(e,t){return e.filter((function(e){return t.indexOf(e)<0}))}function P(e,t){const n=e.getSessionId(),r=e.hasFeature("mcu");if(r&&!y.webrtc.getPeers(n,"screen").length&&(E&&E.end(),E=y.webrtc.createPeer({id:n,type:"screen",sharemyscreen:!0,enableDataChannels:!1,receiveMedia:{offerToReceiveAudio:0,offerToReceiveVideo:0},broadcaster:n}),y.emit("createdPeer",E),E.start()),t!==n)if(r)e.sendOffer(t,"screen");else if(!r){if(!y.webrtc.getPeers(t,"screen").find((function(e){return!0===e.sharemyscreen}))){const e=y.webrtc.createPeer({id:t,type:"screen",sharemyscreen:!0,enableDataChannels:!1,receiveMedia:{offerToReceiveAudio:0,offerToReceiveVideo:0},broadcaster:n});y.emit("createdPeer",e),e.start()}}}function x(e){const t=e.getSessionId();y.webrtc.localStreams.length&&!y.webrtc.getPeers(t,"video").length&&(C&&(y.removePeers(C.id),C.end()),C=y.webrtc.createPeer({id:t,type:"video",enableDataChannels:!0,receiveMedia:{offerToReceiveAudio:0,offerToReceiveVideo:0},sendVideoIfAvailable:e.getSendVideoIfAvailable()}),y.emit("createdPeer",C),C.start())}function I(e){let t=e;return t.hasOwnProperty("inCall")&&(t=t.inCall),t=t||m.c.CALL_FLAG.DISCONNECTED,0!=(t&(m.c.CALL_FLAG.WITH_AUDIO|m.c.CALL_FLAG.WITH_VIDEO))}function A(e,t,n){const r=e.getSessionId(),o=e.hasFeature("mcu");o&&t.length&&x(e),t.forEach((function(t){if(!t.inCall)return;const n=t.sessionId||t.sessionid;if(!n||n===r||-1!==S.indexOf(n))return;S.push(n);const i=t.userId||t.userid||null;let a=R.get(n);a||(a=R.add({peerId:n,webRtc:y})),a.setUserId(i),(e.hasFeature("mcu")&&t&&!I(t)||!e.hasFeature("mcu")&&t&&!I(t)&&!y.webrtc.localStreams.length)&&a.setPeer(null);const s=function(){const t=y.webrtc.createPeer({id:n,type:"video",enableDataChannels:!0,receiveMedia:{offerToReceiveAudio:1,offerToReceiveVideo:1},sendVideoIfAvailable:e.getSendVideoIfAvailable()});y.emit("createdPeer",t),t.start()};y.webrtc.getPeers(n,"video").length||(o?(e.requestOffer(t,"video"),O[t.sessionId]=setInterval((function(){console.log("No offer received for new peer, request offer again"),e.requestOffer(t,"video")}),1e4)):I(T)&&(!I(t)||n<r)?(console.log("Starting call with",t),s()):I(T)&&I(t)&&n>r&&(O[n]=setInterval((function(){y.webrtc.getPeers(n,"video").forEach((function(e){e.end()})),console.log("No offer nor answer received, sending offer again"),s()}),1e4))),y.getLocalScreen()&&P(e,n)})),n.forEach((function(e){console.log("XXX Remove peer",e),y.removePeers(e),R.remove(e),O[e]&&(clearInterval(O[e]),delete O[e])})),S=k(S,n)}function M(e,t){const n=e.getSessionId(),r=[],o={};let i;for(i in T=m.c.CALL_FLAG.DISCONNECTED,t){if(!t.hasOwnProperty(i))continue;const e=t[i];e.inCall&&(i!==n?(r.push(i),o[i]=e):T=e.inCall)}if(!T)return void A(e,[],S);const a=k(r,S),s=k(S,r),c=[];a.forEach((function(e){c.push(o[e])})),(c.length||s.length)&&A(e,c,s)}function j(e,n){R=n,e.on("usersLeft",(function(t){t.forEach((function(e){delete w[e]})),A(e,[],t)})),e.on("usersChanged",(function(t){t.forEach((function(e){const t=e.sessionId||e.sessionid;w[t]=e})),M(e,w)})),e.on("usersInRoom",(function(t){w={},t.forEach((function(e){const t=e.sessionId||e.sessionid;w[t]=e})),M(e,w)})),e.on("leaveCall",(function(e,t){t||y.leaveCall()})),e.on("message",(function(t){if("answer"===t.type&&"video"===t.roomType&&O[t.from])return clearInterval(O[t.from]),void delete O[t.from];if("offer"!==t.type)return;const n=y.webrtc.peers.find((function(e){return!e.sharemyscreen&&(e.id===t.from&&e.type===t.roomType&&e.sid!==t.sid)}));n&&n.end(),"video"===t.roomType&&O[t.from]&&(clearInterval(O[t.from]),delete O[t.from]),T||(console.log("Offer received when not in the call, ignore"),t.type="offer-to-ignore"),e.hasFeature("mcu")&&"screen"===t.roomType&&(t.broadcaster=t.from)})),y=new v.a({remoteVideosEl:"",autoRequestMedia:!0,debug:!1,media:{audio:!0,video:!0},autoAdjustMic:!1,audioFallback:!0,detectSpeakingEvents:!0,connection:e,enableDataChannels:!0,nick:g.a.getters.getDisplayName()}),e.hasFeature("mcu")&&(y.webrtc.config.peerConnectionConfig.sdpSemantics="plan-b"),e.on("pullMessagesStoppedOnFail",(function(){y.leaveCall()})),y.startMedia=function(e){y.joinCall(e)};const r=function(t,n,r){C&&e.hasFeature&&e.hasFeature("mcu")?C.sendDirectly(t,n,r):y.sendDirectlyToAll(t,n,r)};function o(e){e.nickInterval&&(clearInterval(e.nickInterval),e.nickInterval=null)}function i(t){b[t.id]=0,t.pc.addEventListener("iceconnectionstatechange",(function(){switch(t.emit("extendedIceConnectionStateChange",t.pc.iceConnectionState),t.pc.iceConnectionState){case"checking":console.log("Connecting to peer...",t);break;case"connected":case"completed":console.log("Connection established.",t),function(t){if(y.webrtc.isVideoEnabled()?y.emit("videoOn"):y.emit("videoOff"),y.webrtc.isAudioEnabled()?y.emit("audioOn"):y.emit("audioOff"),null===e.settings.userId){const e=localStorage.getItem("nick");r("status","nickChanged",e)}b[t.id]>0&&(b[t.id]=0)}(t);break;case"disconnected":console.log("Disconnected.",t),function(t){setTimeout((function(){"disconnected"===t.pc.iceConnectionState&&(t.emit("extendedIceConnectionStateChange","disconnected-long"),e.hasFeature("mcu")||b[t.id]<5&&"offer"===t.pc.localDescription.type&&"stable"===t.pc.signalingState&&(b[t.id]++,console.log("ICE restart.",t),t.icerestart()))}),5e3)}(t);break;case"failed":console.log("Connection failed.",t),function(t){e.hasFeature("mcu")?(console.log("Request offer again",t),e.requestOffer(t.id,"video"),O[t.id]=setInterval((function(){console.log("No offer received, request offer again",t),e.requestOffer(t.id,"video")}),1e4)):b[t.id]<5?"offer"===t.pc.localDescription.type&&"stable"===t.pc.signalingState&&(b[t.id]++,console.log("ICE restart.",t),t.icerestart()):(console.log("ICE failed after 5 tries.",t),t.emit("extendedIceConnectionStateChange","failed-no-restart"))}(t);break;case"closed":console.log("Connection closed.",t)}}))}function a(e,t,n){const r=$.Deferred();return e.pc.getStats(t).then((function(t){let o=!1;t.forEach((function(t){!o&&t.mediaType===n&&t.hasOwnProperty("bytesReceived")&&t.bytesReceived>0&&(y.emit("unmute",{id:e.id,name:n}),o=!0)})),o?r.resolve():r.reject()})),r}function s(e){e.check_audio_interval&&(clearInterval(e.check_audio_interval),e.check_audio_interval=null),e.check_video_interval&&(clearInterval(e.check_video_interval),e.check_video_interval=null),o(e)}y.on("createdPeer",(function(t){if(console.log("PEER CREATED",t),t.id!==e.getSessionId()&&!t.sharemyscreen){let e=R.get(t.id);e||(e=R.add({peerId:t.id,webRtc:y})),"video"===t.type?e.setPeer(t):e.setScreenPeer(t)}"video"===t.type&&(t.id===e.getSessionId()?(console.log("Not adding ICE connection state handler for own peer",t),function(t){e.hasFeature("mcu")&&(o(t),t.nickInterval=setInterval((function(){let n;n=null===e.settings.userId?localStorage.getItem("nick"):{name:g.a.getters.getDisplayName(),userid:e.settings.userId},t.sendDirectly("status","nickChanged",n)}),1e3))}(t)):i(t),t.getDataChannel("status"))})),y.on("peerStreamAdded",(function(t){e.hasFeature("mcu")&&function(e,t){s(e),e.check_video_interval=setInterval((function(){t.getVideoTracks().forEach((function(t){a(e,t,"video").then((function(){clearInterval(e.check_video_interval),e.check_video_interval=null}))}))}),1e3),e.check_audio_interval=setInterval((function(){t.getAudioTracks().forEach((function(t){a(e,t,"audio").then((function(){clearInterval(e.check_audio_interval),e.check_audio_interval=null}))}))}),1e3)}(t,t.stream)})),y.on("peerStreamRemoved",(function(e){s(e)}));const c=function(e,t){C&&(y.removePeers(C.id),C.end(),C=null),A(e,[],S),w={},S=[],e.forceReconnect(!0,t)};y.webrtc.on("videoOn",(function(){if(e.getSendVideoIfAvailable())return;e.setSendVideoIfAvailable(!0);let t=e.getCurrentCallFlags();t|=m.c.CALL_FLAG.WITH_VIDEO,c(e,t)})),y.webrtc.on("iceFailed",(function(){e.hasFeature("mcu")&&c(e)}));let u=null,l=null;const d=function(){clearTimeout(u),u=null,l&&(OC.Notification.hide(l),l=null)};return y.on("localStreamRequested",(function(){d(),u=setTimeout((function(){l=OC.Notification.show(t("spreed","This is taking longer than expected. Are the media permissions already granted (or rejected)? If yes please restart your browser, as audio and video are failing"),{type:"error"})}),1e4)})),e.on("leaveRoom",(function(t){e.currentRoomToken===t&&d()})),y.on("localMediaStarted",(function(t){console.log("localMediaStarted"),d(),e.hasFeature("mcu")&&x(e)})),y.on("localMediaError",(function(e){let n;console.log("Access to microphone & camera failed",e),d(),"NotSupportedError"===e.name&&y.capabilities.supportRTCPeerConnection||"NotAllowedError"===e.name&&e.message&&-1!==e.message.indexOf("Only secure origins")?(n=t("spreed","Access to microphone & camera is only possible with HTTPS"),n+=": "+t("spreed","Please move your setup to HTTPS")):"NotAllowedError"===e.name?n=t("spreed","Access to microphone & camera was denied"):y.capabilities.support?(n=t("spreed","Error while accessing microphone & camera"),console.log("Error while accessing microphone & camera: ",e.message||e.name)):(console.log("WebRTC not supported"),n=t("spreed","WebRTC is not supported in your browser"),n+=": "+t("spreed","Please use a different browser like Firefox or Chrome")),OC.Notification.show(n,{type:"error",timeout:15})})),y.on("channelOpen",(function(e){console.log("%s datachannel is open",e.label)})),y.on("channelMessage",(function(e,t,n){if("status"===t){if("audioOn"===n.type)y.emit("unmute",{id:e.id,name:"audio"});else if("audioOff"===n.type)y.emit("mute",{id:e.id,name:"audio"});else if("videoOn"===n.type)y.emit("unmute",{id:e.id,name:"video"});else if("videoOff"===n.type)y.emit("mute",{id:e.id,name:"video"});else if("nickChanged"===n.type){const t=n.payload||"";"string"==typeof t?y.emit("nick",{id:e.id,name:n.payload}):y.emit("nick",{id:e.id,name:t.name,userid:t.userid})}}else"hark"===t||console.log("Uknown message from %s datachannel",t,n)})),y.on("speaking",(function(){r("status","speaking")})),y.on("stoppedSpeaking",(function(){r("status","stoppedSpeaking")})),y.on("audioOn",(function(){r("status","audioOn")})),y.on("audioOff",(function(){r("status","audioOff")})),y.on("videoOn",(function(){r("status","videoOn")})),y.on("videoOff",(function(){r("status","videoOff")})),y.on("localScreenAdded",(function(t){const n=e.getSessionId();for(const t in w)w.hasOwnProperty(t)&&w[t].inCall&&t!==n&&P(e,t)})),y.on("localScreenStopped",(function(){e.hasFeature("mcu")&&E&&(E=null,e.sendRoomMessage({roomType:"screen",type:"unshareScreen"}))})),y}var D=r(73);
/**
 *
 * @copyright Copyright (c) 2019, Daniel Calviño Sánchez (danxuliu@gmail.com)
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 */function L(){this.callParticipantModels=[]}
/**
 *
 * @copyright Copyright (c) 2019, Daniel Calviño Sánchez (danxuliu@gmail.com)
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 */
function N(){this.attributes={peerId:null,guestName:null}}
/**
 *
 * @copyright Copyright (c) 2019, Daniel Calviño Sánchez (danxuliu@gmail.com)
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 */
function F(){this.attributes={localStream:null,audioAvailable:!1,audioEnabled:!1,speaking:!1,speakingWhileMuted:!1,currentVolume:-100,volumeThreshold:-100,videoAvailable:!1,videoEnabled:!1,localScreen:null},this._handlers=[],this._handleLocalStreamBound=this._handleLocalStream.bind(this),this._handleLocalStreamRequestFailedBound=this._handleLocalStreamRequestFailed.bind(this),this._handleLocalStreamStoppedBound=this._handleLocalStreamStopped.bind(this),this._handleAudioOnBound=this._handleAudioOn.bind(this),this._handleAudioOffBound=this._handleAudioOff.bind(this),this._handleVolumeChangeBound=this._handleVolumeChange.bind(this),this._handleSpeakingBound=this._handleSpeaking.bind(this),this._handleStoppedSpeakingBound=this._handleStoppedSpeaking.bind(this),this._handleSpeakingWhileMutedBound=this._handleSpeakingWhileMuted.bind(this),this._handleStoppedSpeakingWhileMutedBound=this._handleStoppedSpeakingWhileMuted.bind(this),this._handleVideoOnBound=this._handleVideoOn.bind(this),this._handleVideoOffBound=this._handleVideoOff.bind(this),this._handleLocalScreenBound=this._handleLocalScreen.bind(this),this._handleLocalScreenStoppedBound=this._handleLocalScreenStopped.bind(this)}L.prototype={add:function(e){const t=new D.b(e);return this.callParticipantModels.push(t),t},get:function(e){return this.callParticipantModels.find((function(t){return t.attributes.peerId===e}))},remove:function(e){const t=this.callParticipantModels.findIndex((function(t){return t.attributes.peerId===e}));-1!==t&&this.callParticipantModels.splice(t,1)}},N.prototype={set:function(e,t){this.attributes[e]=t},setWebRtc:function(e){this._webRtc=e,this.set("peerId",this._webRtc.connection.getSessionId()),this.set("guestName",null)},setGuestName:function(e){if(!this._webRtc)throw new Error("WebRtc not initialized yet");this.set("guestName",e),this._webRtc.sendDirectlyToAll("status","nickChanged",e)}},F.prototype={get:function(e){return this.attributes[e]},set:function(e,t){this.attributes[e]=t,this._trigger("change:"+e,[t])},on:function(e,t){this._handlers.hasOwnProperty(e)?this._handlers[e].push(t):this._handlers[e]=[t]},_trigger:function(e,t){let n=this._handlers[e];if(n){t.unshift(this),n=n.slice(0);for(let e=0;e<n.length;e++){const r=n[e];r.apply(r,t)}}},getWebRtc:function(){return this._webRtc},setWebRtc:function(e){this._webRtc&&this._webRtc.webrtc&&(this._webRtc.webrtc.off("localStream",this._handleLocalStreamBound),this._webRtc.webrtc.off("localStreamRequestFailed",this._handleLocalStreamRequestFailedBound),this._webRtc.webrtc.off("localStreamStopped",this._handleLocalStreamStoppedBound),this._webRtc.webrtc.off("audioOn",this._handleAudioOnBound),this._webRtc.webrtc.off("audioOff",this._handleAudioOffBound),this._webRtc.webrtc.off("volumeChange",this._handleVolumeChangeBound),this._webRtc.webrtc.off("speaking",this._handleSpeakingBound),this._webRtc.webrtc.off("stoppedSpeaking",this._handleStoppedSpeakingBound),this._webRtc.webrtc.off("speakingWhileMuted",this._handleSpeakingWhileMutedBound),this._webRtc.webrtc.off("stoppedSpeakingWhileMuted",this._handleStoppedSpeakingWhileMutedBound),this._webRtc.webrtc.off("videoOn",this._handleVideoOnBound),this._webRtc.webrtc.off("videoOff",this._handleVideoOffBound),this._webRtc.webrtc.off("localScreen",this._handleLocalScreenBound),this._webRtc.webrtc.off("localScreenStopped",this._handleLocalScreenStoppedBound)),this._webRtc=e,this.set("localStream",null),this.set("audioAvailable",!1),this.set("audioEnabled",!1),this.set("speaking",!1),this.set("speakingWhileMuted",!1),this.set("currentVolume",-100),this.set("volumeThreshold",-100),this.set("videoAvailable",!1),this.set("videoEnabled",!1),this.set("localScreen",null),this._webRtc.webrtc.on("localStream",this._handleLocalStreamBound),this._webRtc.webrtc.on("localStreamRequestFailed",this._handleLocalStreamRequestFailedBound),this._webRtc.webrtc.on("localStreamStopped",this._handleLocalStreamStoppedBound),this._webRtc.webrtc.on("audioOn",this._handleAudioOnBound),this._webRtc.webrtc.on("audioOff",this._handleAudioOffBound),this._webRtc.webrtc.on("volumeChange",this._handleVolumeChangeBound),this._webRtc.webrtc.on("speaking",this._handleSpeakingBound),this._webRtc.webrtc.on("stoppedSpeaking",this._handleStoppedSpeakingBound),this._webRtc.webrtc.on("speakingWhileMuted",this._handleSpeakingWhileMutedBound),this._webRtc.webrtc.on("stoppedSpeakingWhileMuted",this._handleStoppedSpeakingWhileMutedBound),this._webRtc.webrtc.on("videoOn",this._handleVideoOnBound),this._webRtc.webrtc.on("videoOff",this._handleVideoOffBound),this._webRtc.webrtc.on("localScreen",this._handleLocalScreenBound),this._webRtc.webrtc.on("localScreenStopped",this._handleLocalScreenStoppedBound)},_handleLocalStream:function(e,t){this.set("localStream",t),this._setInitialMediaState(e)},_handleLocalStreamRequestFailed:function(){this.set("localStream",null),this._setInitialMediaState({audio:!1,video:!1})},_setInitialMediaState:function(e){!1!==e.audio?(this.set("audioAvailable",!0),this.get("audioEnabled")?this.enableAudio():this.disableAudio()):(this.set("audioEnabled",!1),this.set("audioAvailable",!1)),!1!==e.video?(this.set("videoAvailable",!0),this.get("videoEnabled")?this.enableVideo():this.disableVideo()):(this.set("videoEnabled",!1),this.set("videoAvailable",!1))},_handleLocalStreamStopped:function(e){this.get("localStream")===e&&this.set("localStream",null)},_handleAudioOn:function(){this.get("audioAvailable")&&this.set("audioEnabled",!0)},_handleAudioOff:function(){this.get("audioAvailable")&&this.set("audioEnabled",!1)},_handleVolumeChange:function(e,t){this.get("audioAvailable")&&(this.set("currentVolume",e),this.set("volumeThreshold",t))},_handleSpeaking:function(){this.get("audioAvailable")&&this.set("speaking",!0)},_handleStoppedSpeaking:function(){this.get("audioAvailable")&&this.set("speaking",!1)},_handleSpeakingWhileMuted:function(){this.get("audioAvailable")&&this.set("speakingWhileMuted",!0)},_handleStoppedSpeakingWhileMuted:function(){this.get("audioAvailable")&&this.set("speakingWhileMuted",!1)},_handleVideoOn:function(){this.get("videoAvailable")&&this.set("videoEnabled",!0)},_handleVideoOff:function(){this.get("videoAvailable")&&this.set("videoEnabled",!1)},_handleLocalScreen:function(e){this.set("localScreen",e)},_handleLocalScreenStopped:function(){this.set("localScreen",null)},enableAudio:function(){if(!this._webRtc)throw new Error("WebRtc not initialized yet");this.get("audioAvailable")&&this._webRtc.unmute()},disableAudio:function(){if(!this._webRtc)throw new Error("WebRtc not initialized yet");this.get("audioAvailable")?this._webRtc.mute():this.set("audioEnabled",!1)},enableVideo:function(){if(!this._webRtc)throw new Error("WebRtc not initialized yet");this.get("videoAvailable")&&this._webRtc.resumeVideo()},disableVideo:function(){if(!this._webRtc)throw new Error("WebRtc not initialized yet");this.get("videoAvailable")?this._webRtc.pauseVideo():this.set("videoEnabled",!1)},shareScreen:function(e,t){if(!this._webRtc)throw new Error("WebRtc not initialized yet");this._webRtc.shareScreen(e,t)},stopSharingScreen:function(){if(!this._webRtc)throw new Error("WebRtc not initialized yet");this._webRtc.stopScreenShare()}},r.d(n,"a",(function(){return G})),r.d(n,"f",(function(){return V})),r.d(n,"g",(function(){return z})),r.d(n,"b",(function(){return H})),r.d(n,"c",(function(){return q})),r.d(n,"d",(function(){return J})),r.d(n,"e",(function(){return Z}));
/**
 *
 * @copyright Copyright (c) 2019, Daniel Calviño Sánchez (danxuliu@gmail.com)
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 */
let U=null,B=null;const G=new L,V=new N,z=new F;let W=null;async function H(){if(!U)return W||(W=new Promise((e,t)=>{p.loadSettings(null).then(()=>{U=p.createConnection(),u.a.$emit("signalingConnectionEstablished"),W=null,e()})}),W)}async function q(){return await H(),U}function J(){return U}let X=null,Y=null;function K(e){let t=m.c.CALL_FLAG.IN_CALL;e&&(e.audio&&(t|=m.c.CALL_FLAG.WITH_AUDIO),e.video&&U.getSendVideoIfAvailable()&&(t|=m.c.CALL_FLAG.WITH_VIDEO)),U.joinCall(X,t),Y()}async function Z(e){return await H(),B||(B=j(U,G),V.setWebRtc(B),z.setWebRtc(B),B.on("localMediaStarted",(function(e){K(e)})),B.on("localMediaError",(function(){K(null)}))),X=e,new Promise((t,n)=>{Y=t,B.startMedia(e)})}},function(e,t,n){var r=n(40);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r,o,i,a=n(270),s=n(6),c=n(16),u=n(27),l=n(14),d=n(80),f=n(75),p=s.WeakMap;if(a){var h=new p,v=h.get,m=h.has,g=h.set;r=function(e,t){return g.call(h,e,t),t},o=function(e){return v.call(h,e)||{}},i=function(e){return m.call(h,e)}}else{var y=d("state");f[y]=!0,r=function(e,t){return u(e,y,t),t},o=function(e){return l(e,y)?e[y]:{}},i=function(e){return l(e,y)}}e.exports={set:r,get:o,has:i,enforce:function(e){return i(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(17))},function(e,t,n){var r=n(72),o=n(40);e.exports=function(e){return r(o(e))}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var r=n(231),o=n(6),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e])||i(o[e]):r[e]&&r[e][t]||o[e]&&o[e][t]}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"h",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"g",(function(){return v})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return g})),n.d(t,"k",(function(){return y}));var r=n(2),o=n.n(r),i=n(3),a=n(35),s=n(13);
/**
 * @copyright Copyright (c) 2019 Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @author Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 */
const c=async e=>{try{const t=await Object(a.c)();await t.joinRoom(e),s.a.$emit("joinedConversation")}catch(e){console.debug(e)}},u=async function(e){try{const t=await Object(a.c)();await t.leaveRoom(e)}catch(e){console.debug(e)}},l=function(e){o.a.delete(Object(i.generateOcsUrl)("apps/spreed/api/v1/room",2)+e+"/participants/active")},d=async function(e,t,n){return await o.a.post(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+`room/${e}/participants`,{newParticipant:t,source:n})},f=async function(e){return await o.a.delete(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+`room/${e}/participants/self`)},p=async function(e,t){try{return await o.a.delete(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+`room/${e}/participants`,{params:{participant:t}})}catch(e){console.debug(e)}},h=async function(e,t){try{return await o.a.delete(Object(i.generateOcsUrl)("apps/spreed/api/v1",2)+`room/${e}/participants/guests`,{params:{participant:t}})}catch(e){console.debug(e)}},v=async(e,t)=>await o.a.post(Object(i.generateOcsUrl)("apps/spreed/api/v1/room",2)+e+"/moderators",t),m=async(e,t)=>await o.a.delete(Object(i.generateOcsUrl)("apps/spreed/api/v1/room",2)+e+"/moderators",{params:t}),g=async e=>await o.a.get(Object(i.generateOcsUrl)("apps/spreed/api/v1/room",2)+e+"/participants"),y=async(e,t)=>await o.a.post(Object(i.generateOcsUrl)("apps/spreed/api/v1/guest",2)+e+"/name",{displayName:t})},,,function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports=!1},function(e,t,n){var r=n(10),o=n(29),i=n(22),a=n(93),s=n(175),c=n(66),u=c.get,l=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,s){var c=!!s&&!!s.unsafe,u=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||i(n,"name")||o(n,"name",t),l(n).source=d.join("string"==typeof t?t:"")),e!==r?(c?!f&&e[t]&&(u=!0):delete e[t],u?e[t]=n:o(e,t,n)):u?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},function(e,t){e.exports={}},,function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.extractVersion=a,t.wrapPeerConnectionEvent=function(e,t,n){if(!e.RTCPeerConnection)return;var r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return o.apply(this,arguments);var i=function(e){var t=n(e);t&&r(t)};return this._eventMap=this._eventMap||{},this._eventMap[r]=i,o.apply(this,[e,i])};var i=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return i.apply(this,arguments);var r=this._eventMap[n];return delete this._eventMap[n],i.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})},t.disableLog=function(e){if("boolean"!=typeof e)return new Error("Argument type: "+r(e)+". Please use a boolean.");return o=e,e?"adapter.js logging disabled":"adapter.js logging enabled"},t.disableWarnings=function(e){if("boolean"!=typeof e)return new Error("Argument type: "+r(e)+". Please use a boolean.");return i=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled")},t.log=function(){if("object"===("undefined"==typeof window?"undefined":r(window))){if(o)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},t.deprecated=function(e,t){if(!i)return;console.warn(e+" is deprecated, please use "+t+" instead.")},t.detectBrowser=function(e){var t=e.navigator,n={browser:null,version:null};if(void 0===e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=a(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)n.browser="chrome",n.version=a(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=a(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=a(t.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return n},t.compactObject=function e(t){if(!s(t))return t;return Object.keys(t).reduce((function(n,r){var o=s(t[r]),i=o?e(t[r]):t[r],a=o&&!Object.keys(i).length;return void 0===i||a?n:Object.assign(n,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},r,i))}),{})},t.walkStats=c,t.filterStats=function(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;var i=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)})),i.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&c(e,n,o)}))})),o};var o=!0,i=!0;function a(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function s(e){return"[object Object]"===Object.prototype.toString.call(e)}function c(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((function(r){r.endsWith("Id")?c(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){c(e,e.get(t),n)}))})))}},function(e,t,n){var r=n(16);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(21),o=n(126),i=n(46),a=n(39),s=n(52),c=n(14),u=n(159),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=a(e),t=s(t,!0),u)try{return l(e,t)}catch(e){}if(c(e,t))return i(!o.f.call(e,t),e[t])}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},,,function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},,function(e,t,n){var r,o=n(9),i=n(199),a=n(89),s=n(75),c=n(200),u=n(112),l=n(80),d=l("IE_PROTO"),f=function(){},p=function(e){return"<script>"+e+"<\/script>"},h=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;h=r?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=u("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var n=a.length;n--;)delete h.prototype[a[n]];return h()};s[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f.prototype=o(e),n=new f,f.prototype=null,n[d]=e):n=h(),void 0===t?n:i(n,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getRequestToken",{enumerable:!0,get:function(){return r.getRequestToken}}),Object.defineProperty(t,"onRequestTokenUpdate",{enumerable:!0,get:function(){return r.onRequestTokenUpdate}}),Object.defineProperty(t,"getCurrentUser",{enumerable:!0,get:function(){return o.getCurrentUser}});var r=n(290),o=n(336)},,,function(e,t,n){var r=n(10),o=n(171).f,i=n(29),a=n(48),s=n(93),c=n(298),u=n(179);e.exports=function(e,t){var n,l,d,f,p,h=e.target,v=e.global,m=e.stat;if(n=v?r:m?r[h]||s(h,{}):(r[h]||{}).prototype)for(l in t){if(f=t[l],d=e.noTargetGet?(p=o(n,l))&&p.value:n[l],!u(v?l:h+(m?".":"#")+l,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(e.sham||d&&d.sham)&&i(f,"sham",!0),a(n,l,f,e)}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(172),o=n(91);e.exports=function(e){return r(o(e))}},function(e,t,n){var r,o,i,a=n(297),s=n(10),c=n(25),u=n(29),l=n(22),d=n(94),f=n(67),p=s.WeakMap;if(a){var h=new p,v=h.get,m=h.has,g=h.set;r=function(e,t){return g.call(h,e,t),t},o=function(e){return v.call(h,e)||{}},i=function(e){return m.call(h,e)}}else{var y=d("state");f[y]=!0,r=function(e,t){return u(e,y,t),t},o=function(e){return l(e,y)?e[y]:{}},i=function(e){return l(e,y)}}e.exports={set:r,get:o,has:i,enforce:function(e){return i(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t){e.exports={}},function(e,t,n){var r=n(300),o=n(10),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e])||i(o[e]):r[e]&&r[e][t]||o[e]&&o[e][t]}},function(e,t,n){var r=n(97),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},,,function(e,t,n){var r=n(8),o=n(30),i="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));
/**
 *
 * @copyright Copyright (c) 2019, Daniel Calviño Sánchez (danxuliu@gmail.com)
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 */
const r={NEW:"new",CHECKING:"checking",CONNECTED:"connected",COMPLETED:"completed",DISCONNECTED:"disconnected",DISCONNECTED_LONG:"disconnected-long",FAILED:"failed",FAILED_NO_RESTART:"failed-no-restart",CLOSED:"closed"};function o(e){this.attributes={peerId:null,userId:void 0,name:void 0,connectionState:r.NEW,stream:null,audioAvailable:void 0,speaking:void 0,videoAvailable:void 0,screen:null},this.set("peerId",e.peerId),this._webRtc=e.webRtc,this._handlePeerStreamAddedBound=this._handlePeerStreamAdded.bind(this),this._handlePeerStreamRemovedBound=this._handlePeerStreamRemoved.bind(this),this._handleNickBound=this._handleNick.bind(this),this._handleMuteBound=this._handleMute.bind(this),this._handleUnmuteBound=this._handleUnmute.bind(this),this._handleExtendedIceConnectionStateChangeBound=this._handleExtendedIceConnectionStateChange.bind(this),this._handleChannelMessageBound=this._handleChannelMessage.bind(this),this._webRtc.on("peerStreamAdded",this._handlePeerStreamAddedBound),this._webRtc.on("peerStreamRemoved",this._handlePeerStreamRemovedBound),this._webRtc.on("nick",this._handleNickBound),this._webRtc.on("mute",this._handleMuteBound),this._webRtc.on("unmute",this._handleUnmuteBound),this._webRtc.on("channelMessage",this._handleChannelMessageBound)}o.prototype={get:function(e){return this.attributes[e]},set:function(e,t){this.attributes[e]=t},_handlePeerStreamAdded:function(e){this._peer===e?(this.set("stream",this._peer.stream||null),void 0!==this._peer.nick&&this.set("name",this._peer.nick)):this._screenPeer===e&&this.set("screen",this._screenPeer.stream||null)},_handlePeerStreamRemoved:function(e){this._peer===e?(this.set("stream",null),this.set("audioAvailable",void 0),this.set("speaking",void 0),this.set("videoAvailable",void 0)):this._screenPeer===e&&this.set("screen",null)},_handleNick:function(e){this._peer&&this._peer.id===e.id&&(this.set("userId",e.userid||null),this.set("name",e.name||null))},_handleMute:function(e){this._peer&&this._peer.id===e.id&&("video"===e.name?this.set("videoAvailable",!1):(this.set("audioAvailable",!1),this.set("speaking",!1)))},_handleUnmute:function(e){this._peer&&this._peer.id===e.id&&("video"===e.name?this.set("videoAvailable",!0):this.set("audioAvailable",!0))},_handleChannelMessage:function(e,t,n){this._peer&&this._peer.id===e.id&&"status"===t&&("speaking"===n.type?this.set("speaking",!0):"stoppedSpeaking"===n.type&&this.set("speaking",!1))},setPeer:function(e){if(e&&this.get("peerId")!==e.id&&console.warn("Mismatch between stored peer ID and ID of given peer: ",this.get("peerId"),e.id),this._peer&&this._peer.off("extendedIceConnectionStateChange",this._handleExtendedIceConnectionStateChangeBound),this._peer=e,!this._peer)return this.set("connectionState",r.COMPLETED),this.set("audioAvailable",!1),this.set("speaking",!1),void this.set("videoAvailable",!1);this._handleExtendedIceConnectionStateChange(this._peer.pc.iceConnectionState),this._handlePeerStreamAdded(this._peer),this._peer.on("extendedIceConnectionStateChange",this._handleExtendedIceConnectionStateChangeBound)},_handleExtendedIceConnectionStateChange:function(e){const t=function(){void 0!==this._peer.nick&&this.set("name",this._peer.nick)}.bind(this);switch(e){case"new":this.set("connectionState",r.NEW),this.set("audioAvailable",void 0),this.set("speaking",void 0),this.set("videoAvailable",void 0);break;case"checking":this.set("connectionState",r.CHECKING),this.set("audioAvailable",void 0),this.set("speaking",void 0),this.set("videoAvailable",void 0);break;case"connected":this.set("connectionState",r.CONNECTED),t();break;case"completed":this.set("connectionState",r.COMPLETED),t();break;case"disconnected":this.set("connectionState",r.DISCONNECTED);break;case"disconnected-long":this.set("connectionState",r.DISCONNECTED_LONG);break;case"failed":this.set("connectionState",r.FAILED);break;case"failed-no-restart":this.set("connectionState",r.FAILED_NO_RESTART);break;case"closed":this.set("connectionState",r.CLOSED);break;default:console.error("Unexpected (extended) ICE connection state: ",e)}},setScreenPeer:function(e){this.get("peerId")!==e.id&&console.warn("Mismatch between stored peer ID and ID of given screen peer: ",this.get("peerId"),e.id),this._screenPeer=e,this._handlePeerStreamAdded(this._screenPeer)},setUserId:function(e){this.set("userId",e)}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports={}},,,,,function(e,t,n){var r=n(132),o=n(133),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},,function(e,t,n){var r=n(160),o=n(89).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(8),o=/#|\.prototype\./,i=function(e,t){var n=s[a(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},a=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";e.exports=i},,,function(e,t,n){var r=n(602);e.exports=function(e,t,n){var o,i=t,a={autoplay:!0,mirror:!1,muted:!1,audio:!1,disableContextMenu:!1};if(n)for(o in n)a[o]=n[o];return i?"audio"===i.tagName.toLowerCase()&&(a.audio=!0):i=document.createElement(a.audio?"audio":"video"),a.disableContextMenu&&(i.oncontextmenu=function(e){e.preventDefault()}),a.autoplay&&(i.autoplay="autoplay"),i.muted=!!a.muted,a.audio||["","moz","webkit","o","ms"].forEach((function(e){var t=e?e+"Transform":"transform";i.style[t]=a.mirror?"scaleX(-1)":"scaleX(1)"})),"safari"===r.browserDetails.browser&&i.setAttribute("playsinline",!0),i.srcObject=e,i}},,function(e,t,n){var r=n(6),o=n(27);e.exports=function(e,t){try{o(r,e,t)}catch(n){r[e]=t}return t}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var r=n(25);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(10),o=n(29);e.exports=function(e,t){try{o(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(177),o=n(96),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,t){e.exports=!1},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var r=n(91);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(309);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r,o=n(34),i=n(311),a=n(98),s=n(67),c=n(313),u=n(174),l=n(94),d=l("IE_PROTO"),f=function(){},p=function(e){return"<script>"+e+"<\/script>"},h=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;h=r?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=u("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var n=a.length;n--;)delete h.prototype[a[n]];return h()};s[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f.prototype=o(e),n=new f,f.prototype=null,n[d]=e):n=h(),void 0===t?n:i(n,t)}},function(e,t,n){"use strict";var r=n(63),o=n(314),i=n(189),a=n(190),s=n(103),c=n(29),u=n(48),l=n(11),d=n(95),f=n(49),p=n(188),h=p.IteratorPrototype,v=p.BUGGY_SAFARI_ITERATORS,m=l("iterator"),g=function(){return this};e.exports=function(e,t,n,l,p,y,b){o(n,t,l);var S,w,C,_=function(e){if(e===p&&k)return k;if(!v&&e in O)return O[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},E=t+" Iterator",T=!1,O=e.prototype,R=O[m]||O["@@iterator"]||p&&O[p],k=!v&&R||_(p),P="Array"==t&&O.entries||R;if(P&&(S=i(P.call(new e)),h!==Object.prototype&&S.next&&(d||i(S)===h||(a?a(S,h):"function"!=typeof S[m]&&c(S,m,g)),s(S,E,!0,!0),d&&(f[E]=g))),"values"==p&&R&&"values"!==R.name&&(T=!0,k=function(){return R.call(this)}),d&&!b||O[m]===k||c(O,m,k),f[t]=k,p)if(w={values:_("values"),keys:y?k:_("keys"),entries:_("entries")},b)for(C in w)!v&&!T&&C in O||u(O,C,w[C]);else r({target:t,proto:!0,forced:v||T},w);return w}},function(e,t,n){var r=n(26).f,o=n(22),i=n(11)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){var r={};r[n(11)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){var r=n(42);e.exports=!r((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(105),o=n(344),i=n(340);e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(138);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},,,,,function(e,t,n){var r=n(6),o=n(16),i=r.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){var r=n(158),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return o.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r,o,i,a,s,c,u,l;e.exports=(l=n(269),o=(r=l).lib,i=o.WordArray,a=o.Hasher,s=r.algo,c=[],u=s.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=0;u<80;u++){if(u<16)c[u]=0|e[t+u];else{var l=c[u-3]^c[u-8]^c[u-14]^c[u-16];c[u]=l<<1|l>>>31}var d=(r<<5|r>>>27)+s+c[u];d+=u<20?1518500249+(o&i|~o&a):u<40?1859775393+(o^i^a):u<60?(o&i|o&a|i&a)-1894007588:(o^i^a)-899497514,s=a,a=i,i=o<<30|o>>>2,o=r,r=d}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=a._createHelper(u),r.HmacSHA1=a._createHmacHelper(u),l.SHA1)},,,,,,,,,,,,function(e,t,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);t.f=i?function(e){var t=o(this,e);return!!t&&t.enumerable}:r},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(160),o=n(89);e.exports=Object.keys||function(e){return r(e,o)}},,,function(e,n,r){"use strict";var o=r(5),i=r(157),a=r(114),s=r.n(a),c=r(1);var u={state:{userId:null,sessionId:null,sessionHash:null,actorId:null,actorType:null,displayName:""},mutations:{setUserId(e,t){e.userId=t,e.actorId=t},setSessionId(e,t){e.sessionId=t,e.sessionHash=s()(t)},setActorId(e,t){e.actorId=t},setDisplayName(e,t){e.displayName=t},setActorType(e,t){e.actorType=t}},getters:{getUserId:e=>()=>e.userId,getSessionId:e=>()=>e.sessionId,getSessionHash:e=>()=>e.sessionHash,getActorId:e=>()=>e.actorId,getActorType:e=>()=>e.actorType,getDisplayName:e=>()=>e.displayName,getParticipantIdentifier:e=>()=>"guests"===e.actorType?{sessionId:e.sessionId}:{participant:e.userId}},actions:{setCurrentUser(e,t){e.commit("setUserId",t.uid),e.commit("setDisplayName",t.displayName||t.uid),e.commit("setActorType","users")},setCurrentParticipant(e,t){e.commit("setSessionId",t.sessionId),t.participantType!==c.c.TYPE.GUEST&&t.participantType!==c.c.TYPE.GUEST_MODERATOR||(e.commit("setUserId",null),e.commit("setActorType","guests"),e.commit("setActorId","guest/"+e.getters.getSessionHash()))},setDisplayName(e,t){e.commit("setDisplayName",t)}}},l=r(32),d=r(60);var f={state:{conversations:{}},mutations:{addConversation(e,t){o.default.set(e.conversations,t.token,t)},deleteConversation(e,t){o.default.delete(e.conversations,t)},purgeConversationsStore(e){Object.assign(e,{conversations:{}})}},getters:{conversations:e=>e.conversations,conversationsList:e=>Object.values(e.conversations)},actions:{addConversation(e,t){e.commit("addConversation",t);let n={uid:e.getters.getUserId(),displayName:e.getters.getDisplayName()};n.uid||(n=Object(d.getCurrentUser)()),e.dispatch("addParticipantOnce",{token:t.token,participant:{inCall:t.participantFlags,lastPing:t.lastPing,sessionId:t.sessionId,participantType:t.participantType,userId:n?n.uid:"",displayName:n&&n.displayName?n.displayName:""}})},deleteConversation(e,t){e.commit("deleteConversation",t.token)},deleteConversationByToken(e,t){e.commit("deleteConversation",t)},purgeConversationsStore(e){e.commit("purgeConversationsStore")},async toggleGuests({commit:e,getters:t},{token:n,allowGuests:r}){const o=Object.assign({},t.conversations[n]);o&&(r?(await Object(l.k)(n),o.type=c.a.TYPE.PUBLIC):(await Object(l.j)(n),o.type=c.a.TYPE.GROUP),e("addConversation",o))},async toggleFavorite({commit:e,getters:t},{token:n,isFavorite:r}){const o=Object.assign({},t.conversations[n]);o&&(r?await Object(l.l)(n):await Object(l.a)(n),o.isFavorite=!r,e("addConversation",o))},async toggleLobby({commit:e,getters:t},{token:n,enableLobby:r}){const o=Object.assign({},t.conversations[n]);o&&(r?(await Object(l.b)(n,c.e.LOBBY.NON_MODERATORS),o.lobbyState=c.e.LOBBY.NON_MODERATORS):(await Object(l.b)(n,c.e.LOBBY.NONE),o.lobbyState=c.e.LOBBY.NONE),e("addConversation",o))},async setLobbyTimer({commit:e,getters:t},{token:n,timestamp:r}){const o=Object.assign({},t.conversations[n]);o&&(await Object(l.b)(n,o.lobbyState,r),o.lobbyTimer=r,e("addConversation",o))},async markConversationRead({commit:e,getters:t},n){const r=Object.assign({},t.conversations[n]);r&&(r.unreadMessages=0,r.unreadMention=!1,e("addConversation",r))}}};
/**
 * @copyright Copyright (c) 2019 Joas Schilling <coding@schilljs.com>
 *
 * @author Joas Schilling <coding@schilljs.com>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 */var p={state:{guestNames:{}},mutations:{addGuestName(e,{noUpdate:n,token:r,actorId:i,actorDisplayName:a}){if(e.guestNames[r]||o.default.set(e.guestNames,r,[]),e.guestNames[r][i]){if(n)return}else o.default.set(e.guestNames[r],i,t("spreed","Guest"));e.guestNames[r][i]=a}},getters:{getGuestName:e=>(n,r)=>e.guestNames[n]&&e.guestNames[n][r]?e.guestNames[n][r]:t("spreed","Guest")},actions:{setGuestNameIfEmpty(e,{token:t,actorId:n,actorDisplayName:r}){e.commit("addGuestName",{noUpdate:!0,token:t,actorId:n,actorDisplayName:r})},forceGuestName(e,{token:t,actorId:n,actorDisplayName:r}){e.commit("addGuestName",{noUpdate:!1,token:t,actorId:n,actorDisplayName:r})}}};
/**
 * @copyright Copyright (c) 2019 Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @author Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 */var h={state:{messages:{},firstKnown:{},lastKnown:{}},mutations:{addMessage(e,t){e.messages[t.token]||o.default.set(e.messages,t.token,{}),e.messages[t.token][t.id]?o.default.set(e.messages[t.token],t.id,Object.assign(e.messages[t.token][t.id],t)):o.default.set(e.messages[t.token],t.id,t)},deleteMessage(e,t){o.default.delete(e.messages[t.token],t.id)},addTemporaryMessage(e,t){o.default.set(e.messages[t.token],t.id,t)},setFirstKnownMessageId(e,{token:t,id:n}){o.default.set(e.firstKnown,t,n)},setLastKnownMessageId(e,{token:t,id:n}){o.default.set(e.lastKnown,t,n)}},getters:{messagesList:e=>t=>e.messages[t]?Object.values(e.messages[t]):[],messages:e=>t=>e.messages[t]?e.messages[t]:{},message:e=>(t,n)=>e.messages[t][n]?e.messages[t][n]:{},getFirstKnownMessageId:e=>t=>e.firstKnown[t]?e.firstKnown[t]:null,getLastKnownMessageId:e=>t=>e.lastKnown[t]?e.lastKnown[t]:null},actions:{processMessage(e,t){t.parent&&(e.commit("addMessage",t.parent),t.parent=t.parent.id),e.commit("addMessage",t)},deleteMessage(e,t){e.commit("deleteMessage",t)},addTemporaryMessage(e,t){e.commit("addTemporaryMessage",t)},setFirstKnownMessageId(e,{token:t,id:n}){e.commit("setFirstKnownMessageId",{token:t,id:n})},setLastKnownMessageId(e,{token:t,id:n}){e.commit("setLastKnownMessageId",{token:t,id:n})}}},v=r(43),m=(r(2),r(3),r(35));var g={state:{participants:{}},mutations:{addParticipant(e,{token:t,participant:n}){e.participants[t]||o.default.set(e.participants,t,[]),e.participants[t].push(n)},updateParticipant(e,{token:t,index:n,updatedData:r}){e.participants[t]&&e.participants[t][n]?e.participants[t][n]=Object.assign(e.participants[t][n],r):console.error("Error while updating the participant")},deleteParticipant(e,{token:t,index:n}){e.participants[t]&&e.participants[t][n]?o.default.delete(e.participants[t],n):console.error("The conversation you are trying to purge doesn't exist")},purgeParticipantsStore(e,t){e.participants[t]&&o.default.delete(e.participants,t)}},getters:{participantsList:e=>t=>e.participants[t]?e.participants[t]:[],getParticipant:e=>(t,n)=>e.participants[t]&&e.participants[t][n]?e.participants[t][n]:{},getParticipantIndex:e=>(t,n)=>{if(!e.participants[t])return-1;let r;return r=n.hasOwnProperty("participant")?e.participants[t].findIndex(e=>e.userId===n.participant):e.participants[t].findIndex(e=>e.sessionId===n.sessionId),r}},actions:{addParticipant({commit:e},{token:t,participant:n}){e("addParticipant",{token:t,participant:n})},addParticipantOnce({commit:e,getters:t},{token:n,participant:r}){-1===t.getParticipantIndex(n,r)&&e("addParticipant",{token:n,participant:r})},async promoteToModerator({commit:e,getters:t},{token:n,participantIdentifier:r}){const o=t.getParticipantIndex(n,r);-1!==o&&(await Object(v.g)(n,r),e("updateParticipant",{token:n,index:o,updatedData:{participantType:t.getParticipant(n,o).participantType===c.c.TYPE.GUEST?c.c.TYPE.GUEST_MODERATOR:c.c.TYPE.MODERATOR}}))},async demoteFromModerator({commit:e,getters:t},{token:n,participantIdentifier:r}){const o=t.getParticipantIndex(n,r);-1!==o&&(await Object(v.b)(n,r),e("updateParticipant",{token:n,index:o,updatedData:{participantType:t.getParticipant(n,o).participantType===c.c.TYPE.GUEST_MODERATOR?c.c.TYPE.GUEST:c.c.TYPE.USER}}))},async removeParticipant({commit:e,getters:t},{token:n,participantIdentifier:r}){const o=t.getParticipantIndex(n,r);if(-1===o)return;const i=t.getParticipant(n,o);i.userId?await Object(v.j)(n,i.userId):await Object(v.i)(n,i.sessionId),e("deleteParticipant",{token:n,index:o})},purgeParticipantsStore({commit:e},t){e("purgeParticipantsStore",t)},async joinCall({commit:e,getters:t},{token:n,participantIdentifier:r,flags:o}){const i=t.getParticipantIndex(n,r);-1!==i?(await async function(e,t){try{await Object(m.e)(e)}catch(e){console.debug("Error while joining call: ",e)}}(n),e("updateParticipant",{token:n,index:i,updatedData:{inCall:o}})):console.error("Participant not found",r)},async leaveCall({commit:e,getters:t},{token:n,participantIdentifier:r}){const o=t.getParticipantIndex(n,r);-1!==o&&(await async function(e){try{const e=await Object(m.c)();await e.leaveCurrentCall()}catch(e){console.debug("Error while leaving call: ",e)}}(),e("updateParticipant",{token:n,index:o,updatedData:{inCall:c.c.CALL_FLAG.DISCONNECTED}}))}}};
/**
 * @copyright Copyright (c) 2019 Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @author Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 */var y={state:{messagesToBeReplied:{}},mutations:{addMessageToBeReplied(e,t){o.default.set(e.messagesToBeReplied,[t.token],t)},removeMessageToBeReplied(e,t){o.default.delete(e.messagesToBeReplied,t)}},getters:{getMessageToBeReplied:e=>t=>{if(e.messagesToBeReplied[t])return e.messagesToBeReplied[t]}},actions:{addMessageToBeReplied(e,t){e.commit("addMessageToBeReplied",t)},removeMessageToBeReplied(e,t){e.commit("removeMessageToBeReplied",t)}}};
/**
 * @copyright Copyright (c) 2019 Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @author Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 */var b={state:{show:!0},mutations:{showSidebar(e){e.show=!0},hideSidebar(e){e.show=!1}},getters:{getSidebarStatus:e=>()=>e.show},actions:{showSidebar(e){e.commit("showSidebar")},hideSidebar(e){e.commit("hideSidebar")}}};
/**
 * @copyright Copyright (c) 2019 Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @author Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 */var S={state:{token:"",fileIdForToken:null},mutations:{updateToken(e,t){e.token=t},updateTokenAndFileIdForToken(e,{newToken:t,newFileId:n}){e.token=t,e.fileIdForToken=n}},getters:{getToken:e=>()=>e.token,getFileIdForToken:e=>()=>e.fileIdForToken},actions:{updateToken(e,t){e.commit("updateToken",t)},updateTokenAndFileIdForToken(e,{newToken:t,newFileId:n}){e.commit("updateTokenAndFileIdForToken",{newToken:t,newFileId:n})}}};
/**
 * @copyright Copyright (c) 2019 Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @author Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 */var w={state:{visible:!0},mutations:{setVisibility(e,t){e.visible=t}},getters:{windowIsVisible:e=>()=>e.visible},actions:{setWindowVisibility(e,t){e.commit("setVisibility",t)}}};
/**
 * @copyright Copyright (c) 2019 Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @author Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 */o.default.use(i.b);n.a=new i.a({modules:{actorStore:u,conversationsStore:f,guestNameStore:p,messagesStore:h,participantsStore:g,quoteReplyStore:y,sidebarStore:b,tokenStore:S,windowVisibilityStore:w},mutations:{},strict:!1})},function(e,t,n){var r=n(47),o=n(158);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.1",mode:r?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},,,,function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(38),o=n(106),i=n(74),a=n(222),s=n(345),c=n(409),u=c.get,l=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,s){var c=!!s&&!!s.unsafe,u=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||i(n,"name")||o(n,"name",t),l(n).source=d.join("string"==typeof t?t:"")),e!==r?(c?!f&&e[t]&&(u=!0):delete e[t],u?e[t]=n:o(e,t,n)):u?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},,,,,,,function(e,t,n){"use strict";var r=n(2),o=n.n(r);t.a=function(e){const t=o.a.CancelToken.source();return{request:async function(n,r){return e(n,Object.assign({cancelToken:t.token},r))},cancel:t.cancel}}},,,,,,,,,,function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=("undefined"!=typeof window?window:void 0!==e?e:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function o(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function i(e){return null!==e&&"object"==typeof e}var a=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"==typeof n?n():n)||{}},s={namespaced:{configurable:!0}};s.namespaced.get=function(){return!!this._rawModule.namespaced},a.prototype.addChild=function(e,t){this._children[e]=t},a.prototype.removeChild=function(e){delete this._children[e]},a.prototype.getChild=function(e){return this._children[e]},a.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},a.prototype.forEachChild=function(e){o(this._children,e)},a.prototype.forEachGetter=function(e){this._rawModule.getters&&o(this._rawModule.getters,e)},a.prototype.forEachAction=function(e){this._rawModule.actions&&o(this._rawModule.actions,e)},a.prototype.forEachMutation=function(e){this._rawModule.mutations&&o(this._rawModule.mutations,e)},Object.defineProperties(a.prototype,s);var c=function(e){this.register([],e,!1)};c.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},c.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return e+((t=t.getChild(n)).namespaced?n+"/":"")}),"")},c.prototype.update=function(e){!function e(t,n,r){0;if(n.update(r),r.modules)for(var o in r.modules){if(!n.getChild(o))return void 0;e(t.concat(o),n.getChild(o),r.modules[o])}}([],this.root,e)},c.prototype.register=function(e,t,n){var r=this;void 0===n&&(n=!0);var i=new a(t,n);0===e.length?this.root=i:this.get(e.slice(0,-1)).addChild(e[e.length-1],i);t.modules&&o(t.modules,(function(t,o){r.register(e.concat(o),t,n)}))},c.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];t.getChild(n).runtime&&t.removeChild(n)};var u;var l=function(e){var t=this;void 0===e&&(e={}),!u&&"undefined"!=typeof window&&window.Vue&&y(window.Vue);var n=e.plugins;void 0===n&&(n=[]);var o=e.strict;void 0===o&&(o=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new c(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new u,this._makeLocalGettersCache=Object.create(null);var i=this,a=this.dispatch,s=this.commit;this.dispatch=function(e,t){return a.call(i,e,t)},this.commit=function(e,t,n){return s.call(i,e,t,n)},this.strict=o;var l=this._modules.root.state;v(this,l,[],this._modules.root),h(this,l),n.forEach((function(e){return e(t)})),(void 0!==e.devtools?e.devtools:u.config.devtools)&&function(e){r&&(e._devtoolHook=r,r.emit("vuex:init",e),r.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){r.emit("vuex:mutation",e,t)})))}(this)},d={state:{configurable:!0}};function f(e,t){return t.indexOf(e)<0&&t.push(e),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function p(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;v(e,n,[],e._modules.root,!0),h(e,n,t)}function h(e,t,n){var r=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var i=e._wrappedGetters,a={};o(i,(function(t,n){a[n]=function(e,t){return function(){return e(t)}}(t,e),Object.defineProperty(e.getters,n,{get:function(){return e._vm[n]},enumerable:!0})}));var s=u.config.silent;u.config.silent=!0,e._vm=new u({data:{$$state:t},computed:a}),u.config.silent=s,e.strict&&function(e){e._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}(e),r&&(n&&e._withCommit((function(){r._data.$$state=null})),u.nextTick((function(){return r.$destroy()})))}function v(e,t,n,r,o){var i=!n.length,a=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[a],e._modulesNamespaceMap[a]=r),!i&&!o){var s=m(t,n.slice(0,-1)),c=n[n.length-1];e._withCommit((function(){u.set(s,c,r.state)}))}var l=r.context=function(e,t,n){var r=""===t,o={dispatch:r?e.dispatch:function(n,r,o){var i=g(n,r,o),a=i.payload,s=i.options,c=i.type;return s&&s.root||(c=t+c),e.dispatch(c,a)},commit:r?e.commit:function(n,r,o){var i=g(n,r,o),a=i.payload,s=i.options,c=i.type;s&&s.root||(c=t+c),e.commit(c,a,s)}};return Object.defineProperties(o,{getters:{get:r?function(){return e.getters}:function(){return function(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach((function(o){if(o.slice(0,r)===t){var i=o.slice(r);Object.defineProperty(n,i,{get:function(){return e.getters[o]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}(e,t)}},state:{get:function(){return m(e.state,n)}}}),o}(e,a,n);r.forEachMutation((function(t,n){!function(e,t,n,r){(e._mutations[t]||(e._mutations[t]=[])).push((function(t){n.call(e,r.state,t)}))}(e,a+n,t,l)})),r.forEachAction((function(t,n){var r=t.root?n:a+n,o=t.handler||t;!function(e,t,n,r){(e._actions[t]||(e._actions[t]=[])).push((function(t){var o,i=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},t);return(o=i)&&"function"==typeof o.then||(i=Promise.resolve(i)),e._devtoolHook?i.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):i}))}(e,r,o,l)})),r.forEachGetter((function(t,n){!function(e,t,n,r){if(e._wrappedGetters[t])return void 0;e._wrappedGetters[t]=function(e){return n(r.state,r.getters,e.state,e.getters)}}(e,a+n,t,l)})),r.forEachChild((function(r,i){v(e,t,n.concat(i),r,o)}))}function m(e,t){return t.length?t.reduce((function(e,t){return e[t]}),e):e}function g(e,t,n){return i(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}function y(e){u&&e===u||
/**
 * vuex v3.1.2
 * (c) 2019 Evan You
 * @license MIT
 */
function(e){if(Number(e.version.split(".")[0])>=2)e.mixin({beforeCreate:n});else{var t=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[n].concat(e.init):n,t.call(this,e)}}function n(){var e=this.$options;e.store?this.$store="function"==typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}(u=e)}d.state.get=function(){return this._vm._data.$$state},d.state.set=function(e){0},l.prototype.commit=function(e,t,n){var r=this,o=g(e,t,n),i=o.type,a=o.payload,s=(o.options,{type:i,payload:a}),c=this._mutations[i];c&&(this._withCommit((function(){c.forEach((function(e){e(a)}))})),this._subscribers.forEach((function(e){return e(s,r.state)})))},l.prototype.dispatch=function(e,t){var n=this,r=g(e,t),o=r.type,i=r.payload,a={type:o,payload:i},s=this._actions[o];if(s){try{this._actionSubscribers.filter((function(e){return e.before})).forEach((function(e){return e.before(a,n.state)}))}catch(e){0}return(s.length>1?Promise.all(s.map((function(e){return e(i)}))):s[0](i)).then((function(e){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(a,n.state)}))}catch(e){0}return e}))}},l.prototype.subscribe=function(e){return f(e,this._subscribers)},l.prototype.subscribeAction=function(e){return f("function"==typeof e?{before:e}:e,this._actionSubscribers)},l.prototype.watch=function(e,t,n){var r=this;return this._watcherVM.$watch((function(){return e(r.state,r.getters)}),t,n)},l.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},l.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),v(this,this.state,e,this._modules.get(e),n.preserveState),h(this,this.state)},l.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var n=m(t.state,e.slice(0,-1));u.delete(n,e[e.length-1])})),p(this)},l.prototype.hotUpdate=function(e){this._modules.update(e),p(this,!0)},l.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(l.prototype,d);var b=E((function(e,t){var n={};return _(t).forEach((function(t){var r=t.key,o=t.val;n[r]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var r=T(this.$store,"mapState",e);if(!r)return;t=r.context.state,n=r.context.getters}return"function"==typeof o?o.call(this,t,n):t[o]},n[r].vuex=!0})),n})),S=E((function(e,t){var n={};return _(t).forEach((function(t){var r=t.key,o=t.val;n[r]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=this.$store.commit;if(e){var i=T(this.$store,"mapMutations",e);if(!i)return;r=i.context.commit}return"function"==typeof o?o.apply(this,[r].concat(t)):r.apply(this.$store,[o].concat(t))}})),n})),w=E((function(e,t){var n={};return _(t).forEach((function(t){var r=t.key,o=t.val;o=e+o,n[r]=function(){if(!e||T(this.$store,"mapGetters",e))return this.$store.getters[o]},n[r].vuex=!0})),n})),C=E((function(e,t){var n={};return _(t).forEach((function(t){var r=t.key,o=t.val;n[r]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=this.$store.dispatch;if(e){var i=T(this.$store,"mapActions",e);if(!i)return;r=i.context.dispatch}return"function"==typeof o?o.apply(this,[r].concat(t)):r.apply(this.$store,[o].concat(t))}})),n}));function _(e){return function(e){return Array.isArray(e)||i(e)}(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function E(e){return function(t,n){return"string"!=typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function T(e,t,n){return e._modulesNamespaceMap[n]}var O={Store:l,install:y,version:"3.1.2",mapState:b,mapMutations:S,mapGetters:w,mapActions:C,createNamespacedHelpers:function(e){return{mapState:b.bind(null,e),mapGetters:w.bind(null,e),mapMutations:S.bind(null,e),mapActions:C.bind(null,e)}}};t.b=O}).call(this,n(17))},function(e,t,n){var r=n(6),o=n(88),i=r["__core-js_shared__"]||o("__core-js_shared__",{});e.exports=i},function(e,t,n){var r=n(21),o=n(8),i=n(112);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(14),o=n(39),i=n(198).indexOf,a=n(75);e.exports=function(e,t){var n,s=o(e),c=0,u=[];for(n in s)!r(a,n)&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~i(u,n)||u.push(n));return u}},function(e,t,n){var r=n(54),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},function(e,t,n){"use strict";var r=n(21),o=n(6),i=n(83),a=n(24),s=n(14),c=n(30),u=n(232),l=n(52),d=n(8),f=n(59),p=n(82).f,h=n(53).f,v=n(23).f,m=n(228).trim,g=o.Number,y=g.prototype,b="Number"==c(f(y)),S=function(e){var t,n,r,o,i,a,s,c,u=l(e,!1);if("string"==typeof u&&u.length>2)if(43===(t=(u=m(u)).charCodeAt(0))||45===t){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+u}for(a=(i=u.slice(2)).length,s=0;s<a;s++)if((c=i.charCodeAt(s))<48||c>o)return NaN;return parseInt(i,r)}return+u};if(i("Number",!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var w,C=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof C&&(b?d((function(){y.valueOf.call(n)})):"Number"!=c(n))?u(new g(S(t)),n,C):S(t)},_=r?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;_.length>E;E++)s(g,w=_[E])&&!s(C,w)&&v(C,w,h(g,w));C.prototype=y,y.constructor=C,a(o,"Number",C)}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(12);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))})))})),i=a.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(12),o=n(279),i={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,c={adapter:("undefined"!=typeof XMLHttpRequest?s=n(167):void 0!==t&&"[object process]"===Object.prototype.toString.call(t)&&(s=n(167)),s),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(i)})),e.exports=c}).call(this,n(57))},function(e,t,n){"use strict";var r=n(12),o=n(280),i=n(164),a=n(282),s=n(285),c=n(286),u=n(168);e.exports=function(e){return new Promise((function(t,l){var d=e.data,f=e.headers;r.isFormData(d)&&delete f["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",v=e.auth.password||"";f.Authorization="Basic "+btoa(h+":"+v)}var m=a(e.baseURL,e.url);if(p.open(e.method.toUpperCase(),i(m,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?s(p.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:n,config:e,request:p};o(t,l,r),p=null}},p.onabort=function(){p&&(l(u("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){l(u("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),l(u(t,e,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var g=n(287),y=(e.withCredentials||c(m))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;y&&(f[e.xsrfHeaderName]=y)}if("setRequestHeader"in p&&r.forEach(f,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete f[t]:p.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),l(e),p=null)})),void 0===d&&(d=null),p.send(d)}))}},function(e,t,n){"use strict";var r=n(281);e.exports=function(e,t,n,o,i){var a=new Error(e);return r(a,t,n,o,i)}},function(e,t,n){"use strict";var r=n(12);e.exports=function(e,t){t=t||{};var n={},o=["url","method","params","data"],i=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(o,(function(e){void 0!==t[e]&&(n[e]=t[e])})),r.forEach(i,(function(o){r.isObject(t[o])?n[o]=r.deepMerge(e[o],t[o]):void 0!==t[o]?n[o]=t[o]:r.isObject(e[o])?n[o]=r.deepMerge(e[o]):void 0!==e[o]&&(n[o]=e[o])})),r.forEach(a,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var s=o.concat(i).concat(a),c=Object.keys(t).filter((function(e){return-1===s.indexOf(e)}));return r.forEach(c,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){var r=n(28),o=n(296),i=n(64),a=n(65),s=n(92),c=n(22),u=n(173),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=a(e),t=s(t,!0),u)try{return l(e,t)}catch(e){}if(c(e,t))return i(!o.f.call(e,t),e[t])}},function(e,t,n){var r=n(18),o=n(90),i="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},function(e,t,n){var r=n(28),o=n(18),i=n(174);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(10),o=n(25),i=r.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){var r=n(176),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return o.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r=n(10),o=n(93),i=r["__core-js_shared__"]||o("__core-js_shared__",{});e.exports=i},function(e,t,n){var r=n(95),o=n(176);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.4",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(22),o=n(65),i=n(302).indexOf,a=n(67);e.exports=function(e,t){var n,s=o(e),c=0,u=[];for(n in s)!r(a,n)&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~i(u,n)||u.push(n));return u}},function(e,t,n){var r=n(18),o=/#|\.prototype\./,i=function(e,t){var n=s[a(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},a=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";e.exports=i},function(e,t,n){var r=n(90);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(25),o=n(180),i=n(11)("species");e.exports=function(e,t){var n;return o(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var r=n(18);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t,n){var r=n(18),o=n(11),i=n(184),a=o("species");e.exports=function(e){return i>=51||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,n){var r,o,i=n(10),a=n(307),s=i.process,c=s&&s.versions,u=c&&c.v8;u?o=(r=u.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=r[1]),e.exports=o&&+o},function(e,t,n){var r=n(100),o=n(172),i=n(99),a=n(69),s=n(181),c=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,l=4==e,d=6==e,f=5==e||d;return function(p,h,v,m){for(var g,y,b=i(p),S=o(b),w=r(h,v,3),C=a(S.length),_=0,E=m||s,T=t?E(p,C):n?E(p,0):void 0;C>_;_++)if((f||_ in S)&&(y=w(g=S[_],_,b),e))if(t)T[_]=y;else if(y)switch(e){case 3:return!0;case 5:return g;case 6:return _;case 2:c.call(T,g)}else if(l)return!1;return d?-1:u||l?l:T}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},function(e,t,n){var r=n(28),o=n(18),i=n(22),a=Object.defineProperty,s={},c=function(e){throw e};e.exports=function(e,t){if(i(s,e))return s[e];t||(t={});var n=[][e],u=!!i(t,"ACCESSORS")&&t.ACCESSORS,l=i(t,0)?t[0]:c,d=i(t,1)?t[1]:void 0;return s[e]=!!n&&!o((function(){if(u&&!r)return!0;var e={length:-1};u?a(e,1,{enumerable:!0,get:c}):e[1]=1,n.call(e,l,d)}))}},function(e,t,n){"use strict";var r=n(65),o=n(310),i=n(49),a=n(66),s=n(102),c=a.set,u=a.getterFor("Array Iterator");e.exports=s(Array,"Array",(function(e,t){c(this,{type:"Array Iterator",target:r(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(e,t,n){"use strict";var r,o,i,a=n(189),s=n(29),c=n(22),u=n(11),l=n(95),d=u("iterator"),f=!1;[].keys&&("next"in(i=[].keys())?(o=a(a(i)))!==Object.prototype&&(r=o):f=!0),null==r&&(r={}),l||c(r,d)||s(r,d,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},function(e,t,n){var r=n(22),o=n(99),i=n(94),a=n(315),s=i("IE_PROTO"),c=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=o(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},function(e,t,n){var r=n(34),o=n(316);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return r(n),o(i),t?e.call(n,i):n.__proto__=i,n}}():void 0)},function(e,t,n){var r=n(67),o=n(25),i=n(22),a=n(26).f,s=n(96),c=n(319),u=s("meta"),l=0,d=Object.isExtensible||function(){return!0},f=function(e){a(e,u,{value:{objectID:"O"+ ++l,weakData:{}}})},p=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,u)){if(!d(e))return"F";if(!t)return"E";f(e)}return e[u].objectID},getWeakData:function(e,t){if(!i(e,u)){if(!d(e))return!0;if(!t)return!1;f(e)}return e[u].weakData},onFreeze:function(e){return c&&p.REQUIRED&&d(e)&&!i(e,u)&&f(e),e}};r[u]=!0},function(e,t,n){var r=n(34),o=n(320),i=n(69),a=n(100),s=n(321),c=n(322),u=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,n,l,d){var f,p,h,v,m,g,y,b=a(t,n,l?2:1);if(d)f=e;else{if("function"!=typeof(p=s(e)))throw TypeError("Target is not iterable");if(o(p)){for(h=0,v=i(e.length);v>h;h++)if((m=l?b(r(y=e[h])[0],y[1]):b(e[h]))&&m instanceof u)return m;return new u(!1)}f=p.call(e)}for(g=f.next;!(y=g.call(f)).done;)if("object"==typeof(m=c(f,b,y.value,l))&&m&&m instanceof u)return m;return new u(!1)}).stop=function(e){return new u(!0,e)}},function(e,t,n){var r=n(104),o=n(90),i=n(11)("toStringTag"),a="Arguments"==o(function(){return arguments}());e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:a?o(t):"Object"==(r=o(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},,,function(e,t,n){var r=n(39),o=n(33),i=n(161),a=function(e){return function(t,n,a){var s,c=r(t),u=o(c.length),l=i(a,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t,n){var r=n(21),o=n(23),i=n(9),a=n(128);e.exports=r?Object.defineProperties:function(e,t){i(e);for(var n,r=a(t),s=r.length,c=0;s>c;)o.f(e,n=r[c++],t[n]);return e}},function(e,t,n){var r=n(41);e.exports=r("document","documentElement")},function(e,t,n){var r=n(9),o=n(272);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return r(n),o(i),t?e.call(n,i):n.__proto__=i,n}}():void 0)},function(e,t,n){"use strict";var r=n(21),o=n(8),i=n(128),a=n(127),s=n(126),c=n(36),u=n(72),l=Object.assign,d=Object.defineProperty;e.exports=!l||o((function(){if(r&&1!==l({b:1},l(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||"abcdefghijklmnopqrst"!=i(l({},t)).join("")}))?function(e,t){for(var n=c(e),o=arguments.length,l=1,d=a.f,f=s.f;o>l;)for(var p,h=u(arguments[l++]),v=d?i(h).concat(d(h)):i(h),m=v.length,g=0;m>g;)p=v[g++],r&&!f.call(h,p)||(n[p]=h[p]);return n}:l},,function(e,t,n){var r=n(15),o=n(202);r({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(e,t){function n(){}e.exports=n,n.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(e,t,n){this.callbacks=this.callbacks||{};var r=3===arguments.length,o=r?arguments[1]:void 0,i=r?arguments[2]:arguments[1];return i._groupName=o,(this.callbacks[e]=this.callbacks[e]||[]).push(i),this},t.once=function(e,t,n){var r=this,o=3===arguments.length,i=o?arguments[1]:void 0,a=o?arguments[2]:arguments[1];function s(){r.off(e,s),a.apply(this,arguments)}return this.on(e,i,s),this},t.releaseGroup=function(e){var t,n,r,o;for(t in this.callbacks=this.callbacks||{},this.callbacks)for(n=0,r=(o=this.callbacks[t]).length;n<r;n++)o[n]._groupName===e&&(o.splice(n,1),n--,r--);return this},t.off=function(e,t){this.callbacks=this.callbacks||{};var n,r=this.callbacks[e];return r?1===arguments.length?(delete this.callbacks[e],this):(-1!==(n=r.indexOf(t))&&(r.splice(n,1),0===r.length&&delete this.callbacks[e]),this):this},t.emit=function(e){this.callbacks=this.callbacks||{};var t,n,r,o=[].slice.call(arguments,1),i=this.callbacks[e],a=this.getWildcardCallbacks(e);if(i)for(t=0,n=(r=i.slice()).length;t<n&&r[t];++t)r[t].apply(this,o);if(a)for(n=a.length,t=0,n=(r=a.slice()).length;t<n&&r[t];++t)r[t].apply(this,[e].concat(o));return this},t.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var t,n,r=[];for(t in this.callbacks)n=t.split("*"),("*"===t||2===n.length&&e.slice(0,n[0].length)===n[0])&&(r=r.concat(this.callbacks[t]));return r}},n.mixin(n)},,,,,,,,,,,,,,,function(e,t,n){var r=n(341),o=n(137);e.exports=function(e){return r(o(e))}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(38),o=n(106);e.exports=function(e,t){try{o(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r={};r[n(224)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){var r=n(38),o=n(347),i=n(74),a=n(348),s=n(356),c=n(425),u=o("wks"),l=r.Symbol,d=c?l:a;e.exports=function(e){return i(u,e)||(s&&i(l,e)?u[e]=l[e]:u[e]=d("Symbol."+e)),u[e]}},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(226),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(17))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,o,i,a,s,c=1,u={},l=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){h(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){i.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(o=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&h(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return u[c]=o,r(c),c++},f.clearImmediate=p}function p(e){delete u[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{p(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(17),n(57))},,function(e,t,n){var r=n(40),o="["+n(229)+"]",i=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(i,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,n){var r=n(14),o=n(271),i=n(53),a=n(23);e.exports=function(e,t){for(var n=o(t),s=a.f,c=i.f,u=0;u<n.length;u++){var l=n[u];r(e,l)||s(e,l,c(t,l))}}},function(e,t,n){var r=n(6);e.exports=r},function(e,t,n){var r=n(16),o=n(201);e.exports=function(e,t,n){var i,a;return o&&"function"==typeof(i=t.constructor)&&i!==n&&r(a=i.prototype)&&a!==n.prototype&&o(e,a),e}},,,,,,,,,,,,function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},o=/%[sdj%]/g;t.format=function(e){if(!g(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,a=String(e).replace(o,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),c=r[n];n<i;c=r[++n])v(c)||!S(c)?a+=" "+c:a+=" "+s(c);return a},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var i,a={};function s(e,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),l(r,e,r.depth)}function c(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function u(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&_(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return g(o)||(o=l(e,o,r)),o}var i=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(g(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(m(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(v(t))return e.stylize("null","null")}(e,n);if(i)return i;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),C(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return d(n);if(0===a.length){if(_(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return e.stylize(Date.prototype.toString.call(n),"date");if(C(n))return d(n)}var u,S="",E=!1,T=["{","}"];(p(n)&&(E=!0,T=["[","]"]),_(n))&&(S=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(S=" "+RegExp.prototype.toString.call(n)),w(n)&&(S=" "+Date.prototype.toUTCString.call(n)),C(n)&&(S=" "+d(n)),0!==a.length||E&&0!=n.length?r<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=E?function(e,t,n,r,o){for(var i=[],a=0,s=t.length;a<s;++a)k(t,String(a))?i.push(f(e,t,n,r,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(f(e,t,n,r,o,!0))})),i}(e,n,r,s,a):a.map((function(t){return f(e,n,r,s,t,E)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(u,S,T)):T[0]+S+T[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,o,i){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),k(r,o)||(a="["+o+"]"),s||(e.seen.indexOf(c.value)<0?(s=v(n)?l(e,c.value,null):l(e,c.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),y(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function v(e){return null===e}function m(e){return"number"==typeof e}function g(e){return"string"==typeof e}function y(e){return void 0===e}function b(e){return S(e)&&"[object RegExp]"===E(e)}function S(e){return"object"==typeof e&&null!==e}function w(e){return S(e)&&"[object Date]"===E(e)}function C(e){return S(e)&&("[object Error]"===E(e)||e instanceof Error)}function _(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(y(i)&&(i=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(i)){var r=e.pid;a[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else a[n]=function(){};return a[n]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=h,t.isNull=v,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=g,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=b,t.isObject=S,t.isDate=w,t.isError=C,t.isFunction=_,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(596);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),O[e.getMonth()],t].join(" ")}function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",R(),t.format.apply(t,arguments))},t.inherits=n(597),t._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var P="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function x(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(P&&e[P]){var t;if("function"!=typeof(t=e[P]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,o)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),P&&Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=P,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return o.apply(i,arguments)};t.apply(this,n).then((function(t){e.nextTick(a,null,t)}),(function(t){e.nextTick(x,t,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(57))},function(e,t){var n,r;window.mozRTCPeerConnection||navigator.mozGetUserMedia?(n="moz",r=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10)):(window.webkitRTCPeerConnection||navigator.webkitGetUserMedia)&&(n="webkit",r=navigator.userAgent.match(/Chrom(e|ium)/)&&parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10));var o=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,i=window.mozRTCIceCandidate||window.RTCIceCandidate,a=window.mozRTCSessionDescription||window.RTCSessionDescription,s=window.webkitMediaStream||window.MediaStream,c="https:"===window.location.protocol&&("webkit"===n&&r>=26||"moz"===n&&r>=33),u=window.AudioContext||window.webkitAudioContext,l=document.createElement("video"),d=l&&l.canPlayType&&"probably"===l.canPlayType('video/webm; codecs="vp8", vorbis'),f=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia;e.exports={prefix:n,browserVersion:r,support:!!o&&!!f,supportRTCPeerConnection:!!o,supportVp8:d,supportGetUserMedia:!!f,supportDataChannel:!!(o&&o.prototype&&o.prototype.createDataChannel),supportWebAudio:!(!u||!u.prototype.createMediaStreamSource),supportMediaStream:!(!s||!s.prototype.removeTrack),supportScreenSharing:!!c,AudioContext:u,PeerConnection:o,SessionDescription:a,IceCandidate:i,MediaStream:s,getUserMedia:f}},function(e,t){for(var n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),r=n.length,o=function(){},i={};r--;)i[n[r]]=o;e.exports=i},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r;e.exports=(r=r||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},o=r.lib={},i=o.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=o.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var a=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=a<<24-(r+i)%4*8}else for(i=0;i<o;i+=4)t[r+i>>>2]=n[i>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],o=function(t){t=t;var n=987654321,r=4294967295;return function(){var o=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return o/=4294967296,(o+=.5)*(e.random()>.5?1:-1)}},i=0;i<t;i+=4){var s=o(4294967296*(n||e.random()));n=987654071*s(),r.push(4294967296*s()|0)}return new a.init(r,t)}}),s=r.enc={},c=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},u=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,s=o/(4*i),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,u=e.min(4*c,o);if(c){for(var l=0;l<c;l+=i)this._doProcessBlock(r,l);var d=r.splice(0,c);n.sigBytes-=u}return new a.init(d,u)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(o.Hasher=d.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math),r)},function(e,t,n){var r=n(6),o=n(113),i=r.WeakMap;e.exports="function"==typeof i&&/native code/.test(o(i))},function(e,t,n){var r=n(41),o=n(82),i=n(127),a=n(9);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(16);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){e.exports=n(274)},function(e,t,n){"use strict";var r=n(12),o=n(163),i=n(275),a=n(169);function s(e){var t=new i(e),n=o(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var c=s(n(166));c.Axios=i,c.create=function(e){return s(a(c.defaults,e))},c.Cancel=n(170),c.CancelToken=n(288),c.isCancel=n(165),c.all=function(e){return Promise.all(e)},c.spread=n(289),e.exports=c,e.exports.default=c},function(e,t,n){"use strict";var r=n(12),o=n(164),i=n(276),a=n(277),s=n(169);function c(e){this.defaults=e,this.interceptors={request:new i,response:new i}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},c.prototype.getUri=function(e){return e=s(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,o){return this.request(r.merge(o||{},{method:e,url:t,data:n}))}})),e.exports=c},function(e,t,n){"use strict";var r=n(12);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},function(e,t,n){"use strict";var r=n(12),o=n(278),i=n(165),a=n(166);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=o(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(s(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(12);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t,n){"use strict";var r=n(12);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(168);e.exports=function(e,t,n){var o=n.config.validateStatus;!o||o(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(283),o=n(284);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(12),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,a={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},function(e,t,n){"use strict";var r=n(12);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(12);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(170);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRequestToken=function(){return i},t.onRequestTokenUpdate=function(e){a.push(e)};var r=n(291),o=document.getElementsByTagName("head")[0],i=o?o.getAttribute("data-requesttoken"):null,a=[];(0,r.subscribe)("csrf-token-update",(function(e){i=e.token,a.forEach((function(t){try{t(e.token)}catch(e){console.error("error updating CSRF token observer",e)}}))}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribe=function(e,t){i.subscribe(e,t)},t.unsubscribe=function(e,t){i.unsubscribe(e,t)},t.emit=function(e,t){i.emit(e,t)};var r=n(292),o=n(294);var i=(void 0!==window.OC&&window.OC._eventBus&&void 0===window._nc_event_bus&&(console.warn("found old event bus instance at OC._eventBus. Update your version!"),window._nc_event_bus=window.OC._eventBus),void 0!==window._nc_event_bus?new r.ProxyBus(window._nc_event_bus):window._nc_event_bus=new o.SimpleBus)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyBus=void 0;var r,o=(r=n(293))&&r.__esModule?r:{default:r};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a="1.1.2",s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"bus",void 0),"function"==typeof t.getVersion&&o.default.valid(t.getVersion())?o.default.major(t.getVersion())!==o.default.major(this.getVersion())&&console.warn("Proxying an event bus of version "+t.getVersion()+" with "+this.getVersion()):console.warn("Proxying an event bus with an unknown or invalid version"),this.bus=t}var t,n,r;return t=e,(n=[{key:"getVersion",value:function(){return a}},{key:"subscribe",value:function(e,t){this.bus.subscribe(e,t)}},{key:"unsubscribe",value:function(e,t){this.bus.unsubscribe(e,t)}},{key:"emit",value:function(e,t){this.bus.emit(e,t)}}])&&i(t.prototype,n),r&&i(t,r),e}();t.ProxyBus=s},function(e,t,n){(function(n){var r;t=e.exports=f,r="object"==typeof n&&n.env&&n.env.NODE_DEBUG&&/\bsemver\b/i.test(n.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var o=Number.MAX_SAFE_INTEGER||9007199254740991,i=t.re=[],a=t.src=[],s=t.tokens={},c=0;function u(e){s[e]=c++}u("NUMERICIDENTIFIER"),a[s.NUMERICIDENTIFIER]="0|[1-9]\\d*",u("NUMERICIDENTIFIERLOOSE"),a[s.NUMERICIDENTIFIERLOOSE]="[0-9]+",u("NONNUMERICIDENTIFIER"),a[s.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",u("MAINVERSION"),a[s.MAINVERSION]="("+a[s.NUMERICIDENTIFIER]+")\\.("+a[s.NUMERICIDENTIFIER]+")\\.("+a[s.NUMERICIDENTIFIER]+")",u("MAINVERSIONLOOSE"),a[s.MAINVERSIONLOOSE]="("+a[s.NUMERICIDENTIFIERLOOSE]+")\\.("+a[s.NUMERICIDENTIFIERLOOSE]+")\\.("+a[s.NUMERICIDENTIFIERLOOSE]+")",u("PRERELEASEIDENTIFIER"),a[s.PRERELEASEIDENTIFIER]="(?:"+a[s.NUMERICIDENTIFIER]+"|"+a[s.NONNUMERICIDENTIFIER]+")",u("PRERELEASEIDENTIFIERLOOSE"),a[s.PRERELEASEIDENTIFIERLOOSE]="(?:"+a[s.NUMERICIDENTIFIERLOOSE]+"|"+a[s.NONNUMERICIDENTIFIER]+")",u("PRERELEASE"),a[s.PRERELEASE]="(?:-("+a[s.PRERELEASEIDENTIFIER]+"(?:\\."+a[s.PRERELEASEIDENTIFIER]+")*))",u("PRERELEASELOOSE"),a[s.PRERELEASELOOSE]="(?:-?("+a[s.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+a[s.PRERELEASEIDENTIFIERLOOSE]+")*))",u("BUILDIDENTIFIER"),a[s.BUILDIDENTIFIER]="[0-9A-Za-z-]+",u("BUILD"),a[s.BUILD]="(?:\\+("+a[s.BUILDIDENTIFIER]+"(?:\\."+a[s.BUILDIDENTIFIER]+")*))",u("FULL"),u("FULLPLAIN"),a[s.FULLPLAIN]="v?"+a[s.MAINVERSION]+a[s.PRERELEASE]+"?"+a[s.BUILD]+"?",a[s.FULL]="^"+a[s.FULLPLAIN]+"$",u("LOOSEPLAIN"),a[s.LOOSEPLAIN]="[v=\\s]*"+a[s.MAINVERSIONLOOSE]+a[s.PRERELEASELOOSE]+"?"+a[s.BUILD]+"?",u("LOOSE"),a[s.LOOSE]="^"+a[s.LOOSEPLAIN]+"$",u("GTLT"),a[s.GTLT]="((?:<|>)?=?)",u("XRANGEIDENTIFIERLOOSE"),a[s.XRANGEIDENTIFIERLOOSE]=a[s.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",u("XRANGEIDENTIFIER"),a[s.XRANGEIDENTIFIER]=a[s.NUMERICIDENTIFIER]+"|x|X|\\*",u("XRANGEPLAIN"),a[s.XRANGEPLAIN]="[v=\\s]*("+a[s.XRANGEIDENTIFIER]+")(?:\\.("+a[s.XRANGEIDENTIFIER]+")(?:\\.("+a[s.XRANGEIDENTIFIER]+")(?:"+a[s.PRERELEASE]+")?"+a[s.BUILD]+"?)?)?",u("XRANGEPLAINLOOSE"),a[s.XRANGEPLAINLOOSE]="[v=\\s]*("+a[s.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+a[s.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+a[s.XRANGEIDENTIFIERLOOSE]+")(?:"+a[s.PRERELEASELOOSE]+")?"+a[s.BUILD]+"?)?)?",u("XRANGE"),a[s.XRANGE]="^"+a[s.GTLT]+"\\s*"+a[s.XRANGEPLAIN]+"$",u("XRANGELOOSE"),a[s.XRANGELOOSE]="^"+a[s.GTLT]+"\\s*"+a[s.XRANGEPLAINLOOSE]+"$",u("COERCE"),a[s.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",u("COERCERTL"),i[s.COERCERTL]=new RegExp(a[s.COERCE],"g"),u("LONETILDE"),a[s.LONETILDE]="(?:~>?)",u("TILDETRIM"),a[s.TILDETRIM]="(\\s*)"+a[s.LONETILDE]+"\\s+",i[s.TILDETRIM]=new RegExp(a[s.TILDETRIM],"g");u("TILDE"),a[s.TILDE]="^"+a[s.LONETILDE]+a[s.XRANGEPLAIN]+"$",u("TILDELOOSE"),a[s.TILDELOOSE]="^"+a[s.LONETILDE]+a[s.XRANGEPLAINLOOSE]+"$",u("LONECARET"),a[s.LONECARET]="(?:\\^)",u("CARETTRIM"),a[s.CARETTRIM]="(\\s*)"+a[s.LONECARET]+"\\s+",i[s.CARETTRIM]=new RegExp(a[s.CARETTRIM],"g");u("CARET"),a[s.CARET]="^"+a[s.LONECARET]+a[s.XRANGEPLAIN]+"$",u("CARETLOOSE"),a[s.CARETLOOSE]="^"+a[s.LONECARET]+a[s.XRANGEPLAINLOOSE]+"$",u("COMPARATORLOOSE"),a[s.COMPARATORLOOSE]="^"+a[s.GTLT]+"\\s*("+a[s.LOOSEPLAIN]+")$|^$",u("COMPARATOR"),a[s.COMPARATOR]="^"+a[s.GTLT]+"\\s*("+a[s.FULLPLAIN]+")$|^$",u("COMPARATORTRIM"),a[s.COMPARATORTRIM]="(\\s*)"+a[s.GTLT]+"\\s*("+a[s.LOOSEPLAIN]+"|"+a[s.XRANGEPLAIN]+")",i[s.COMPARATORTRIM]=new RegExp(a[s.COMPARATORTRIM],"g");u("HYPHENRANGE"),a[s.HYPHENRANGE]="^\\s*("+a[s.XRANGEPLAIN]+")\\s+-\\s+("+a[s.XRANGEPLAIN]+")\\s*$",u("HYPHENRANGELOOSE"),a[s.HYPHENRANGELOOSE]="^\\s*("+a[s.XRANGEPLAINLOOSE]+")\\s+-\\s+("+a[s.XRANGEPLAINLOOSE]+")\\s*$",u("STAR"),a[s.STAR]="(<|>)?=?\\s*\\*";for(var l=0;l<c;l++)r(l,a[l]),i[l]||(i[l]=new RegExp(a[l]));function d(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof f)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?i[s.LOOSE]:i[s.FULL]).test(e))return null;try{return new f(e,t)}catch(e){return null}}function f(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof f){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof f))return new f(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var n=e.trim().match(t.loose?i[s.LOOSE]:i[s.FULL]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}t.parse=d,t.valid=function(e,t){var n=d(e,t);return n?n.version:null},t.clean=function(e,t){var n=d(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=f,f.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},f.prototype.toString=function(){return this.version},f.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof f||(e=new f(e,this.options)),this.compareMain(e)||this.comparePre(e)},f.prototype.compareMain=function(e){return e instanceof f||(e=new f(e,this.options)),h(this.major,e.major)||h(this.minor,e.minor)||h(this.patch,e.patch)},f.prototype.comparePre=function(e){if(e instanceof f||(e=new f(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return h(n,o)}while(++t)},f.prototype.compareBuild=function(e){e instanceof f||(e=new f(e,this.options));var t=0;do{var n=this.build[t],o=e.build[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return h(n,o)}while(++t)},f.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new f(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(y(e,t))return null;var n=d(e),r=d(t),o="";if(n.prerelease.length||r.prerelease.length){o="pre";var i="prerelease"}for(var a in n)if(("major"===a||"minor"===a||"patch"===a)&&n[a]!==r[a])return o+a;return i},t.compareIdentifiers=h;var p=/^[0-9]+$/;function h(e,t){var n=p.test(e),r=p.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function v(e,t,n){return new f(e,n).compare(new f(t,n))}function m(e,t,n){return v(e,t,n)>0}function g(e,t,n){return v(e,t,n)<0}function y(e,t,n){return 0===v(e,t,n)}function b(e,t,n){return 0!==v(e,t,n)}function S(e,t,n){return v(e,t,n)>=0}function w(e,t,n){return v(e,t,n)<=0}function C(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return y(e,n,r);case"!=":return b(e,n,r);case">":return m(e,n,r);case">=":return S(e,n,r);case"<":return g(e,n,r);case"<=":return w(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function _(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof _){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof _))return new _(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===E?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return h(t,e)},t.major=function(e,t){return new f(e,t).major},t.minor=function(e,t){return new f(e,t).minor},t.patch=function(e,t){return new f(e,t).patch},t.compare=v,t.compareLoose=function(e,t){return v(e,t,!0)},t.compareBuild=function(e,t,n){var r=new f(e,n),o=new f(t,n);return r.compare(o)||r.compareBuild(o)},t.rcompare=function(e,t,n){return v(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compareBuild(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.compareBuild(r,e,n)}))},t.gt=m,t.lt=g,t.eq=y,t.neq=b,t.gte=S,t.lte=w,t.cmp=C,t.Comparator=_;var E={};function T(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof T)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new T(e.raw,t);if(e instanceof _)return new T(e.value,t);if(!(this instanceof T))return new T(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function O(e,t){for(var n=!0,r=e.slice(),o=r.pop();n&&r.length;)n=r.every((function(e){return o.intersects(e,t)})),o=r.pop();return n}function R(e){return!e||"x"===e.toLowerCase()||"*"===e}function k(e,t,n,r,o,i,a,s,c,u,l,d,f){return((t=R(n)?"":R(r)?">="+n+".0.0":R(o)?">="+n+"."+r+".0":">="+t)+" "+(s=R(c)?"":R(u)?"<"+(+c+1)+".0.0":R(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+s)).trim()}function P(e,t,n){for(var o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(o=0;o<e.length;o++)if(r(e[o].semver),e[o].semver!==E&&e[o].semver.prerelease.length>0){var i=e[o].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function x(e,t,n){try{t=new T(t,n)}catch(e){return!1}return t.test(e)}function I(e,t,n,r){var o,i,a,s,c;switch(e=new f(e,r),t=new T(t,r),n){case">":o=m,i=w,a=g,s=">",c=">=";break;case"<":o=g,i=S,a=m,s="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(x(e,t,r))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,p=null;if(l.forEach((function(e){e.semver===E&&(e=new _(">=0.0.0")),d=d||e,p=p||e,o(e.semver,d.semver,r)?d=e:a(e.semver,p.semver,r)&&(p=e)})),d.operator===s||d.operator===c)return!1;if((!p.operator||p.operator===s)&&i(e,p.semver))return!1;if(p.operator===c&&a(e,p.semver))return!1}return!0}_.prototype.parse=function(e){var t=this.options.loose?i[s.COMPARATORLOOSE]:i[s.COMPARATOR],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new f(n[2],this.options.loose):this.semver=E},_.prototype.toString=function(){return this.value},_.prototype.test=function(e){if(r("Comparator.test",e,this.options.loose),this.semver===E||e===E)return!0;if("string"==typeof e)try{e=new f(e,this.options)}catch(e){return!1}return C(e,this.operator,this.semver,this.options)},_.prototype.intersects=function(e,t){if(!(e instanceof _))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(n=new T(e.value,t),x(this.value,n,t));if(""===e.operator)return""===e.value||(n=new T(this.value,t),x(e.semver,n,t));var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=C(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=C(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||o||i&&a||s||c},t.Range=T,T.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},T.prototype.toString=function(){return this.range},T.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?i[s.HYPHENRANGELOOSE]:i[s.HYPHENRANGE];e=e.replace(n,k),r("hyphen replace",e),e=e.replace(i[s.COMPARATORTRIM],"$1$2$3"),r("comparator trim",e,i[s.COMPARATORTRIM]),e=(e=(e=e.replace(i[s.TILDETRIM],"$1~")).replace(i[s.CARETTRIM],"$1^")).split(/\s+/).join(" ");var o=t?i[s.COMPARATORLOOSE]:i[s.COMPARATOR],a=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?i[s.CARETLOOSE]:i[s.CARET];return e.replace(n,(function(t,n,o,i,a){var s;return r("caret",e,t,n,o,i,a),R(n)?s="":R(o)?s=">="+n+".0.0 <"+(+n+1)+".0.0":R(i)?s="0"===n?">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":">="+n+"."+o+".0 <"+(+n+1)+".0.0":a?(r("replaceCaret pr",a),s="0"===n?"0"===o?">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+"-"+a+" <"+(+n+1)+".0.0"):(r("no pr"),s="0"===n?"0"===o?">="+n+"."+o+"."+i+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+" <"+(+n+1)+".0.0"),r("caret return",s),s}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?i[s.TILDELOOSE]:i[s.TILDE];return e.replace(n,(function(t,n,o,i,a){var s;return r("tilde",e,t,n,o,i,a),R(n)?s="":R(o)?s=">="+n+".0.0 <"+(+n+1)+".0.0":R(i)?s=">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":a?(r("replaceTilde pr",a),s=">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+(+o+1)+".0"):s=">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0",r("tilde return",s),s}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?i[s.XRANGELOOSE]:i[s.XRANGE];return e.replace(n,(function(n,o,i,a,s,c){r("xRange",e,n,o,i,a,s,c);var u=R(i),l=u||R(a),d=l||R(s),f=d;return"="===o&&f&&(o=""),c=t.includePrerelease?"-0":"",u?n=">"===o||"<"===o?"<0.0.0-0":"*":o&&f?(l&&(a=0),s=0,">"===o?(o=">=",l?(i=+i+1,a=0,s=0):(a=+a+1,s=0)):"<="===o&&(o="<",l?i=+i+1:a=+a+1),n=o+i+"."+a+"."+s+c):l?n=">="+i+".0.0"+c+" <"+(+i+1)+".0.0"+c:d&&(n=">="+i+"."+a+".0"+c+" <"+i+"."+(+a+1)+".0"+c),r("xRange return",n),n}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(i[s.STAR],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(o)}))),a=a.map((function(e){return new _(e,this.options)}),this)},T.prototype.intersects=function(e,t){if(!(e instanceof T))throw new TypeError("a Range is required");return this.set.some((function(n){return O(n,t)&&e.set.some((function(e){return O(e,t)&&n.every((function(n){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new T(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},T.prototype.test=function(e){if(!e)return!1;if("string"==typeof e)try{e=new f(e,this.options)}catch(e){return!1}for(var t=0;t<this.set.length;t++)if(P(this.set[t],e,this.options))return!0;return!1},t.satisfies=x,t.maxSatisfying=function(e,t,n){var r=null,o=null;try{var i=new T(t,n)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(r&&-1!==o.compare(e)||(o=new f(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,o=null;try{var i=new T(t,n)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(r&&1!==o.compare(e)||(o=new f(r=e,n)))})),r},t.minVersion=function(e,t){e=new T(e,t);var n=new f("0.0.0");if(e.test(n))return n;if(n=new f("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r){e.set[r].forEach((function(e){var t=new f(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!m(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(n&&e.test(n))return n;return null},t.validRange=function(e,t){try{return new T(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return I(e,t,"<",n)},t.gtr=function(e,t,n){return I(e,t,">",n)},t.outside=I,t.prerelease=function(e,t){var n=d(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new T(e,n),t=new T(t,n),e.intersects(t)},t.coerce=function(e,t){if(e instanceof f)return e;"number"==typeof e&&(e=String(e));if("string"!=typeof e)return null;var n=null;if((t=t||{}).rtl){for(var r;(r=i[s.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&r.index+r[0].length===n.index+n[0].length||(n=r),i[s.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;i[s.COERCERTL].lastIndex=-1}else n=e.match(i[s.COERCE]);if(null===n)return null;return d(n[2]+"."+(n[3]||"0")+"."+(n[4]||"0"),t)}}).call(this,n(57))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(295),n(308),n(187),n(317),n(328),n(330),n(332),n(335),Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleBus=void 0;var o="1.1.2",i=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n="handlers",r=new Map,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n,i;return t=e,(n=[{key:"getVersion",value:function(){return o}},{key:"subscribe",value:function(e,t){this.handlers.set(e,(this.handlers.get(e)||[]).concat(t))}},{key:"unsubscribe",value:function(e,t){this.handlers.set(e,(this.handlers.get(e)||[]).filter((function(e){return e!=t})))}},{key:"emit",value:function(e,t){(this.handlers.get(e)||[]).forEach((function(e){try{e(t)}catch(e){console.error("could not invoke event listener",e)}}))}}])&&r(t.prototype,n),i&&r(t,i),e}();t.SimpleBus=i},function(e,t,n){"use strict";var r=n(63),o=n(18),i=n(180),a=n(25),s=n(99),c=n(69),u=n(305),l=n(181),d=n(183),f=n(11),p=n(184),h=f("isConcatSpreadable"),v=p>=51||!o((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),m=d("concat"),g=function(e){if(!a(e))return!1;var t=e[h];return void 0!==t?!!t:i(e)};r({target:"Array",proto:!0,forced:!v||!m},{concat:function(e){var t,n,r,o,i,a=s(this),d=l(a,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(i=-1===t?a:arguments[t],g(i)){if(f+(o=c(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,f++)n in i&&u(d,f,i[n])}else{if(f>=9007199254740991)throw TypeError("Maximum allowed index exceeded");u(d,f++,i)}return d.length=f,d}})},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);t.f=i?function(e){var t=o(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(10),o=n(175),i=r.WeakMap;e.exports="function"==typeof i&&/native code/.test(o(i))},function(e,t,n){var r=n(22),o=n(299),i=n(171),a=n(26);e.exports=function(e,t){for(var n=o(t),s=a.f,c=i.f,u=0;u<n.length;u++){var l=n[u];r(e,l)||s(e,l,c(t,l))}}},function(e,t,n){var r=n(68),o=n(301),i=n(304),a=n(34);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(10);e.exports=r},function(e,t,n){var r=n(178),o=n(98).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(65),o=n(69),i=n(303),a=function(e){return function(t,n,a){var s,c=r(t),u=o(c.length),l=i(a,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t,n){var r=n(97),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";var r=n(92),o=n(26),i=n(64);e.exports=function(e,t,n){var a=r(t);a in e?o.f(e,a,i(0,n)):e[a]=n}},function(e,t,n){var r=n(182);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r=n(68);e.exports=r("navigator","userAgent")||""},function(e,t,n){"use strict";var r=n(63),o=n(185).filter,i=n(183),a=n(186),s=i("filter"),c=a("filter");r({target:"Array",proto:!0,forced:!s||!c},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var r=n(11),o=n(101),i=n(26),a=r("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),e.exports=function(e){s[a][e]=!0}},function(e,t,n){var r=n(28),o=n(26),i=n(34),a=n(312);e.exports=r?Object.defineProperties:function(e,t){i(e);for(var n,r=a(t),s=r.length,c=0;s>c;)o.f(e,n=r[c++],t[n]);return e}},function(e,t,n){var r=n(178),o=n(98);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(68);e.exports=r("document","documentElement")},function(e,t,n){"use strict";var r=n(188).IteratorPrototype,o=n(101),i=n(64),a=n(103),s=n(49),c=function(){return this};e.exports=function(e,t,n){var u=t+" Iterator";return e.prototype=o(r,{next:i(1,n)}),a(e,u,!1,!0),s[u]=c,e}},function(e,t,n){var r=n(18);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){var r=n(25);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){"use strict";var r=n(318),o=n(325);e.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),o)},function(e,t,n){"use strict";var r=n(63),o=n(10),i=n(179),a=n(48),s=n(191),c=n(192),u=n(194),l=n(25),d=n(18),f=n(323),p=n(103),h=n(324);e.exports=function(e,t,n){var v=-1!==e.indexOf("Map"),m=-1!==e.indexOf("Weak"),g=v?"set":"add",y=o[e],b=y&&y.prototype,S=y,w={},C=function(e){var t=b[e];a(b,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(m&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(m&&!l(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(i(e,"function"!=typeof y||!(m||b.forEach&&!d((function(){(new y).entries().next()})))))S=n.getConstructor(t,e,v,g),s.REQUIRED=!0;else if(i(e,!0)){var _=new S,E=_[g](m?{}:-0,1)!=_,T=d((function(){_.has(1)})),O=f((function(e){new y(e)})),R=!m&&d((function(){for(var e=new y,t=5;t--;)e[g](t,t);return!e.has(-0)}));O||((S=t((function(t,n){u(t,S,e);var r=h(new y,t,S);return null!=n&&c(n,r[g],r,v),r}))).prototype=b,b.constructor=S),(T||R)&&(C("delete"),C("has"),v&&C("get")),(R||E)&&C(g),m&&b.clear&&delete b.clear}return w[e]=S,r({global:!0,forced:S!=y},w),p(S,e),m||n.setStrong(S,e,v),S}},function(e,t,n){var r=n(18);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,n){var r=n(11),o=n(49),i=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},function(e,t,n){var r=n(193),o=n(49),i=n(11)("iterator");e.exports=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(34);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,n){var r=n(11)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}},function(e,t,n){var r=n(25),o=n(190);e.exports=function(e,t,n){var i,a;return o&&"function"==typeof(i=t.constructor)&&i!==n&&r(a=i.prototype)&&a!==n.prototype&&o(e,a),e}},function(e,t,n){"use strict";var r=n(26).f,o=n(101),i=n(326),a=n(100),s=n(194),c=n(192),u=n(102),l=n(327),d=n(28),f=n(191).fastKey,p=n(66),h=p.set,v=p.getterFor;e.exports={getConstructor:function(e,t,n,u){var l=e((function(e,r){s(e,l,t),h(e,{type:t,index:o(null),first:void 0,last:void 0,size:0}),d||(e.size=0),null!=r&&c(r,e[u],e,n)})),p=v(t),m=function(e,t,n){var r,o,i=p(e),a=g(e,t);return a?a.value=n:(i.last=a={index:o=f(t,!0),key:t,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=a),r&&(r.next=a),d?i.size++:e.size++,"F"!==o&&(i.index[o]=a)),e},g=function(e,t){var n,r=p(e),o=f(t);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==t)return n};return i(l.prototype,{clear:function(){for(var e=p(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,d?e.size=0:this.size=0},delete:function(e){var t=p(this),n=g(this,e);if(n){var r=n.next,o=n.previous;delete t.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),t.first==n&&(t.first=r),t.last==n&&(t.last=o),d?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=p(this),r=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!g(this,e)}}),i(l.prototype,n?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return m(this,0===e?0:e,t)}}:{add:function(e){return m(this,e=0===e?0:e,e)}}),d&&r(l.prototype,"size",{get:function(){return p(this).size}}),l},setStrong:function(e,t,n){var r=t+" Iterator",o=v(t),i=v(r);u(e,t,(function(e,t){h(this,{type:r,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(t)}}},function(e,t,n){var r=n(48);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},function(e,t,n){"use strict";var r=n(68),o=n(26),i=n(11),a=n(28),s=i("species");e.exports=function(e){var t=r(e),n=o.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(104),o=n(48),i=n(329);r||o(Object.prototype,"toString",i,{unsafe:!0})},function(e,t,n){"use strict";var r=n(104),o=n(193);e.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},function(e,t,n){"use strict";var r=n(331).charAt,o=n(66),i=n(102),a=o.set,s=o.getterFor("String Iterator");i(String,"String",(function(e){a(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=s(this),n=t.string,o=t.index;return o>=n.length?{value:void 0,done:!0}:(e=r(n,o),t.index+=e.length,{value:e,done:!1})}))},function(e,t,n){var r=n(97),o=n(91),i=function(e){return function(t,n){var i,a,s=String(o(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},function(e,t,n){var r=n(10),o=n(195),i=n(333),a=n(29);for(var s in o){var c=r[s],u=c&&c.prototype;if(u&&u.forEach!==i)try{a(u,"forEach",i)}catch(e){u.forEach=i}}},function(e,t,n){"use strict";var r=n(185).forEach,o=n(334),i=n(186),a=o("forEach"),s=i("forEach");e.exports=a&&s?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t,n){"use strict";var r=n(18);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){var r=n(10),o=n(195),i=n(187),a=n(29),s=n(11),c=s("iterator"),u=s("toStringTag"),l=i.values;for(var d in o){var f=r[d],p=f&&f.prototype;if(p){if(p[c]!==l)try{a(p,c,l)}catch(e){p[c]=l}if(p[u]||a(p,u,d),o[d])for(var h in i)if(p[h]!==i[h])try{a(p,h,i[h])}catch(e){p[h]=i[h]}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentUser=function(){if(null===o)return null;return{uid:o,displayName:a}};var r=document.getElementsByTagName("head")[0],o=r?r.getAttribute("data-user"):null,i=document.getElementsByTagName("head")[0],a=i?i.getAttribute("data-user-displayname"):null},function(e,t,n){var r=n(38),o=n(338).f,i=n(106),a=n(139),s=n(222),c=n(413),u=n(419);e.exports=function(e,t){var n,l,d,f,p,h=e.target,v=e.global,m=e.stat;if(n=v?r:m?r[h]||s(h,{}):(r[h]||{}).prototype)for(l in t){if(f=t[l],d=e.noTargetGet?(p=o(n,l))&&p.value:n[l],!u(v?l:h+(m?".":"#")+l,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(e.sham||d&&d.sham)&&i(f,"sham",!0),a(n,l,f,e)}}},function(e,t,n){var r=n(105),o=n(339),i=n(340),a=n(220),s=n(342),c=n(74),u=n(343),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=a(e),t=s(t,!0),u)try{return l(e,t)}catch(e){}if(c(e,t))return i(!o.f.call(e,t),e[t])}},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);t.f=i?function(e){var t=o(this,e);return!!t&&t.enumerable}:r},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(42),o=n(221),i="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},function(e,t,n){var r=n(138);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(105),o=n(42),i=n(408);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(105),o=n(343),i=n(107),a=n(342),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(i(e),t=a(t,!0),i(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(346),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return o.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r=n(38),o=n(222),i=r["__core-js_shared__"]||o("__core-js_shared__",{});e.exports=i},function(e,t,n){var r=n(412),o=n(346);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.5.0",mode:r?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t){e.exports={}},function(e,t,n){var r=n(74),o=n(220),i=n(351).indexOf,a=n(349);e.exports=function(e,t){var n,s=o(e),c=0,u=[];for(n in s)!r(a,n)&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~i(u,n)||u.push(n));return u}},function(e,t,n){var r=n(220),o=n(352),i=n(418),a=function(e){return function(t,n,a){var s,c=r(t),u=o(c.length),l=i(a,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t,n){var r=n(140),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(137);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(42);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t,n){"use strict";var r=n(107);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r,o,i=n(357),a=RegExp.prototype.exec,s=String.prototype.replace,c=a,u=(r=/a/,o=/b*/g,a.call(r,"a"),a.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),l=void 0!==/()??/.exec("")[1];(u||l)&&(c=function(e){var t,n,r,o,c=this;return l&&(n=new RegExp("^"+c.source+"$(?!\\s)",i.call(c))),u&&(t=c.lastIndex),r=a.call(c,e),u&&r&&(c.lastIndex=c.global?r.index+r[0].length:t),l&&r&&r.length>1&&s.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),e.exports=c},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),o=0;o<r.length;o++)n[(t=r[o].trim().split("="))[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var n=r.matchPrefix(e+t,"a=ice-ufrag:")[0],o=r.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&o?{usernameFragment:n.substr(12),password:o.substr(10)}:null},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),o=3;o<n.length;o++){var i=n[o],a=r.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(a){var s=r.parseRtpMap(a),c=r.matchPrefix(e,"a=fmtp:"+i+" ");switch(s.parameters=c.length?r.parseFmtp(c[0]):{},s.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(r.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}));var o=0;return t.codecs.forEach((function(e){e.maxptime>o&&(o=e.maxptime)})),o>0&&(n+="a=maxptime:"+o+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=r.writeExtmap(e)})),n},r.parseRtpEncodingParameters=function(e){var t,n=[],o=r.parseRtpParameters(e),i=-1!==o.fecMechanisms.indexOf("RED"),a=-1!==o.fecMechanisms.indexOf("ULPFEC"),s=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),o.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(r.rtx={ssrc:t}),n.push(r),i&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},n.push(r))}})),0===n.length&&c&&n.push({ssrc:c});var l=r.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=l}))),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var o=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=o.length>0,t.compound=0===o.length;var i=r.matchPrefix(e,"a=rtcp-mux");return t.mux=i.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var o=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return o.length>0?{stream:(t=o[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),o=r.matchPrefix(e,"a=max-message-size:");o.length>0&&(t=parseInt(o[0].substr(19),10)),isNaN(t)&&(t=65536);var i=r.matchPrefix(e,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var a=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var o=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,o){var i=r.writeRtpDescription(e.kind,t);if(i+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",e.direction?i+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var a="msid:"+o.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+a,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),i},r.getDirection=function(e,t){for(var n=r.splitLines(e),o=0;o<n.length;o++)switch(n[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[o].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},e.exports=r},function(e,t,n){const r=n(595),o=n(205),i=n(245),a=n(86),s=n(246);function c(e){const t=this,n=e||{},c=this.config={socketio:{},connection:null,debug:!1,localVideoEl:"",remoteVideosEl:"",enableDataChannels:!0,autoRequestMedia:!1,autoRemoveVideos:!0,adjustPeerVolume:!1,peerVolumeWhenSpeaking:.25,media:{video:!0,audio:!0},receiveMedia:{offerToReceiveAudio:1,offerToReceiveVideo:1},localVideo:{autoplay:!0,mirror:!0,muted:!0}};let u,l;for(u in this.logger=e.debug?e.logger||console:e.logger||s,n)n.hasOwnProperty(u)&&(this.config[u]=n[u]);const d=window.navigator.mediaDevices&&window.navigator.mediaDevices.getDisplayMedia||window.navigator.webkitGetUserMedia||window.navigator.userAgent.match("Firefox");if(i.supportScreenSharing="https:"===window.location.protocol&&d,this.capabilities=i,o.call(this),null===this.config.connection)throw new Error("no connection object given in the configuration");l=this.connection=this.config.connection,l.on("connect",(function(){t.emit("connectionReady",l.getSessionId()),t.sessionReady=!0,t.testReadiness()})),l.on("message",(function(e){const n=t.webrtc.getPeers(e.from,e.roomType);let r;"offer"===e.type?(n.length&&n.forEach((function(t){t.sid===e.sid&&(r=t)})),r||(r=t.webrtc.createPeer({id:e.from,sid:e.sid,type:e.roomType,enableDataChannels:t.config.enableDataChannels&&"screen"!==e.roomType,sharemyscreen:"screen"===e.roomType&&!e.broadcaster,broadcaster:"screen"!==e.roomType||e.broadcaster?null:t.connection.getSessionId(),sendVideoIfAvailable:t.connection.getSendVideoIfAvailable()}),t.emit("createdPeer",r)),r.handleMessage(e)):n.length&&n.forEach((function(t){e.sid?t.sid===e.sid&&t.handleMessage(e):t.handleMessage(e)}))})),l.on("remove",(function(e){e.id!==t.connection.getSessionId()&&t.webrtc.removePeers(e.id,e.type)})),e.logger=this.logger,e.debug=!1,this.webrtc=new r(e),["mute","unmute","pauseVideo","resumeVideo","pause","resume","sendToAll","sendDirectlyToAll","getPeers","createPeer","removePeers"].forEach((function(e){t[e]=t.webrtc[e].bind(t.webrtc)})),this.webrtc.on("*",(function(){t.emit.apply(t,arguments)})),c.debug&&this.on("*",this.logger.log.bind(this.logger,"SimpleWebRTC event:")),this.webrtc.on("localStream",(function(){t.testReadiness()})),this.webrtc.on("message",(function(e){t.connection.emit("message",e)})),this.webrtc.on("peerStreamAdded",this.handlePeerStreamAdded.bind(this)),this.webrtc.on("peerStreamRemoved",this.handlePeerStreamRemoved.bind(this)),this.config.adjustPeerVolume&&(this.webrtc.on("speaking",this.setVolumeForAll.bind(this,this.config.peerVolumeWhenSpeaking)),this.webrtc.on("stoppedSpeaking",this.setVolumeForAll.bind(this,1))),l.on("stunservers",(function(e){t.webrtc.config.peerConnectionConfig.iceServers=e,t.emit("stunservers",e)})),l.on("turnservers",(function(e){t.webrtc.config.peerConnectionConfig.iceServers=t.webrtc.config.peerConnectionConfig.iceServers.concat(e),t.emit("turnservers",e)})),this.webrtc.on("iceFailed",(function(){})),this.webrtc.on("connectivityError",(function(){})),this.webrtc.on("audioOn",(function(){t.webrtc.sendToAll("unmute",{name:"audio"})})),this.webrtc.on("audioOff",(function(){t.webrtc.sendToAll("mute",{name:"audio"})})),this.webrtc.on("videoOn",(function(){t.webrtc.sendToAll("unmute",{name:"video"})})),this.webrtc.on("videoOff",(function(){t.webrtc.sendToAll("mute",{name:"video"})})),this.webrtc.on("localScreen",(function(e){const n=document.createElement("video"),r=t.getRemoteVideoContainer();n.oncontextmenu=function(){return!1},n.id="localScreen",a(e,n),r&&r.appendChild(n),t.emit("localScreenAdded",n),t.connection.emit("shareScreen")})),this.webrtc.on("localScreenStopped",(function(){t.stopScreenShare()}))}c.prototype=Object.create(o.prototype,{constructor:{value:c}}),c.prototype.leaveCall=function(){if(this.roomName){for(;this.webrtc.peers.length;)this.webrtc.peers[0].end();this.getLocalScreen()&&this.stopScreenShare(),this.emit("leftRoom",this.roomName),this.stopLocalVideo(),this.roomName=void 0}},c.prototype.disconnect=function(){this.connection.disconnect(),delete this.connection},c.prototype.handlePeerStreamAdded=function(e){const t=this,n=this.getRemoteVideoContainer(),r=a(e.stream,null,{audio:!0}),o=a(e.stream);o.muted=!0,"scaleX(1)"===o.style.transform&&(o.style.transform=""),e.audioEl=r,e.videoEl=o,r.id=this.getDomId(e)+"-audio",o.id=this.getDomId(e),n&&(n.appendChild(r),n.appendChild(o)),this.emit("videoAdded",o,r,e),window.setTimeout((function(){t.webrtc.isAudioEnabled()||e.send("mute",{name:"audio"}),t.webrtc.isVideoEnabled()||e.send("mute",{name:"video"})}),250)},c.prototype.handlePeerStreamRemoved=function(e){const t=this.getRemoteVideoContainer(),n=e.audioEl,r=e.videoEl;this.config.autoRemoveVideos&&t&&n&&t.removeChild(n),this.config.autoRemoveVideos&&t&&r&&t.removeChild(r),r&&this.emit("videoRemoved",r,e)},c.prototype.getDomId=function(e){return[e.id,e.type,e.broadcaster?"broadcasting":"incoming"].join("_")},c.prototype.setVolumeForAll=function(e){this.webrtc.peers.forEach((function(t){t.audioEl&&(t.audioEl.volume=e)}))},c.prototype.joinCall=function(e){this.config.autoRequestMedia&&this.startLocalVideo(),this.roomName=e,this.emit("joinedRoom",e)},c.prototype.getEl=function(e){return"string"==typeof e?document.getElementById(e):e},c.prototype.startLocalVideo=function(){const e=this;this.webrtc.start(this.config.media,(function(t,n){if(t)e.emit("localMediaError",t);else{e.emit("localMediaStarted",e.config.media);const t=e.getLocalVideoContainer();t&&a(n,t,e.config.localVideo)}}))},c.prototype.stopLocalVideo=function(){this.webrtc.stop()},c.prototype.getLocalVideoContainer=function(){const e=this.getEl(this.config.localVideoEl);if(e&&"VIDEO"===e.tagName)return e.oncontextmenu=function(){return!1},e;if(e){const t=document.createElement("video");return t.oncontextmenu=function(){return!1},e.appendChild(t),t}},c.prototype.getRemoteVideoContainer=function(){return this.getEl(this.config.remoteVideosEl)},c.prototype.shareScreen=function(e,t){this.webrtc.startScreenShare(e,t)},c.prototype.getLocalScreen=function(){return this.webrtc.localScreen},c.prototype.stopScreenShare=function(){this.connection.emit("unshareScreen");const e=document.getElementById("localScreen"),t=this.getRemoteVideoContainer();this.config.autoRemoveVideos&&t&&e&&t.removeChild(e),e&&this.emit("videoRemoved",e),this.getLocalScreen()&&this.webrtc.stopScreenShare(),this.webrtc.peers.forEach((function(e){"screen"===e.type&&e.sharemyscreen&&e.send("unshareScreen"),e.broadcaster&&e.end()}))},c.prototype.testReadiness=function(){const e=this;this.sessionReady&&(this.config.media.video||this.config.media.audio?this.webrtc.localStreams.length>0&&e.emit("readyToCall",e.connection.getSessionId()):e.emit("readyToCall",e.connection.getSessionId()))},c.prototype.createRoom=function(e,t){this.roomName=e,2===arguments.length?this.connection.emit("create",e,t):this.connection.emit("create",e)},e.exports=c},,,,,function(e,t,n){"use strict";var r=n(337),o=n(351).indexOf,i=n(420),a=[].indexOf,s=!!a&&1/[1].indexOf(1,-0)<0,c=i("indexOf");r({target:"Array",proto:!0,forced:s||c},{indexOf:function(e){return s?a.apply(this,arguments)||0:o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(38),o=n(138),i=r.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){var r,o,i,a=n(410),s=n(38),c=n(138),u=n(106),l=n(74),d=n(411),f=n(349),p=s.WeakMap;if(a){var h=new p,v=h.get,m=h.has,g=h.set;r=function(e,t){return g.call(h,e,t),t},o=function(e){return v.call(h,e)||{}},i=function(e){return m.call(h,e)}}else{var y=d("state");f[y]=!0,r=function(e,t){return u(e,y,t),t},o=function(e){return l(e,y)?e[y]:{}},i=function(e){return l(e,y)}}e.exports={set:r,get:o,has:i,enforce:function(e){return i(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var r=n(38),o=n(345),i=r.WeakMap;e.exports="function"==typeof i&&/native code/.test(o(i))},function(e,t,n){var r=n(347),o=n(348),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,t){e.exports=!1},function(e,t,n){var r=n(74),o=n(414),i=n(338),a=n(344);e.exports=function(e,t){for(var n=o(t),s=a.f,c=i.f,u=0;u<n.length;u++){var l=n[u];r(e,l)||s(e,l,c(t,l))}}},function(e,t,n){var r=n(415),o=n(417),i=n(354),a=n(107);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(416),o=n(38),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e])||i(o[e]):r[e]&&r[e][t]||o[e]&&o[e][t]}},function(e,t,n){var r=n(38);e.exports=r},function(e,t,n){var r=n(350),o=n(353).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(140),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},function(e,t,n){var r=n(42),o=/#|\.prototype\./,i=function(e,t){var n=s[a(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},a=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";e.exports=i},function(e,t,n){"use strict";var r=n(42);e.exports=function(e,t){var n=[][e];return!n||!r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){var r=n(337),o=n(422);r({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(e,t,n){"use strict";var r=n(105),o=n(42),i=n(423),a=n(354),s=n(339),c=n(355),u=n(341),l=Object.assign,d=Object.defineProperty;e.exports=!l||o((function(){if(r&&1!==l({b:1},l(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||"abcdefghijklmnopqrst"!=i(l({},t)).join("")}))?function(e,t){for(var n=c(e),o=arguments.length,l=1,d=a.f,f=s.f;o>l;)for(var p,h=u(arguments[l++]),v=d?i(h).concat(d(h)):i(h),m=v.length,g=0;m>g;)p=v[g++],r&&!f.call(h,p)||(n[p]=h[p]);return n}:l},function(e,t,n){var r=n(350),o=n(353);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(223),o=n(139),i=n(426);r||o(Object.prototype,"toString",i,{unsafe:!0})},function(e,t,n){var r=n(356);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol()},function(e,t,n){"use strict";var r=n(223),o=n(427);e.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},function(e,t,n){var r=n(223),o=n(221),i=n(224)("toStringTag"),a="Arguments"==o(function(){return arguments}());e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:a?o(t):"Object"==(r=o(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,n){"use strict";var r=n(139),o=n(107),i=n(42),a=n(357),s=RegExp.prototype,c=s.toString,u=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),l="toString"!=c.name;(u||l)&&r(RegExp.prototype,"toString",(function(){var e=o(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in s)?a.call(e):n)}),{unsafe:!0})},function(e,t,n){"use strict";var r=n(430),o=n(107),i=n(355),a=n(352),s=n(140),c=n(137),u=n(431),l=n(433),d=Math.max,f=Math.min,p=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(e,t,n){return[function(n,r){var o=c(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,o,r):t.call(String(o),n,r)},function(e,i){var c=n(t,e,this,i);if(c.done)return c.value;var p=o(e),h=String(this),v="function"==typeof i;v||(i=String(i));var m=p.global;if(m){var g=p.unicode;p.lastIndex=0}for(var y=[];;){var b=l(p,h);if(null===b)break;if(y.push(b),!m)break;""===String(b[0])&&(p.lastIndex=u(h,a(p.lastIndex),g))}for(var S,w="",C=0,_=0;_<y.length;_++){b=y[_];for(var E=String(b[0]),T=d(f(s(b.index),h.length),0),O=[],R=1;R<b.length;R++)O.push(void 0===(S=b[R])?S:String(S));var k=b.groups;if(v){var P=[E].concat(O,T,h);void 0!==k&&P.push(k);var x=String(i.apply(void 0,P))}else x=r(E,h,T,O,k,i);T>=C&&(w+=h.slice(C,T)+x,C=T+E.length)}return w+h.slice(C)}];function r(e,n,r,o,a,s){var c=r+e.length,u=o.length,l=v;return void 0!==a&&(a=i(a),l=h),t.call(s,l,(function(t,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(c);case"<":s=a[i.slice(1,-1)];break;default:var l=+i;if(0===l)return t;if(l>u){var d=p(l/10);return 0===d?t:d<=u?void 0===o[d-1]?i.charAt(1):o[d-1]+i.charAt(1):t}s=o[l-1]}return void 0===s?"":s}))}}))},function(e,t,n){"use strict";var r=n(106),o=n(139),i=n(42),a=n(224),s=n(358),c=a("species"),u=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var f=a(e),p=!i((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),h=p&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return t=!0,null},n[f](""),!t}));if(!p||!h||"replace"===e&&!u||"split"===e&&!l){var v=/./[f],m=n(f,""[e],(function(e,t,n,r,o){return t.exec===s?p&&!o?{done:!0,value:v.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),g=m[0],y=m[1];o(String.prototype,e,g),o(RegExp.prototype,f,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)}),d&&r(RegExp.prototype[f],"sham",!0)}}},function(e,t,n){"use strict";var r=n(432).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r=n(140),o=n(137),i=function(e){return function(t,n){var i,a,s=String(o(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},function(e,t,n){var r=n(221),o=n(358);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){const r=n(244),o=n(245),i=n(246),a=n(598),s=n(601);function c(e){const t=this,n=e||{};let r;for(r in this.config={debug:!1,peerConnectionConfig:{iceServers:[]},receiveMedia:{offerToReceiveAudio:1,offerToReceiveVideo:1},enableDataChannels:!0},this.logger=e.debug?e.logger||console:e.logger||i,n)n.hasOwnProperty(r)&&(this.config[r]=n[r]);o.support||this.logger.error("Your browser doesn't seem to support WebRTC"),this.peers=[],a.call(this,this.config),this.on("speaking",(function(){t.hardMuted||t.peers.forEach((function(e){if(e.enableDataChannels){const t=e.getDataChannel("hark");if("open"!==t.readyState)return;t.send(JSON.stringify({type:"speaking"}))}}))})),this.on("stoppedSpeaking",(function(){t.hardMuted||t.peers.forEach((function(e){if(e.enableDataChannels){const t=e.getDataChannel("hark");if("open"!==t.readyState)return;t.send(JSON.stringify({type:"stoppedSpeaking"}))}}))})),this.on("unshareScreen",(function(e){t.getPeers(e.from,"screen").forEach((function(e){e.sharemyscreen||e.end()}))})),this.config.debug&&this.on("*",(function(e,n,r){let o;o=t.config.logger===i?console:t.logger,o.log("event:",e,n,r)}))}r.inherits(c,a),c.prototype.createPeer=function(e){e.parent=this;const t=new s(e);return this.peers.push(t),t},c.prototype.removePeers=function(e,t){this.getPeers(e,t).forEach((function(e){e.end()}))},c.prototype.getPeers=function(e,t){return this.peers.filter((function(n){return!(e&&n.id!==e||t&&n.type!==t)}))},c.prototype.sendToAll=function(e,t){this.peers.forEach((function(n){n.send(e,t)}))},c.prototype.sendDirectlyToAll=function(e,t,n){this.peers.forEach((function(r){r.enableDataChannels&&r.sendDirectly(e,t,n)}))},e.exports=c},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){const r=n(244),o=n(599),i=n(600),a=n(205),s=n(246);function c(e){a.call(this);const t=this.config={detectSpeakingEvents:!1,audioFallback:!1,media:{audio:!0,video:!0},harkOptions:null,logger:s};let n;for(n in e)e.hasOwnProperty(n)&&(this.config[n]=e[n]);this.logger=t.logger,this._log=this.logger.log.bind(this.logger,"LocalMedia:"),this._logerror=this.logger.error.bind(this.logger,"LocalMedia:"),this.localStreams=[],this._audioMonitorStreams=[],this.localScreens=[],navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||this._logerror("Your browser does not support local media capture."),this._audioMonitors=[],this.on("localScreenStopped",this._stopAudioMonitor.bind(this))}r.inherits(c,a);c.prototype.start=function(e,t){const n=this,r=e||this.config.media;if(!navigator||!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){const e=new Error("MediaStreamError");return e.name="NotSupportedError",t?t(e,null):void 0}this.emit("localStreamRequested",r),navigator.mediaDevices.getUserMedia(r).then((function(e){if(r.video&&0===e.getVideoTracks().length)return r.video=!1,void n.start(r,t);const o=function(e){const t=new MediaStream;return e.getTracks().forEach((function(e){const n=e.clone();t.addTrack(n),e.linkedTracks||(e.linkedTracks=[]),e.linkedTracks.push(n),e.addEventListener("ended",(function(){n.stop()}))})),t}(e);return r.audio&&n.config.detectSpeakingEvents&&n._setupAudioMonitor(o,n.config.harkOptions),n.localStreams.push(e),n._audioMonitorStreams.push(o),e.getTracks().forEach((function(t){t.addEventListener("ended",(function(){(function(e){let t=!0;return e.getTracks().forEach((function(e){t="ended"===e.readyState&&t})),t})(e)&&n._removeStream(e)}))})),n.emit("localStream",r,e),t?t(null,e):void 0})).catch((function(e){return n.config.audioFallback&&"NotFoundError"===e.name&&!1!==r.video?(r.video=!1,void n.start(r,t)):(n.emit("localStreamRequestFailed",r),t?t(e,null):void 0)}))},c.prototype.stop=function(e){this.stopStream(e),this.stopScreenShare(e)},c.prototype.stopStream=function(e){const t=this;if(e){this.localStreams.indexOf(e)>-1&&(e.getTracks().forEach((function(e){e.stop(),e.linkedTracks&&e.linkedTracks.forEach((function(e){e.stop()}))})),this._removeStream(e))}else this.localStreams.forEach((function(e){e.getTracks().forEach((function(e){e.stop(),e.linkedTracks&&e.linkedTracks.forEach((function(e){e.stop()}))})),t._removeStream(e)}))},c.prototype.startScreenShare=function(e,t,n){const r=this;this.emit("localScreenRequested"),"function"!=typeof t||n||(n=t,t=null),i(e,t,(function(e,t){if(e?r.emit("localScreenRequestFailed"):(r.localScreens.push(t),t.getTracks().forEach((function(e){e.addEventListener("ended",(function(){let e=!0;t.getTracks().forEach((function(t){e="ended"===t.readyState&&e})),e&&r._removeStream(t)}))})),r.emit("localScreen",t)),n)return n(e,t)}))},c.prototype.stopScreenShare=function(e){const t=this;if(e){this.localScreens.indexOf(e)>-1&&(e.getTracks().forEach((function(e){e.stop()})),this._removeStream(e))}else this.localScreens.forEach((function(e){e.getTracks().forEach((function(e){e.stop()})),t._removeStream(e)}))},c.prototype.mute=function(){this._setAudioEnabled(!1),this.emit("audioOff")},c.prototype.unmute=function(){this._setAudioEnabled(!0),this.emit("audioOn")},c.prototype.pauseVideo=function(){this._videoEnabled(!1),this.emit("videoOff")},c.prototype.resumeVideo=function(){this._videoEnabled(!0),this.emit("videoOn")},c.prototype.pause=function(){this.mute(),this.pauseVideo()},c.prototype.resume=function(){this.unmute(),this.resumeVideo()},c.prototype._setAudioEnabled=function(e){this._audioEnabled=e,this.localStreams.forEach((function(t){t.getAudioTracks().forEach((function(t){t.enabled=!!e}))}))},c.prototype._videoEnabled=function(e){this.localStreams.forEach((function(t){t.getVideoTracks().forEach((function(t){t.enabled=!!e}))}))},c.prototype.isAudioEnabled=function(){let e=!0,t=!1;return this.localStreams.forEach((function(n){const r=n.getAudioTracks();r.length>0&&(t=!0,r.forEach((function(t){e=e&&t.enabled})))})),!!t&&e},c.prototype.isVideoEnabled=function(){let e=!0,t=!1;return this.localStreams.forEach((function(n){const r=n.getVideoTracks();r.length>0&&(t=!0,r.forEach((function(t){e=e&&t.enabled})))})),!!t&&e},c.prototype._removeStream=function(e){let t=this.localStreams.indexOf(e);t>-1?(this.localStreams.splice(t,1),this._stopAudioMonitor(this._audioMonitorStreams[t]),this._audioMonitorStreams.splice(t,1),this.emit("localStreamStopped",e)):(t=this.localScreens.indexOf(e),t>-1&&(this.localScreens.splice(t,1),this.emit("localScreenStopped",e)))},c.prototype._setupAudioMonitor=function(e,t){this._log("Setup audio");const n=o(e,t),r=this;let i;n.on("speaking",(function(){r._speaking=!0,r._audioEnabled?r.emit("speaking"):r.emit("speakingWhileMuted")})),n.on("stopped_speaking",(function(){i&&clearTimeout(i),i=setTimeout((function(){r._speaking=!1,r._audioEnabled?r.emit("stoppedSpeaking"):r.emit("stoppedSpeakingWhileMuted")}),1e3)})),r.on("audioOn",(function(){r._speaking&&(r.emit("stoppedSpeakingWhileMuted"),r.emit("speaking"))})),r.on("audioOff",(function(){r._speaking&&(r.emit("stoppedSpeaking"),r.emit("speakingWhileMuted"))})),n.on("volume_change",(function(e,t){r.emit("volumeChange",e,t)})),this._audioMonitors.push({audio:n,stream:e})},c.prototype._stopAudioMonitor=function(e){let t=-1;this._audioMonitors.forEach((function(n,r){n.stream===e&&(t=r)})),t>-1&&(this._audioMonitors[t].audio.stop(),this._audioMonitors.splice(t,1))},Object.defineProperty(c.prototype,"localScreen",{get:function(){return this.localScreens.length>0?this.localScreens[0]:null}}),e.exports=c},function(e,t,n){var r,o=n(205);"undefined"!=typeof window&&(r=window.AudioContext||window.webkitAudioContext);var i=null;e.exports=function(e,t){var n=new o;if(!r)return n;var a,s,c,u=(t=t||{}).smoothing||.1,l=t.interval||50,d=t.threshold,f=t.play,p=t.history||10,h=!0;i=t.audioContext||i||new r,(c=i.createAnalyser()).fftSize=512,c.smoothingTimeConstant=u,s=new Float32Array(c.frequencyBinCount),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement||e instanceof HTMLVideoElement?(a=i.createMediaElementSource(e),void 0===f&&(f=!0),d=d||-50):(a=i.createMediaStreamSource(e),d=d||-50),a.connect(c),f&&c.connect(i.destination),n.speaking=!1,n.suspend=function(){return i.suspend()},n.resume=function(){return i.resume()},Object.defineProperty(n,"state",{get:function(){return i.state}}),i.onstatechange=function(){n.emit("state_change",i.state)},n.setThreshold=function(e){d=e},n.setInterval=function(e){l=e},n.stop=function(){h=!1,n.emit("volume_change",-100,d),n.speaking&&(n.speaking=!1,n.emit("stopped_speaking")),c.disconnect(),a.disconnect()},n.speakingHistory=[];for(var v=0;v<p;v++)n.speakingHistory.push(0);var m=function(){setTimeout((function(){if(h){var e=function(e,t){var n=-1/0;e.getFloatFrequencyData(t);for(var r=4,o=t.length;r<o;r++)t[r]>n&&t[r]<0&&(n=t[r]);return n}(c,s);n.emit("volume_change",e,d);var t=0;if(e>d&&!n.speaking){for(var r=n.speakingHistory.length-3;r<n.speakingHistory.length;r++)t+=n.speakingHistory[r];t>=2&&(n.speaking=!0,n.emit("speaking"))}else if(e<d&&n.speaking){for(r=0;r<n.speakingHistory.length;r++)t+=n.speakingHistory[r];0==t&&(n.speaking=!1,n.emit("stopped_speaking"))}n.speakingHistory.shift(),n.speakingHistory.push(0+(e>d)),m()}}),l)};return m(),n}},function(e,t){const n=function(e,t){if(!window.navigator||!window.navigator.mediaDevices||!window.navigator.mediaDevices.getUserMedia){const e=new Error("MediaStreamError");return e.name="NotSupportedError",void(t&&t(e,null))}window.navigator.mediaDevices.getUserMedia(e).then((function(e){t(null,e)})).catch((function(e){t(e,null)}))},r={};e.exports=function(e,t,o){const i=3===arguments.length,a=i?o:t;let s;if("undefined"==typeof window||"http:"===window.location.protocol)return s=new Error("NavigatorUserMediaError"),s.name="HTTPS_REQUIRED",a(s);if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)navigator.mediaDevices.getDisplayMedia({video:!0}).then((function(e){a(null,e)})).catch((function(e){a(e,null)}));else if(navigator.webkitGetUserMedia){const e=parseInt(window.navigator.userAgent.match(/Chrome\/(\d+)\./)[1],10);let o=33;const c=e<71&&!window.chrome.webstore;if(window.navigator.userAgent.match("Linux")&&(o=35),sessionStorage.getScreenMediaJSExtensionId)chrome.runtime.sendMessage(sessionStorage.getScreenMediaJSExtensionId,{type:"getScreen",id:1},null,(function(e){if(e&&""!==e.sourceId)(t=i&&t||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3}}}).video.mandatory.chromeMediaSourceId=e.sourceId,n(t,a);else{const e=new Error("NavigatorUserMediaError");e.name="PERMISSION_DENIED",a(e)}}));else if(window.cefGetScreenMedia)window.cefGetScreenMedia((function(e){if(e)(t=i&&t||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}}).video.mandatory.chromeMediaSourceId=e,n(t,a);else{const e=new Error("cefGetScreenMediaError");e.name="CEF_GETSCREENMEDIA_CANCELED",a(e)}}));else if(c||e>=26&&e<=o)t=i&&t||{video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3,chromeMediaSource:"screen"}}},n(t,a);else{const e=window.setTimeout((function(){return s=new Error("NavigatorUserMediaError"),s.name="EXTENSION_UNAVAILABLE",a(s)}),1e3);r[e]=[a,i?t:null],window.postMessage({type:"getScreen",id:e},"*")}}else if(window.navigator.userAgent.match("Firefox")){if(!(parseInt(window.navigator.userAgent.match(/Firefox\/(.*)/)[1],10)>=52))return s=new Error("NavigatorUserMediaError"),s.name="FF52_REQUIRED",a(s);e=e||"window",n(t=i&&t||{video:{mozMediaSource:e,mediaSource:e}},(function(e,t){if(a(e,t),e)return;let n=t.currentTime;const r=window.setInterval((function(){t||window.clearInterval(r),t.currentTime===n&&(window.clearInterval(r),t.onended&&t.onended()),n=t.currentTime}),500)}))}},"undefined"!=typeof window&&window.addEventListener("message",(function(e){if(e.origin===window.location.origin||e.isTrusted)if("gotScreen"===e.data.type&&r[e.data.id]){const t=r[e.data.id];let o=t[1];const i=t[0];if(delete r[e.data.id],""===e.data.sourceId){const e=new Error("NavigatorUserMediaError");e.name="PERMISSION_DENIED",i(e)}else o=o||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}},o.video.mandatory.chromeMediaSourceId=e.data.sourceId,n(o,i)}else"getScreenPending"===e.data.type&&window.clearTimeout(e.data.id)}))},function(e,t,n){const r=n(244),o=n(245),i=n(205);function a(e){const t=this;i.call(this),this.id=e.id,this.parent=e.parent,this.type=e.type||"video",this.oneway=e.oneway||!1,this.sharemyscreen=e.sharemyscreen||!1,this.browserPrefix=e.prefix,this.stream=e.stream,this.sendVideoIfAvailable=void 0===e.sendVideoIfAvailable||e.sendVideoIfAvailable,this.enableDataChannels=void 0===e.enableDataChannels?this.parent.config.enableDataChannels:e.enableDataChannels,this.receiveMedia=e.receiveMedia||this.parent.config.receiveMedia,this.channels={},this.pendingDCMessages=[],this.sid=e.sid||Date.now().toString(),this.pc=new RTCPeerConnection(this.parent.config.peerConnectionConfig),this.pc.addEventListener("icecandidate",this.onIceCandidate.bind(this)),this.pc.addEventListener("endofcandidates",(function(e){t.send("endOfCandidates",e)})),this.pc.addEventListener("addstream",this.handleRemoteStreamAdded.bind(this)),this.pc.addEventListener("datachannel",this.handleDataChannelAdded.bind(this)),this.pc.addEventListener("removestream",this.handleStreamRemoved.bind(this)),this.pc.addEventListener("negotiationneeded",this.emit.bind(this,"negotiationNeeded")),this.pc.addEventListener("iceconnectionstatechange",this.emit.bind(this,"iceConnectionStateChange")),this.pc.addEventListener("iceconnectionstatechange",(function(){switch(t.pc.iceConnectionState){case"failed":"offer"===t.pc.localDescription.type&&(t.parent.emit("iceFailed",t),t.send("connectivityError"))}})),this.pc.addEventListener("signalingstatechange",this.emit.bind(this,"signalingStateChange")),this.logger=this.parent.logger,"screen"===e.type?this.parent.localScreen&&this.sharemyscreen&&(this.logger.log("adding local screen stream to peer connection"),this.pc.addStream(this.parent.localScreen),this.broadcaster=e.broadcaster):this.parent.localStreams.forEach((function(e){e.getTracks().forEach((function(n){("video"!==n.kind||t.sendVideoIfAvailable)&&t.pc.addTrack(n,e)}))})),this.on("*",(function(){t.parent.emit.apply(t.parent,arguments)}))}r.inherits(a,i),a.prototype.offer=function(e){this.pc.createOffer(e).then(function(e){this.pc.setLocalDescription(e).then(function(){this.parent.config.nick&&(e={type:e.type,sdp:e.sdp,nick:this.parent.config.nick}),this.send("offer",e)}.bind(this)).catch((function(e){console.warn("setLocalDescription for offer failed: ",e)}))}.bind(this)).catch((function(e){console.warn("createOffer failed: ",e)}))},a.prototype.handleOffer=function(e){this.pc.setRemoteDescription(e).then(function(){this.answer()}.bind(this)).catch((function(e){console.warn("setRemoteDescription for offer failed: ",e)}))},a.prototype.answer=function(){this.pc.createAnswer().then(function(e){this.pc.setLocalDescription(e).then(function(){this.parent.config.nick&&(e={type:e.type,sdp:e.sdp,nick:this.parent.config.nick}),this.send("answer",e)}.bind(this)).catch((function(e){console.warn("setLocalDescription for answer failed: ",e)}))}.bind(this)).catch((function(e){console.warn("createAnswer failed: ",e)}))},a.prototype.handleAnswer=function(e){this.pc.setRemoteDescription(e).catch((function(e){console.warn("setRemoteDescription for answer failed: ",e)}))},a.prototype.handleMessage=function(e){const t=this;this.logger.log("getting",e.type,e),e.prefix&&(this.browserPrefix=e.prefix),"offer"===e.type?(this.nick||(this.nick=e.payload.nick),delete e.payload.nick,this.handleOffer(e.payload)):"answer"===e.type?(this.nick||(this.nick=e.payload.nick),delete e.payload.nick,this.handleAnswer(e.payload)):"candidate"===e.type?this.pc.addIceCandidate(e.payload.candidate):"connectivityError"===e.type?this.parent.emit("connectivityError",t):"mute"===e.type?this.parent.emit("mute",{id:e.from,name:e.payload.name}):"unmute"===e.type?this.parent.emit("unmute",{id:e.from,name:e.payload.name}):"endOfCandidates"===e.type?this.pc.addIceCandidate(""):"unshareScreen"===e.type&&(this.parent.emit("unshareScreen",{id:e.from}),this.end())},a.prototype.send=function(e,t){const n={to:this.id,sid:this.sid,broadcaster:this.broadcaster,roomType:this.type,type:e,payload:t,prefix:o.prefix};this.logger.log("sending",e,n),this.parent.emit("message",n)},a.prototype.sendDirectly=function(e,t,n){const r={type:t,payload:n};this.logger.log("sending via datachannel",e,t,r);const o=this.getDataChannel(e);return"open"!==o.readyState?(this.pendingDCMessages.hasOwnProperty(e)||(this.pendingDCMessages[e]=[]),this.pendingDCMessages[e].push(r),!1):(o.send(JSON.stringify(r)),!0)},a.prototype._observeDataChannel=function(e){const t=this;e.onclose=this.emit.bind(this,"channelClose",e),e.onerror=this.emit.bind(this,"channelError",e),e.onmessage=function(n){t.emit("channelMessage",t,e.label,JSON.parse(n.data),e,n)},e.onopen=function(){if(t.emit("channelOpen",e),t.pendingDCMessages.hasOwnProperty(e.label)){const n=t.pendingDCMessages[e.label];for(let r=0;r<n.length;r++)t.sendDirectly(e.label,n[r].type,n[r].payload);t.pendingDCMessages[e.label]=[]}}},a.prototype.getDataChannel=function(e,t){if(!o.supportDataChannel)return this.emit("error",new Error("createDataChannel not supported"));let n=this.channels[e];return t||(t={}),n||(n=this.channels[e]=this.pc.createDataChannel(e,t),this._observeDataChannel(n),n)},a.prototype.onIceCandidate=function(e){const t=e.candidate;if(!this.closed)if(t){const e=this.parent.config.peerConnectionConfig;if("moz"===o.prefix&&e&&e.iceTransports&&t.candidate&&t.candidate.candidate&&t.candidate.candidate.indexOf(e.iceTransports)<0)this.logger.log("Ignoring ice candidate not matching pcConfig iceTransports type: ",e.iceTransports);else{const e={candidate:{candidate:t.candidate,sdpMid:t.sdpMid,sdpMLineIndex:t.sdpMLineIndex}};this.send("candidate",e)}}else this.logger.log("End of candidates.")},a.prototype.start=function(){this.enableDataChannels&&this.getDataChannel("simplewebrtc"),this.offer(this.receiveMedia)},a.prototype.icerestart=function(){const e=this.receiveMedia;e.iceRestart=!0,this.offer(e)},a.prototype.end=function(){this.closed||(this.pc.close(),this.handleStreamRemoved())},a.prototype.handleRemoteStreamAdded=function(e){const t=this;this.stream?this.logger.warn("Already have a remote stream"):(this.stream=e.stream,this.stream.getTracks().forEach((function(e){e.addEventListener("ended",(function(){(function(e){let t=!0;return e.getTracks().forEach((function(e){t="ended"===e.readyState&&t})),t})(t.stream)&&t.end()}))})),this.parent.emit("peerStreamAdded",this))},a.prototype.handleStreamRemoved=function(){const e=this.parent.peers.indexOf(this);e>-1&&(this.parent.peers.splice(e,1),this.closed=!0,this.parent.emit("peerStreamRemoved",this))},a.prototype.handleDataChannelAdded=function(e){const t=e.channel;this.channels[t.label]=t,this._observeDataChannel(t)},e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,n(603).adapterFactory)({window:window});t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.adapterFactory=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.window,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},r=o.log,l=o.detectBrowser(t),d={browserDetails:l,commonShim:u,extractVersion:o.extractVersion,disableLog:o.disableLog,disableWarnings:o.disableWarnings};switch(l.browser){case"chrome":if(!i||!i.shimPeerConnection||!n.shimChrome)return r("Chrome shim is not included in this adapter release."),d;r("adapter.js shimming chrome."),d.browserShim=i,i.shimGetUserMedia(t),i.shimMediaStream(t),i.shimPeerConnection(t),i.shimOnTrack(t),i.shimAddTrackRemoveTrack(t),i.shimGetSendersWithDtmf(t),i.shimGetStats(t),i.shimSenderReceiverGetStats(t),i.fixNegotiationNeeded(t),u.shimRTCIceCandidate(t),u.shimConnectionState(t),u.shimMaxMessageSize(t),u.shimSendThrowTypeError(t),u.removeAllowExtmapMixed(t);break;case"firefox":if(!s||!s.shimPeerConnection||!n.shimFirefox)return r("Firefox shim is not included in this adapter release."),d;r("adapter.js shimming firefox."),d.browserShim=s,s.shimGetUserMedia(t),s.shimPeerConnection(t),s.shimOnTrack(t),s.shimRemoveStream(t),s.shimSenderGetStats(t),s.shimReceiverGetStats(t),s.shimRTCDataChannel(t),s.shimAddTransceiver(t),s.shimCreateOffer(t),s.shimCreateAnswer(t),u.shimRTCIceCandidate(t),u.shimConnectionState(t),u.shimMaxMessageSize(t),u.shimSendThrowTypeError(t);break;case"edge":if(!a||!a.shimPeerConnection||!n.shimEdge)return r("MS edge shim is not included in this adapter release."),d;r("adapter.js shimming edge."),d.browserShim=a,a.shimGetUserMedia(t),a.shimGetDisplayMedia(t),a.shimPeerConnection(t),a.shimReplaceTrack(t),u.shimMaxMessageSize(t),u.shimSendThrowTypeError(t);break;case"safari":if(!c||!n.shimSafari)return r("Safari shim is not included in this adapter release."),d;r("adapter.js shimming safari."),d.browserShim=c,c.shimRTCIceServerUrls(t),c.shimCreateOfferLegacy(t),c.shimCallbacksAPI(t),c.shimLocalStreamsAPI(t),c.shimRemoteStreamsAPI(t),c.shimTrackEventTransceiver(t),c.shimGetUserMedia(t),u.shimRTCIceCandidate(t),u.shimMaxMessageSize(t),u.shimSendThrowTypeError(t),u.removeAllowExtmapMixed(t);break;default:r("Unsupported browser!")}return d};var o=d(n(51)),i=d(n(604)),a=d(n(607)),s=d(n(612)),c=d(n(615)),u=d(n(616));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shimMediaStream=function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},t.shimOnTrack=function(e){if("object"!==c(e)||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)r.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}));else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var o;o=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var i=new Event("track");i.track=r.track,i.receiver=o,i.transceiver={receiver:o},i.streams=[t.stream],n.dispatchEvent(i)})),t.stream.getTracks().forEach((function(r){var o;o=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var i=new Event("track");i.track=r,i.receiver=o,i.transceiver={receiver:o},i.streams=[t.stream],n.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}},t.shimGetSendersWithDtmf=function(e){if("object"===c(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var o=n.apply(this,arguments);return o||(o=t(this,e),this._senders.push(o)),o};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===c(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},t.shimGetStats=function(e){if(!e.RTCPeerConnection)return;var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],o=n[1],i=n[2];if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var a=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){o(s(a(e)))};return t.apply(this,[c,r])}return new Promise((function(n,r){t.apply(e,[function(e){n(s(a(e)))},r])})).then(o,i)}},t.shimSenderReceiverGetStats=function(e){if(!("object"===c(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return r.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var o=e.RTCPeerConnection.prototype.getReceivers;o&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=o.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),r.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return r.filterStats(t,e.track,!1)}))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,o=arguments[0];return this.getSenders().forEach((function(e){e.track===o&&(t?r=!0:t=e)})),this.getReceivers().forEach((function(e){return e.track===o&&(n?r=!0:n=e),e.track===o})),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}},t.shimAddTrackRemoveTrackWithNative=u,t.shimAddTrackRemoveTrack=function(e){if(!e.RTCPeerConnection)return;var t=r.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return u(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}o.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;function a(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(o.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function c(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),o.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var o=[].slice.call(arguments,1);if(1!==o.length||!o[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var i=this.getSenders().find((function(e){return e.track===t}));if(i)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var a=this._streams[n.id];if(a)a.addTrack(t),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[n.id]=s,this._reverseStreams[s.id]=n,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=s({},t,(function(){var e=this,t=arguments,r=arguments.length&&"function"==typeof arguments[0];return r?n.apply(this,[function(n){var r=a(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return a(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var l=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=c(this,arguments[0]),l.apply(this,arguments)):l.apply(this,arguments)};var d=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=d.get.apply(this);return""===e.type?e:a(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach((function(r){n._streams[r].getTracks().find((function(t){return e.track===t}))&&(t=n._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}},t.shimPeerConnection=function(e){var t=r.detectBrowser(e);!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection);if(!e.RTCPeerConnection)return;var n=0===e.RTCPeerConnection.prototype.addIceCandidate.length;t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=s({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));var o=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return n||arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():o.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}},t.fixNegotiationNeeded=function(e){r.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){if("stable"===e.target.signalingState)return e}))},Object.defineProperty(t,"shimGetUserMedia",{enumerable:!0,get:function(){return o.shimGetUserMedia}}),Object.defineProperty(t,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}});var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==c(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(51)),o=n(605),i=n(606);function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var o=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(o)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),o.apply(this,arguments)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shimGetUserMedia=function(e){var t=e&&e.navigator;if(!t.mediaDevices)return;var n=r.detectBrowser(e),o=function(e){if("object"!==i(e)||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===i(e[n])?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var a={};"number"==typeof r.ideal?(a[o("min",n)]=r.ideal,t.optional.push(a),(a={})[o("max",n)]=r.ideal,t.optional.push(a)):(a[o("",n)]=r.ideal,t.optional.push(a))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},s=function(e,r){if(n.version>=61)return r(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===i(e.audio)){var s=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};s((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),s(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=o(e.audio)}if(e&&"object"===i(e.video)){var c=e.video.facingMode;c=c&&("object"===i(c)?c:{ideal:c});var u,l=n.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||l))if(delete e.video.facingMode,"environment"===c.exact||"environment"===c.ideal?u=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(u=["front"]),u)return t.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return u.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&u.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=c.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=o(e.video),a("chrome: "+JSON.stringify(e)),r(e)}));e.video=o(e.video)}return a("chrome: "+JSON.stringify(e)),r(e)},c=function(e){return n.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,n,r){s(e,(function(e){t.webkitGetUserMedia(e,n,(function(e){r&&r(c(e))}))}))}.bind(t),t.mediaDevices.getUserMedia){var u=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return s(e,(function(e){return u(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(c(e))}))}))}}};var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=r?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(51));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r.log},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shimGetDisplayMedia=function(e,t){if(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)return;if(!e.navigator.mediaDevices)return;if("function"!=typeof t)return void console.error("shimGetDisplayMedia: getSourceId argument is not a function");e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,o=n.video&&n.video.height,i=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:i||3}},r&&(n.video.mandatory.maxWidth=r),o&&(n.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(n)}))}}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.shimPeerConnection=function(e){var t=i.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}});e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var r=(0,s.default)(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,a.filterIceServers)(e.iceServers,t.version),i.log("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype},t.shimReplaceTrack=function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)},Object.defineProperty(t,"shimGetUserMedia",{enumerable:!0,get:function(){return c.shimGetUserMedia}}),Object.defineProperty(t,"shimGetDisplayMedia",{enumerable:!0,get:function(){return u.shimGetDisplayMedia}});var o,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(51)),a=n(608),s=(o=n(609))&&o.__esModule?o:{default:o},c=n(610),u=n(611);function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.filterIceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&o.deprecated("RTCIceServer.url","RTCIceServer.urls");var r="string"==typeof t;return r&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n})),delete e.url,e.urls=r?t[0]:t,!!t.length}}))};var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(51));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}},function(e,t,n){"use strict";var r=n(401);function o(e,t,n,o,i){var a=r.writeRtpDescription(e.kind,t);if(a+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var c="msid:"+(o?o.id:"-")+" "+s+"\r\n";a+="a="+c,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),a}function i(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},o=function(e,t,n,o){var i=r(e.parameters.apt,n),a=r(t.parameters.apt,o);return i&&a&&i.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach((function(r){for(var i=0;i<t.codecs.length;i++){var a=t.codecs[i];if(r.name.toLowerCase()===a.name.toLowerCase()&&r.clockRate===a.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&a.parameters.apt&&!o(r,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(r.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var o=t.headerExtensions[r];if(e.uri===o.uri){n.headerExtensions.push(o);break}}})),n}function a(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function s(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,n,r,o){var i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=o,e.setTimeout((function(){t._dispatchEvent("track",i)}))}var l=function(n){var o=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){o[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o="string"==typeof r;return o&&(r=[r]),r=r.filter((function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!n?(n=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")})),delete e.url,e.urls=o?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var a=n.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var o=this._createIceAndDtlsTransports();r.iceTransport=o.iceTransport,r.dtlsTransport=o.dtlsTransport}return t||this.transceivers.push(r),r},l.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(r=this.transceivers[o]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},l.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},l.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},l.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},l.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},l.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var o=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(o,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;o.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},o.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),o},l.prototype._gather=function(t,n){var o=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var a=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(o.usingBundle&&n>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:n};var s=e.candidate,c=!s||0===Object.keys(s).length;if(c)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),s.component=1,s.ufrag=i.getLocalParameters().usernameFragment;var u=r.writeCandidate(s);a.candidate=Object.assign(a.candidate,r.parseCandidate(u)),a.candidate.candidate=u,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var l=r.getMediaSections(o._localDescription.sdp);l[a.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",o._localDescription.sdp=r.getDescription(o._localDescription.sdp)+l.join("");var d=o.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==o.iceGatheringState&&(o.iceGatheringState="gathering",o._emitGatheringStateChange()),c||o._dispatchEvent("icecandidate",a),d&&(o._dispatchEvent("icecandidate",new Event("icecandidate")),o.iceGatheringState="complete",o._emitGatheringStateChange())}},e.setTimeout((function(){a.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,n,o){var a=i(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(a.encodings=e.sendEncodingParameters,a.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(a.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(a)),o&&e.rtpReceiver&&a.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?a.encodings=e.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(a.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(a.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(a))},l.prototype.setLocalDescription=function(e){var t,n,o=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!a("setLocalDescription",e.type,o.signalingState)||o._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+o.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=r.parseRtpParameters(e);o.transceivers[t].localCapabilities=n})),o.transceivers.forEach((function(e,t){o._gather(e.mid,t)}));else if("answer"===e.type){t=r.splitSections(o._remoteDescription.sdp),n=t.shift();var s=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var a=o.transceivers[t],c=a.iceGatherer,u=a.iceTransport,l=a.dtlsTransport,d=a.localCapabilities,f=a.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length)&&!a.rejected){var p=r.getIceParameters(e,n),h=r.getDtlsParameters(e,n);s&&(h.role="server"),o.usingBundle&&0!==t||(o._gather(a.mid,t),"new"===u.state&&u.start(c,p,s?"controlling":"controlled"),"new"===l.state&&l.start(h));var v=i(d,f);o._transceive(a,v.codecs.length>0,!1)}}))}return o._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?o._updateSignalingState("have-local-offer"):o._updateSignalingState("stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(o){var l=this;if(-1===["offer","answer"].indexOf(o.type))return Promise.reject(c("TypeError",'Unsupported type "'+o.type+'"'));if(!a("setRemoteDescription",o.type,l.signalingState)||l._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+o.type+" in state "+l.signalingState));var d={};l.remoteStreams.forEach((function(e){d[e.id]=e}));var f=[],p=r.splitSections(o.sdp),h=p.shift(),v=r.matchPrefix(h,"a=ice-lite").length>0,m=r.matchPrefix(h,"a=group:BUNDLE ").length>0;l.usingBundle=m;var g=r.matchPrefix(h,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,p.forEach((function(a,c){var u=r.splitLines(a),p=r.getKind(a),g=r.isRejected(a)&&0===r.matchPrefix(a,"a=bundle-only").length,y=u[0].substr(2).split(" ")[2],b=r.getDirection(a,h),S=r.parseMsid(a),w=r.getMid(a)||r.generateIdentifier();if(g||"application"===p&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))l.transceivers[c]={mid:w,kind:p,protocol:y,rejected:!0};else{var C,_,E,T,O,R,k,P,x;!g&&l.transceivers[c]&&l.transceivers[c].rejected&&(l.transceivers[c]=l._createTransceiver(p,!0));var I,A,M=r.parseRtpParameters(a);g||(I=r.getIceParameters(a,h),(A=r.getDtlsParameters(a,h)).role="client"),k=r.parseRtpEncodingParameters(a);var j=r.parseRtcpParameters(a),D=r.matchPrefix(a,"a=end-of-candidates",h).length>0,L=r.matchPrefix(a,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===o.type||"answer"===o.type)&&!g&&m&&c>0&&l.transceivers[c]&&(l._disposeIceAndDtlsTransports(c),l.transceivers[c].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[c].iceTransport=l.transceivers[0].iceTransport,l.transceivers[c].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[c].rtpSender&&l.transceivers[c].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[c].rtpReceiver&&l.transceivers[c].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==o.type||g){if("answer"===o.type&&!g){_=(C=l.transceivers[c]).iceGatherer,E=C.iceTransport,T=C.dtlsTransport,O=C.rtpReceiver,R=C.sendEncodingParameters,P=C.localCapabilities,l.transceivers[c].recvEncodingParameters=k,l.transceivers[c].remoteCapabilities=M,l.transceivers[c].rtcpParameters=j,L.length&&"new"===E.state&&(!v&&!D||m&&0!==c?L.forEach((function(e){s(C.iceTransport,e)})):E.setRemoteCandidates(L)),m&&0!==c||("new"===E.state&&E.start(_,I,"controlling"),"new"===T.state&&T.start(A)),!i(C.localCapabilities,C.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&C.sendEncodingParameters[0].rtx&&delete C.sendEncodingParameters[0].rtx,l._transceive(C,"sendrecv"===b||"recvonly"===b,"sendrecv"===b||"sendonly"===b),!O||"sendrecv"!==b&&"sendonly"!==b?delete C.rtpReceiver:(x=O.track,S?(d[S.stream]||(d[S.stream]=new e.MediaStream),n(x,d[S.stream]),f.push([x,O,d[S.stream]])):(d.default||(d.default=new e.MediaStream),n(x,d.default),f.push([x,O,d.default])))}}else{(C=l.transceivers[c]||l._createTransceiver(p)).mid=w,C.iceGatherer||(C.iceGatherer=l._createIceGatherer(c,m)),L.length&&"new"===C.iceTransport.state&&(!D||m&&0!==c?L.forEach((function(e){s(C.iceTransport,e)})):C.iceTransport.setRemoteCandidates(L)),P=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(P.codecs=P.codecs.filter((function(e){return"rtx"!==e.name}))),R=C.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var N,F=!1;if("sendrecv"===b||"sendonly"===b){if(F=!C.rtpReceiver,O=C.rtpReceiver||new e.RTCRtpReceiver(C.dtlsTransport,p),F)x=O.track,S&&"-"===S.stream||(S?(d[S.stream]||(d[S.stream]=new e.MediaStream,Object.defineProperty(d[S.stream],"id",{get:function(){return S.stream}})),Object.defineProperty(x,"id",{get:function(){return S.track}}),N=d[S.stream]):(d.default||(d.default=new e.MediaStream),N=d.default)),N&&(n(x,N),C.associatedRemoteMediaStreams.push(N)),f.push([x,O,N])}else C.rtpReceiver&&C.rtpReceiver.track&&(C.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===C.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),C.associatedRemoteMediaStreams=[]);C.localCapabilities=P,C.remoteCapabilities=M,C.rtpReceiver=O,C.rtcpParameters=j,C.sendEncodingParameters=R,C.recvEncodingParameters=k,l._transceive(l.transceivers[c],!1,F)}}})),void 0===l._dtlsRole&&(l._dtlsRole="offer"===o.type?"active":"passive"),l._remoteDescription={type:o.type,sdp:o.sdp},"offer"===o.type?l._updateSignalingState("have-remote-offer"):l._updateSignalingState("stable"),Object.keys(d).forEach((function(t){var n=d[t];if(n.getTracks().length){if(-1===l.remoteStreams.indexOf(n)){l.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){l._dispatchEvent("addstream",r)}))}f.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&u(l,t,r,[n])}))}})),f.forEach((function(e){e[2]||u(l,e[0],e[1],[])})),e.setTimeout((function(){l&&l.transceivers&&l.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},l.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var i=n.transceivers.filter((function(e){return"audio"===e.kind})).length,a=n.transceivers.filter((function(e){return"video"===e.kind})).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(i=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(a=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)}));i>0||a>0;)i>0&&(n._createTransceiver("audio"),i--),a>0&&(n._createTransceiver("video"),a--);var u=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(o,i){var a=o.track,s=o.kind,c=o.mid||r.generateIdentifier();o.mid=c,o.iceGatherer||(o.iceGatherer=n._createIceGatherer(i,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(s);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),o.remoteCapabilities&&o.remoteCapabilities.codecs&&o.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(o.remoteCapabilities&&o.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=o.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];a&&t>=15019&&"video"===s&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),o.wantReceive&&(o.rtpReceiver=new e.RTCRtpReceiver(o.dtlsTransport,s)),o.localCapabilities=u,o.sendEncodingParameters=l})),"max-compat"!==n._config.bundlePolicy&&(u+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){u+=o(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))}));var l=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(l)},l.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var a=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(a+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n";var s=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,r){if(!(r+1>s)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?a+="m=application 0 DTLS/SCTP 5000\r\n":a+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;if(e.stream)"audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var u=i(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=o(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(u)},l.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(o,i){if(!n._remoteDescription)return i(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<n.transceivers.length;u++)if(n.transceivers[u].mid===e.sdpMid){a=u;break}var l=n.transceivers[a];if(!l)return i(c("OperationError","Can not add ICE candidate"));if(l.rejected)return o();var d=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return o();if(d.component&&1!==d.component)return o();if((0===a||a>0&&l.iceTransport!==n.transceivers[0].iceTransport)&&!s(l.iceTransport,d))return i(c("OperationError","Can not add ICE candidate"));var f=e.candidate.trim();0===f.indexOf("a=")&&(f=f.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[a]+="a="+(d.type?f:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var p=0;p<n.transceivers.length&&(n.transceivers[p].rejected||(n.transceivers[p].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));p++);o()}))},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var d=["createOffer","createAnswer"];return d.forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(d=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shimGetUserMedia=function(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch((function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shimGetDisplayMedia=function(e){if(!("getDisplayMedia"in e.navigator))return;if(!e.navigator.mediaDevices)return;if(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)return;e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shimOnTrack=function(e){"object"===s(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},t.shimPeerConnection=function(e){var t=r.detectBrowser(e);if("object"!==s(e)||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection);t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));if(t.version<68){var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}var o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),n=e[0],r=e[1],a=e[2];return i.apply(this,[n||null]).then((function(e){if(t.version<53&&!r)try{e.forEach((function(e){e.type=o[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,n){e.set(n,Object.assign({},t,{type:o[t.type]||t.type}))}))}return e})).then(r,a)}},t.shimSenderGetStats=function(e){if("object"!==s(e)||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e});e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}},t.shimReceiverGetStats=function(e){if("object"!==s(e)||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});r.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}},t.shimRemoveStream=function(e){if(!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype)return;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;r.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))}},t.shimRTCDataChannel=function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)},t.shimAddTransceiver=function(e){if("object"!==s(e)||!e.RTCPeerConnection)return;var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var o=r.sender,i=o.getParameters();"encodings"in i||(i.encodings=e.sendEncodings,this.setParametersPromises.push(o.setParameters(i).catch((function(){}))))}return r})},t.shimCreateOffer=function(e){if("object"!==s(e)||!e.RTCPeerConnection)return;var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}},t.shimCreateAnswer=function(e){if("object"!==s(e)||!e.RTCPeerConnection)return;var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}},Object.defineProperty(t,"shimGetUserMedia",{enumerable:!0,get:function(){return o.shimGetUserMedia}}),Object.defineProperty(t,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}});var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(51)),o=n(613),i=n(614);function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shimGetUserMedia=function(e){var t=r.detectBrowser(e),n=e&&e.navigator,o=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,o){r.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,o)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===i(e)&&"object"===i(e.audio)&&(e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","mozAutoGainControl"),a(e.audio,"noiseSuppression","mozNoiseSuppression")),s(e)},o&&o.prototype.getSettings){var c=o.prototype.getSettings;o.prototype.getSettings=function(){var e=c.apply(this,arguments);return a(e,"mozAutoGainControl","autoGainControl"),a(e,"mozNoiseSuppression","noiseSuppression"),e}}if(o&&o.prototype.applyConstraints){var u=o.prototype.applyConstraints;o.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===i(e)&&(e=JSON.parse(JSON.stringify(e)),a(e,"autoGainControl","mozAutoGainControl"),a(e,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[e])}}}};var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=r?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(51));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shimGetDisplayMedia=function(e,t){if(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)return;if(!e.navigator.mediaDevices)return;e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shimLocalStreamsAPI=function(e){if("object"!==i(e)||!e.RTCPeerConnection)return;"getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams});if(!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){var n=arguments[1];return n&&(this._localStreams?this._localStreams.includes(n)||this._localStreams.push(n):this._localStreams=[n]),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})},t.shimRemoteStreamsAPI=function(e){if("object"!==i(e)||!e.RTCPeerConnection)return;"getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]});if(!("onaddstream"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}},t.shimCallbacksAPI=function(e){if("object"!==i(e)||!e.RTCPeerConnection)return;var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,o=t.setLocalDescription,a=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],o=r.apply(this,[n]);return t?(o.then(e,t),Promise.resolve()):o};var c=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=c,c=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=c,c=function(e,t,n){var r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=c},t.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(a(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))},t.shimConstraints=a,t.shimRTCIceServerUrls=function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var o=[],i=0;i<e.iceServers.length;i++){var a=e.iceServers[i];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(r.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,o.push(a)):o.push(e.iceServers[i])}e.iceServers=o}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})},t.shimTrackEventTransceiver=function(e){"object"===i(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},t.shimCreateOfferLegacy=function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}};var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=r?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(51));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return e&&void 0!==e.video?Object.assign({},e,{video:r.compactObject(e.video)}):e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shimRTCIceCandidate=function(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===s(e)&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=o.default.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,i.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))},t.shimMaxMessageSize=function(e){if(!e.RTCPeerConnection)return;var t=i.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=o.default.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=o.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n},a=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},s=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=o.default.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},c=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){var e=this.getConfiguration(),o=e.sdpSemantics;"plan-b"===o&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){var i,u=r(arguments[0]),l=a(u),d=s(arguments[0],u);i=0===l&&0===d?Number.POSITIVE_INFINITY:0===l||0===d?Math.max(l,d):Math.min(l,d);var f={};Object.defineProperty(f,"maxMessageSize",{get:function(){return i}}),this._sctp=f}return c.apply(this,arguments)}},t.shimSendThrowTypeError=function(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){var n=e.send;e.send=function(){var r=arguments[0],o=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&o>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}var n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=n.apply(this,arguments);return t(e,this),e},i.wrapPeerConnectionEvent(e,"datachannel",(function(e){return t(e.channel,e.target),e}))},t.shimConnectionState=function(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))},t.removeAllowExtmapMixed=function(e){if(!e.RTCPeerConnection)return;var t=i.detectBrowser(e);if("chrome"===t.browser&&t.version>=71)return;var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n")),n.apply(this,arguments)}};var r,o=(r=n(401))&&r.__esModule?r:{default:r},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(51));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=171)}({0:function(e,t,n){"use strict";function r(e,t,n,r,o,i,a,s){var c,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):o&&(c=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",(function(){return r}))},1:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r,o,i=e[1]||"",a=e[3];if(!a)return i;if(t&&"function"==typeof btoa){var s=(n=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(o," */")),c=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[i].concat(c).concat([s]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},103:function(e,t,n){var r=n(217);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,n(2).default)("580db908",r,!0,{})},171:function(e,t,n){"use strict";n.r(t),n(30);var r={name:"AppSidebarTab",props:{id:{type:String,required:!0},name:{type:String,required:!0},icon:{type:String,required:!0},order:{type:Number,default:0}},computed:{isActive:function(){return this.$parent.activeTab===this.id}}},o=(n(216),n(0)),i=Object(o.a)(r,(function(){var e=this.$createElement;return(this._self._c||e)("section",{directives:[{name:"show",rawName:"v-show",value:this.isActive,expression:"isActive"}],attrs:{id:"tab-"+this.id,"aria-hidden":!this.isActive,"aria-labelledby":this.name,tabindex:"0",role:"tabpanel"}},[this._t("default")],2)}),[],!1,null,"02f177dc",null).exports;n.d(t,"AppSidebarTab",(function(){return i})),
/**
 * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>
 *
 * @author John Molakvoæ <skjnldsv@protonmail.com>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
t.default=i},2:function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],a=i[0],s={id:e+":"+o,css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}n.r(t),n.d(t,"default",(function(){return h}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},a=o&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,u=!1,l=function(){},d=null,f="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,t,n,o){u=n,d=o||{};var a=r(e,t);return v(a),function(t){for(var n=[],o=0;o<a.length;o++){var s=a[o];(c=i[s.id]).refs--,n.push(c)}for(t?v(a=r(e,t)):a=[],o=0;o<n.length;o++){var c;if(0===(c=n[o]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete i[c.id]}}}}function v(e){for(var t=0;t<e.length;t++){var n=e[t],r=i[n.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(g(n.parts[o]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(o=0;o<n.parts.length;o++)a.push(g(n.parts[o]));i[n.id]={id:n.id,refs:1,parts:a}}}}function m(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function g(e){var t,n,r=document.querySelector("style["+f+'~="'+e.id+'"]');if(r){if(u)return l;r.parentNode.removeChild(r)}if(p){var o=c++;r=s||(s=m()),t=S.bind(null,r,o,!1),n=S.bind(null,r,o,!0)}else r=m(),t=function(e,t){var n=t.css,r=t.media,o=t.sourceMap;if(r&&e.setAttribute("media",r),d.ssrId&&e.setAttribute(f,t.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var y,b=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function S(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=b(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}},216:function(e,t,n){"use strict";var r=n(103);n.n(r).a},217:function(e,t,n){(t=n(1)(!1)).push([e.i,"section[data-v-02f177dc]{padding:10px;min-height:100%}section[data-v-02f177dc]:focus{border-color:var(--color-primary);box-shadow:0 0 0.2em var(--color-primary);outline:0}\n",""]),e.exports=t},30:function(e,t){e.exports=n(162)}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(837);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(20).default)("46fdc006",r,!0,{})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(744);n.n(r).a},function(e,t,n){(t=n(19)(!1)).push([e.i,"\n#tab-chat[data-v-e4ce9078] {\n\theight: 100%;\n\n\t/* Remove padding to maximize the space for the chat view. */\n\tpadding: 0;\n}\n",""]),e.exports=t},,,,,,,,,,,,,,,,function(e,n,r){"use strict";r.r(n);
/**
 *
 * @copyright Copyright (c) 2019, Daniel Calviño Sánchez <danxuliu@gmail.com>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 */
class o{constructor(){this.callViewInstance=OCA.Talk.newCallView(),this.$el=document.createElement("div"),this.callViewInstance.$mount(this.$el),this.$el=this.callViewInstance.$el,this.$el.replaceAll=function(e){e.replaceWith(this.$el)}.bind(this)}setFileInfo(e){this.callViewInstance.$children[0].setFileInfo(e)}}var i=r(708),a={name:"FilesSidebarTab",components:{Tab:r.n(i).a},props:{fileInfo:{type:Object,default:()=>{},required:!0}},data:()=>({icon:"icon-talk",loading:!1,name:t("spreed","Chat"),tab:null,token:null}),computed:{id:()=>"chat",activeTab(){return this.$parent.activeTab}},beforeMount(){},mounted(){try{OCA.Talk.fileInfo=this.fileInfo,this.tab=OCA.Talk.newTab(),this.tab.$mount("#talk-tab-mount")}catch(e){console.error("Unable to mount Chat tab",e)}},beforeDestroy(){try{OCA.Talk.fileInfo=null,this.tab.$destroy()}catch(e){console.error("Unable to unmount Chat tab",e)}}},s=(r(836),r(4)),c=Object(s.a)(a,(function(){var e=this.$createElement,t=this._self._c||e;return t("Tab",{class:{"icon-loading":this.loading},attrs:{id:this.id,icon:this.icon,name:this.name}},[t("div",{attrs:{id:"talk-tab-mount"}})])}),[],!1,null,"e4ce9078",null).exports,u=r(43);
/**
 * @copyright Copyright (c) 2019 Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @author Marco Ambrosini <marcoambrosini@pm.me>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 */
const l=function(e){return!(!e||e.isDirectory())||(Object(u.e)(OCA.Talk.store.getters.getToken()),OCA.Talk.store.dispatch("updateTokenAndFileIdForToken",{newToken:null,newFileId:null}),!1)};window.addEventListener("DOMContentLoaded",()=>{OCA.Files&&OCA.Files.Sidebar&&(OCA.Files.Sidebar.registerSecondaryView(new o),OCA.Files.Sidebar.registerTab(new OCA.Files.Sidebar.Tab("tab-chat",c,l)))})}]);
//# sourceMappingURL=talk-files-sidebar-loader.js.map